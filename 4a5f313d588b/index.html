<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>JDBC (Java Database Connectivity) 详解 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JDBC (Java Database Connectivity) 是 Java 语言中用于访问关系型数据库的标准 Java API (应用程序编程接口)。它提供了一套统一的接口，允许 Java 应用程序以独立于数据库供应商的方式连接到各种关系型数据库（如 MySQL、Oracle、PostgreSQL、SQL Server 等），执行 SQL 语句，并处理查询结果。  核心思想：JDBC 提供">
<meta property="og:type" content="article">
<meta property="og:title" content="JDBC (Java Database Connectivity) 详解">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/4a5f313d588b/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="JDBC (Java Database Connectivity) 是 Java 语言中用于访问关系型数据库的标准 Java API (应用程序编程接口)。它提供了一套统一的接口，允许 Java 应用程序以独立于数据库供应商的方式连接到各种关系型数据库（如 MySQL、Oracle、PostgreSQL、SQL Server 等），执行 SQL 语句，并处理查询结果。  核心思想：JDBC 提供">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-07.jpg">
<meta property="article:published_time" content="2024-01-19T22:24:00.000Z">
<meta property="article:modified_time" content="2025-12-23T10:06:22.903Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="编码规范">
<meta property="article:tag" content="程序设计">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="2024">
<meta property="article:tag" content="JDBC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-07.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "JDBC (Java Database Connectivity) 详解",
  "url": "https://blog.tbf1211.xx.kg/4a5f313d588b/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-07.jpg",
  "datePublished": "2024-01-19T22:24:00.000Z",
  "dateModified": "2025-12-23T10:06:22.903Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/4a5f313d588b/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JDBC (Java Database Connectivity) 详解',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">426</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">219</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">80</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-07.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">JDBC (Java Database Connectivity) 详解</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">JDBC (Java Database Connectivity) 详解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2024-01-19T22:24:00.000Z" title="发表于 2024-01-20 06:24:00">2024-01-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">程序设计</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>11分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><strong>JDBC (Java Database Connectivity)</strong> 是 Java 语言中用于访问关系型数据库的<strong>标准 Java API (应用程序编程接口)</strong>。它提供了一套统一的接口，允许 Java 应用程序以<strong>独立于数据库供应商</strong>的方式连接到各种关系型数据库（如 MySQL、Oracle、PostgreSQL、SQL Server 等），执行 SQL 语句，并处理查询结果。</p>
</blockquote>
<div class="note info flat"><p>核心思想：<strong>JDBC 提供了一个通用的抽象层，使得 Java 开发者可以使用一套标准的 API 来与任何支持 JDBC 规范的关系型数据库进行交互，而无需关心底层数据库的具体实现细节。</strong></p>
</div>

<hr>
<h2 id="一、为什么需要-JDBC？"><a href="#一、为什么需要-JDBC？" class="headerlink" title="一、为什么需要 JDBC？"></a>一、为什么需要 JDBC？</h2><p>在 JDBC 出现之前，Java 应用程序要连接和操作数据库，需要为每种数据库编写特定的代码。这意味着：</p>
<ol>
<li><strong>缺乏通用性</strong>：每更换一个数据库，应用程序的代码就需要大幅修改。</li>
<li><strong>开发效率低</strong>：开发者需要熟悉不同数据库的私有 API。</li>
<li><strong>维护成本高</strong>：代码难以维护和扩展。</li>
</ol>
<p>JDBC 的目标就是解决这些问题，提供一个**“一次编写，处处运行” (Write Once, Run Anywhere)** 的数据库访问解决方案：</p>
<ul>
<li><strong>统一接口</strong>：JDBC 定义了标准接口（<code>Connection</code>, <code>Statement</code>, <code>ResultSet</code> 等），Java 应用程序只需与这些接口交互。</li>
<li><strong>驱动实现</strong>：每个数据库供应商提供其数据库的 JDBC <strong>驱动程序 (Driver)</strong>，这个驱动程序负责实现 JDBC 接口，并将 JDBC 调用翻译成数据库能理解的特定协议。</li>
<li><strong>数据库无关性</strong>：应用程序代码只依赖于 JDBC 接口，切换数据库只需更换相应的 JDBC 驱动包和修改连接字符串即可，无需修改核心业务逻辑。</li>
</ul>
<p><strong>JDBC 架构示意图：</strong></p>
<div class="mermaid-wrap"><pre class="mermaid-src" data-config="{}" hidden>
    graph TD
    A[Java Application] --&gt;|JDBC API Calls| B[JDBC Driver Manager]
    B --&gt;|加载并管理| C[&quot;JDBC Driver &lt;br&gt;(Vendor Specific)&quot;]
    C --&gt;|通过网络协议| D[&quot;Database (MySQL, &lt;br&gt;Oracle, PostgreSQL, etc.)&quot;]
  </pre></div>

<h2 id="二、JDBC-核心组件与接口"><a href="#二、JDBC-核心组件与接口" class="headerlink" title="二、JDBC 核心组件与接口"></a>二、JDBC 核心组件与接口</h2><p>JDBC API 主要由 <code>java.sql</code> 包中的接口和类组成。以下是其核心组件：</p>
<ol>
<li><p><strong><code>DriverManager</code></strong>：</p>
<ul>
<li>管理 JDBC 驱动程序。</li>
<li>负责注册和加载驱动，并根据传入的数据库 URL 找到合适的驱动来建立数据库连接。</li>
<li>主要方法：<code>getConnection(String url, String user, String password)</code>。</li>
</ul>
</li>
<li><p><strong><code>Connection</code></strong>：</p>
<ul>
<li>代表与特定数据库的会话（连接）。</li>
<li>负责管理事务（提交、回滚）、创建 <code>Statement</code> 对象。</li>
<li>重要方法：<code>createStatement()</code>, <code>prepareStatement(String sql)</code>, <code>commit()</code>, <code>rollback()</code>, <code>close()</code>。</li>
</ul>
</li>
<li><p><strong><code>Statement</code></strong>：</p>
<ul>
<li>用于执行静态 SQL 语句并返回结果。</li>
<li>执行不带参数的 SQL 语句。</li>
<li>重要方法：<code>executeQuery(String sql)</code> (查询)、<code>executeUpdate(String sql)</code> (更新、插入、删除)、<code>execute(String sql)</code> (通用)。</li>
</ul>
</li>
<li><p><strong><code>PreparedStatement</code></strong>：</p>
<ul>
<li>继承自 <code>Statement</code>，用于执行<strong>预编译</strong>的 SQL 语句。</li>
<li>SQL 语句在创建时被发送到数据库进行预编译，可以使用<strong>占位符 <code>?</code></strong> 来动态设置参数。</li>
<li>优点：<ul>
<li><strong>性能优化</strong>：对于多次执行相同 SQL 语句的情况，数据库只需编译一次。</li>
<li><strong>防止 SQL 注入</strong>：参数会被正确处理，避免恶意代码嵌入。</li>
</ul>
</li>
<li>重要方法：<code>setXxx(int parameterIndex, Xxx value)</code> (设置参数)、<code>executeQuery()</code>, <code>executeUpdate()</code>。</li>
</ul>
</li>
<li><p><strong><code>CallableStatement</code></strong>：</p>
<ul>
<li>继承自 <code>PreparedStatement</code>，用于执行数据库的<strong>存储过程 (Stored Procedures)</strong>。</li>
<li>支持输入参数、输出参数和返回值。</li>
</ul>
</li>
<li><p><strong><code>ResultSet</code></strong>：</p>
<ul>
<li>代表 SQL 查询的结果集。</li>
<li>是一个行迭代器，通过 <code>next()</code> 方法逐行遍历结果。</li>
<li>提供了一系列 <code>getXxx(String columnName)</code> 或 <code>getXxx(int columnIndex)</code> 方法来获取当前行各个列的数据。</li>
<li>重要方法：<code>next()</code>, <code>getXxx()</code>, <code>close()</code>。</li>
</ul>
</li>
</ol>
<h2 id="三、JDBC-连接数据库的步骤-JDBC-编程六步走"><a href="#三、JDBC-连接数据库的步骤-JDBC-编程六步走" class="headerlink" title="三、JDBC 连接数据库的步骤 (JDBC 编程六步走)"></a>三、JDBC 连接数据库的步骤 (JDBC 编程六步走)</h2><p>使用 JDBC 访问数据库通常遵循以下六个基本步骤：</p>
<ol>
<li><strong>加载 JDBC 驱动</strong>：将数据库厂商提供的 JDBC 驱动程序加载到 JVM 中。</li>
<li><strong>建立数据库连接</strong>：通过 <code>DriverManager</code> 获取 <code>Connection</code> 对象。</li>
<li><strong>创建 Statement 对象</strong>：通过 <code>Connection</code> 对象创建 <code>Statement</code> 或 <code>PreparedStatement</code> 对象。</li>
<li><strong>执行 SQL 语句</strong>：通过 <code>Statement</code> 或 <code>PreparedStatement</code> 对象执行 SQL 查询或更新。</li>
<li><strong>处理查询结果</strong>：如果执行的是查询语句，处理 <code>ResultSet</code> 返回的结果。</li>
<li><strong>关闭资源</strong>：依次关闭 <code>ResultSet</code>、<code>Statement</code> 和 <code>Connection</code> 对象，释放数据库资源。</li>
</ol>
<p><strong>代码示例：JDBC 基础操作</strong></p>
<p>假设我们有一个 MySQL 数据库，用户名为 <code>root</code>，密码为 <code>123456</code>，数据库名为 <code>testdb</code>，其中包含一个 <code>users</code> 表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> users (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    age <span class="type">INT</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>Maven 依赖 (MySQL Connector&#x2F;J):</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- 根据你的MySQL版本选择合适的驱动版本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCCrudDemo</span> &#123;</span><br><span class="line">    <span class="comment">// 数据库连接信息</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DB_URL</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/testdb?useSSL=false&amp;serverTimezone=UTC&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">USER</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PASS</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 加载 JDBC 驱动</span></span><br><span class="line">        <span class="comment">// 对于 JDK 6+，DriverManager 会自动发现并加载合适的驱动，</span></span><br><span class="line">        <span class="comment">// 但显式加载 Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); 仍然是常见且安全的做法</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;JDBC Driver loaded successfully.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;Failed to load JDBC driver: &quot;</span> + e.getMessage());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// 推荐使用 PreparedStatement</span></span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 2. 建立数据库连接</span></span><br><span class="line">            conn = DriverManager.getConnection(DB_URL, USER, PASS);</span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>); <span class="comment">// 开启事务手动提交模式</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Database connection established.&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. 插入数据 (INSERT)</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">insertSql</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO users(name, age) VALUES(?, ?)&quot;</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(insertSql);</span><br><span class="line">            pstmt.setString(<span class="number">1</span>, <span class="string">&quot;Alice&quot;</span>);</span><br><span class="line">            pstmt.setInt(<span class="number">2</span>, <span class="number">30</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">affectedRows</span> <span class="operator">=</span> pstmt.executeUpdate();</span><br><span class="line">            System.out.println(<span class="string">&quot;Inserted &quot;</span> + affectedRows + <span class="string">&quot; row(s).&quot;</span>);</span><br><span class="line"></span><br><span class="line">            pstmt.setString(<span class="number">1</span>, <span class="string">&quot;Bob&quot;</span>);</span><br><span class="line">            pstmt.setInt(<span class="number">2</span>, <span class="number">25</span>);</span><br><span class="line">            affectedRows = pstmt.executeUpdate();</span><br><span class="line">            System.out.println(<span class="string">&quot;Inserted &quot;</span> + affectedRows + <span class="string">&quot; row(s).&quot;</span>);</span><br><span class="line">            conn.commit(); <span class="comment">// 提交事务</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Insert transaction committed.&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 关闭 PreparedStatement，准备新的操作</span></span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                pstmt.close();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. 查询数据 (SELECT)</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">selectSql</span> <span class="operator">=</span> <span class="string">&quot;SELECT id, name, age FROM users WHERE age &gt; ?&quot;</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(selectSql);</span><br><span class="line">            pstmt.setInt(<span class="number">1</span>, <span class="number">28</span>);</span><br><span class="line">            rs = pstmt.executeQuery(); <span class="comment">// 执行查询</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5. 处理查询结果</span></span><br><span class="line">            System.out.println(<span class="string">&quot;\n--- Query Results (Users older than 28) ---&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123; <span class="comment">// 遍历结果集</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;ID: &quot;</span> + id + <span class="string">&quot;, Name: &quot;</span> + name + <span class="string">&quot;, Age: &quot;</span> + age);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;----------------------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 关闭 ResultSet，准备新的操作</span></span><br><span class="line">            <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                pstmt.close();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 6. 更新数据 (UPDATE)</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">updateSql</span> <span class="operator">=</span> <span class="string">&quot;UPDATE users SET age = ? WHERE name = ?&quot;</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(updateSql);</span><br><span class="line">            pstmt.setInt(<span class="number">1</span>, <span class="number">31</span>);</span><br><span class="line">            pstmt.setString(<span class="number">2</span>, <span class="string">&quot;Alice&quot;</span>);</span><br><span class="line">            affectedRows = pstmt.executeUpdate();</span><br><span class="line">            System.out.println(<span class="string">&quot;\nUpdated &quot;</span> + affectedRows + <span class="string">&quot; row(s).&quot;</span>);</span><br><span class="line">            conn.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;Update transaction committed.&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 关闭 PreparedStatement，准备新的操作</span></span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                pstmt.close();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 7. 删除数据 (DELETE)</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">deleteSql</span> <span class="operator">=</span> <span class="string">&quot;DELETE FROM users WHERE name = ?&quot;</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(deleteSql);</span><br><span class="line">            pstmt.setString(<span class="number">1</span>, <span class="string">&quot;Bob&quot;</span>);</span><br><span class="line">            affectedRows = pstmt.executeUpdate();</span><br><span class="line">            System.out.println(<span class="string">&quot;\nDeleted &quot;</span> + affectedRows + <span class="string">&quot; row(s).&quot;</span>);</span><br><span class="line">            conn.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;Delete transaction committed.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;Database operation failed: &quot;</span> + e.getMessage());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                    conn.rollback(); <span class="comment">// 发生异常时回滚事务</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;Transaction rolled back.&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                System.err.println(<span class="string">&quot;Rollback failed: &quot;</span> + ex.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 8. 关闭资源 (重要！)</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (rs != <span class="literal">null</span>) rs.close();</span><br><span class="line">                <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) pstmt.close();</span><br><span class="line">                <span class="keyword">if</span> (conn != <span class="literal">null</span>) conn.close();</span><br><span class="line">                System.out.println(<span class="string">&quot;\nAll JDBC resources closed.&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                System.err.println(<span class="string">&quot;Error closing JDBC resources: &quot;</span> + e.getMessage());</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="四、JDBC-事务管理"><a href="#四、JDBC-事务管理" class="headerlink" title="四、JDBC 事务管理"></a>四、JDBC 事务管理</h2><p>事务 (Transaction) 是一系列数据库操作，这些操作要么全部成功提交，要么全部失败回滚。JDBC 支持事务管理。</p>
<ul>
<li><strong>默认行为</strong>：<code>Connection</code> 对象默认是<strong>自动提交 (Auto-Commit)</strong> 模式，即每执行一个 SQL 语句，都会立即提交到数据库。</li>
<li><strong>手动事务</strong>：<ol>
<li><code>conn.setAutoCommit(false);</code>：将连接设置为手动提交模式。</li>
<li>执行一系列 SQL 操作。</li>
<li><code>conn.commit();</code>：所有操作成功后，提交事务。</li>
<li><code>conn.rollback();</code>：如果任何操作失败，回滚事务，撤销所有未提交的更改。</li>
<li><code>conn.setAutoCommit(true);</code>：可选，恢复为自动提交模式。</li>
</ol>
</li>
</ul>
<p>在上面的示例中，我们已经演示了如何通过 <code>setAutoCommit(false)</code>、<code>commit()</code> 和 <code>rollback()</code> 来进行事务管理。</p>
<h2 id="五、Statement-PreparedStatement-和-CallableStatement-的区别"><a href="#五、Statement-PreparedStatement-和-CallableStatement-的区别" class="headerlink" title="五、Statement, PreparedStatement 和 CallableStatement 的区别"></a>五、Statement, PreparedStatement 和 CallableStatement 的区别</h2><table>
<thead>
<tr>
<th align="left">特性</th>
<th align="left"><code>Statement</code></th>
<th align="left"><code>PreparedStatement</code></th>
<th align="left"><code>CallableStatement</code></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>用途</strong></td>
<td align="left">执行静态 SQL 语句。</td>
<td align="left">执行预编译的 SQL 语句。</td>
<td align="left">执行数据库存储过程。</td>
</tr>
<tr>
<td align="left"><strong>SQL 语句</strong></td>
<td align="left">每次执行时都传递完整的 SQL 字符串。</td>
<td align="left">使用占位符 <code>?</code>，SQL 语句模板预编译。</td>
<td align="left">使用 <code>&#123;call procedure_name(?, ?)&#125;</code> 语法。</td>
</tr>
<tr>
<td align="left"><strong>参数处理</strong></td>
<td align="left">通过字符串拼接 SQL 语句，可能导致 SQL 注入。</td>
<td align="left">通过 <code>setXxx()</code> 方法安全地设置参数。</td>
<td align="left">支持输入 (<code>IN</code>)、输出 (<code>OUT</code>)、输入&#x2F;输出 (<code>INOUT</code>) 参数。</td>
</tr>
<tr>
<td align="left"><strong>性能</strong></td>
<td align="left">每次执行都需数据库编译，性能较低。</td>
<td align="left">SQL 语句只需编译一次，后续执行性能高。</td>
<td align="left">每次执行都需数据库编译存储过程，但存储过程本身已编译。</td>
</tr>
<tr>
<td align="left"><strong>安全性</strong></td>
<td align="left">易受 SQL 注入攻击。</td>
<td align="left"><strong>有效防止 SQL 注入攻击。</strong></td>
<td align="left">相对安全，但仍需谨慎处理参数。</td>
</tr>
<tr>
<td align="left"><strong>适用场景</strong></td>
<td align="left">只执行一次且不带参数的简单 SQL 语句。</td>
<td align="left">大多数场景，特别是多次执行、带参数或防止 SQL 注入的语句。</td>
<td align="left">调用数据库存储过程。</td>
</tr>
</tbody></table>
<p><strong>强烈建议在绝大多数情况下使用 <code>PreparedStatement</code>。</strong></p>
<h2 id="六、JDBC-最佳实践"><a href="#六、JDBC-最佳实践" class="headerlink" title="六、JDBC 最佳实践"></a>六、JDBC 最佳实践</h2><ol>
<li><strong>始终关闭资源</strong>：在 <code>finally</code> 块中按照 <code>ResultSet</code> -&gt; <code>Statement</code> -&gt; <code>Connection</code> 的顺序关闭资源，防止资源泄露。使用 try-with-resources 语法 (JDK 7+) 可以极大地简化这个过程并确保资源正确关闭。</li>
<li><strong>使用 <code>PreparedStatement</code></strong>：优先使用 <code>PreparedStatement</code> 来执行 SQL 语句，以提高性能和防止 SQL 注入。</li>
<li><strong>事务管理</strong>：合理使用事务来确保数据的一致性，将相关联的数据库操作放在一个事务中。</li>
<li><strong>连接池</strong>：在生产环境中，<strong>切勿直接使用 <code>DriverManager</code> 获取连接</strong>。这会导致每次请求都创建和销毁连接，性能极低。应使用数据库连接池（如 C3P0, Druid, HikariCP）来管理连接，提高性能和资源复用。</li>
<li><strong>异常处理</strong>：捕获并处理 <code>SQLException</code>，提供有意义的错误信息。</li>
<li><strong>日志记录</strong>：使用日志框架（如 Log4j, SLF4J）记录数据库操作和异常信息。</li>
<li><strong>避免在循环中创建 Statement&#x2F;Connection</strong>：这些操作都是昂贵的。</li>
<li><strong>参数索引从 1 开始</strong>：JDBC API 中 <code>PreparedStatement</code> 的参数索引是从 1 开始的，而不是 0。</li>
</ol>
<p><strong>使用 try-with-resources 改进资源关闭：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTryWithResources</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DB_URL</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/testdb?useSSL=false&amp;serverTimezone=UTC&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">USER</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PASS</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;Driver not found: &quot;</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">selectSql</span> <span class="operator">=</span> <span class="string">&quot;SELECT id, name, age FROM users&quot;</span>;</span><br><span class="line">        <span class="comment">// try-with-resources 会自动关闭在括号内声明的实现了 AutoCloseable 接口的资源</span></span><br><span class="line">        <span class="keyword">try</span> (<span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(DB_URL, USER, PASS);</span><br><span class="line">             <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> conn.prepareStatement(selectSql);</span><br><span class="line">             <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pstmt.executeQuery()) &#123; <span class="comment">// 注意：ResultSet 也是 AutoCloseable</span></span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;--- All Users ---&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;ID: &quot;</span> + id + <span class="string">&quot;, Name: &quot;</span> + name + <span class="string">&quot;, Age: &quot;</span> + age);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;Database operation error: &quot;</span> + e.getMessage());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h2><p>JDBC 作为 Java 应用程序与关系型数据库交互的基石，虽然在现代 Java 开发中，我们更多地接触到的是基于 JDBC 之上的更高级别的框架（如 JPA&#x2F;Hibernate、MyBatis、Spring Data JDBC），但理解 JDBC 的底层原理和工作方式对于深入理解这些框架至关重要。掌握 JDBC 不仅能让我们直接操作数据库，更能为理解数据访问层的设计模式和优化策略打下坚实的基础。通过遵循最佳实践，可以确保编写出高效、安全、可维护的数据库访问代码。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/4a5f313d588b/">https://blog.tbf1211.xx.kg/4a5f313d588b/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/">编码规范</a><a class="post-meta__tags" href="/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">程序设计</a><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/2024/">2024</a><a class="post-meta__tags" href="/tags/JDBC/">JDBC</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-07.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/90e06403855b/" title="MyBatis (SQL Mapper Framework) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-03.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">MyBatis (SQL Mapper Framework) 详解</div></div><div class="info-2"><div class="info-item-1"> MyBatis 是一款优秀的持久层框架，它避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集的工作。MyBatis 使用简单的 XML 或注解来配置和映射原始类型、Map 和 POJO 到数据库中的记录。它是一个 SQL Mapper 框架，强调 SQL 的灵活性和控制性，允许开发者完全掌控 SQL 语句，而不需要像全功能 ORM 框架（如 Hibernate）那样进行过度的抽象。  核心思想：MyBatis 提供了一个介于应用程序和数据库之间的桥梁，将 SQL 语句和应用程序代码解耦，并通过 XML 或注解定义 SQL 映射关系，实现数据对象的灵活持久化。它允许开发者编写高性能、可优化的定制化 SQL。    一、为什么需要 MyBatis？在 Java Web 开发中，持久层是处理数据存储和检索的关键部分。传统的 JDBC (Java Database Connectivity) 直接操作数据库，虽然提供了最大的灵活性，但存在以下痛点：  代码冗余和复杂：需要手动编写大量的模板代码来建立连接、创建 Statement、设置参数、处理 ResultSet、关闭资源等...</div></div></div></a><a class="pagination-related" href="/ab5735004159/" title="无感刷新Token详解：提升用户体验与系统安全的认证策略"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-20.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">无感刷新Token详解：提升用户体验与系统安全的认证策略</div></div><div class="info-2"><div class="info-item-1"> 在现代 Web 和移动应用中，基于 Token 的认证方式（如 JWT）已成为主流。它解决了传统 Session-Cookie 认证在分布式系统和跨域场景下的诸多痛点。然而，Token 的有效期问题又带来了新的挑战：如果 Access Token 长期有效，一旦泄露风险巨大；如果短期有效，用户又会频繁因 Token 过期而被迫重新登录，严重影响用户体验。无感刷新 Token (Silent Token Refresh) 正是为了解决这一矛盾而生，它旨在提升安全性、兼顾用户体验，让用户在不感知的情况下，始终保持登录状态。  “无感刷新 Token 的核心思想是：使用一个短期有效的 Access Token 负责日常业务访问，同时使用一个长期有效但受严密保护的 Refresh Token 来在 Access Token 过期时重新获取新的 Access Token，从而实现长期登录且不牺牲安全性的目标。”   一、为什么需要无感刷新 Token？在基于 Token 的认证系统中，通常会涉及到两种 Token：  Access Token (访问令牌)：  用途：用于访问受保护的资源...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/1ce020133b41/" title="Java 泛型 (Generics) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-14.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-23</div><div class="info-item-2">Java 泛型 (Generics) 详解</div></div><div class="info-2"><div class="info-item-1"> Java 泛型 (Generics) 是在 JDK 5.0 中引入的一项重要语言特性，它允许在定义类、接口和方法时，使用类型参数 (Type Parameters) 来表示不确定的类型。这样，编译器可以在编译时对类型进行检查，从而在运行时避免 ClassCastException 等类型转换异常，提高了代码的类型安全性 (Type Safety)、重用性 (Reusability) 和可读性 (Readability)。  核心思想：Java 泛型通过引入类型参数，使得代码可以操作各种类型的数据而无需运行时强制类型转换，从而在编译时提供了更强的类型检查，减少了运行时错误，并提升了代码的通用性和安全性。    一、为什么需要泛型？在泛型出现之前，Java 集合框架（如 ArrayList, HashMap）可以存放任何类型的对象，因为它们操作的是 Object 类型。这带来了两个主要问题：  类型不安全：编译器无法检查集合中存储的实际类型。如果从集合中取出一个对象并强制转换为不正确的类型，就会在运行时抛出 ClassCastException。 代码冗余：每次从集合中取出对象时，...</div></div></div></a><a class="pagination-related" href="/0a6eb114d7c3/" title="Java 虚拟线程 (Virtual Threads) 详解 - Project Loom 的成果"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-16.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-22</div><div class="info-item-2">Java 虚拟线程 (Virtual Threads) 详解 - Project Loom 的成果</div></div><div class="info-2"><div class="info-item-1"> 虚拟线程 (Virtual Threads) 是 Java 平台在 JDK 21 中正式引入 的一项革命性并发特性（作为 Project Loom 1 的主要成果）。它旨在显著简化高吞吐量并发应用的开发和维护，通过提供轻量级的、由 JVM 管理的线程，解决传统平台线程在高并发场景下的性能瓶颈和资源消耗问题。  核心思想：虚拟线程让开发者能够继续沿用更直观的“一请求一线程 (thread-per-request)”的编程模型，同时获得接近异步编程的扩展能力。它将阻塞 I&#x2F;O 操作的开销从昂贵的操作系统线程转移到了 JVM 层面，从而在不改变代码风格的情况下，极大提升了服务器应用的并发吞吐量。   一、为什么需要虚拟线程？(传统并发的痛点)在 Java 历史上，处理并发主要依赖于传统的 平台线程 (Platform Threads)，也就是我们通常所说的 java.lang.Thread 类实例。这些线程直接映射到操作系统 (OS) 线程。 传统平台线程在高并发场景下存在以下痛点：  资源开销大：每个平台线程都需要操作系统分配独立的栈空间（通常 1MB 或更多），以及维护...</div></div></div></a><a class="pagination-related" href="/bfc567fde22c/" title="Java 反射 (Reflection) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-21.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-30</div><div class="info-item-2">Java 反射 (Reflection) 详解</div></div><div class="info-2"><div class="info-item-1"> Java 反射 (Reflection) 是 Java 语言提供的一种强大的机制，它允许运行中的 Java 程序在运行时 (Runtime) 检查自身（包括类、接口、字段和方法）的信息，并且可以在运行时动态地创建对象、调用方法、访问和修改字段。这种能力使得 Java 能够实现高度的动态性和灵活性，是许多高级框架和工具（如 Spring、JUnit、ORM 框架等）的核心基础。  核心思想：Java 反射机制允许程序在运行时动态地获取、检查和操作类、接口、字段和方法的信息，从而实现代码的动态创建、调用和修改，是 Java 动态编程能力的关键所在。    一、为什么需要反射？在传统的 Java 编程中，当我们使用一个类时，通常需要在编译时就明确知道这个类的所有信息（如类名、方法名、字段名等）。然而，有些场景需要程序具备更强的动态性：  解耦与框架设计：框架（如 Spring IoC 容器）需要在启动时根据配置文件或注解来动态创建对象、注入依赖、调用方法，而不是在编码阶段硬编码这些逻辑。反射使得框架能够以通用、灵活的方式处理各种用户定义的类。 动态代理：在不修改源码的情况下，为现有对...</div></div></div></a><a class="pagination-related" href="/90e06403855b/" title="MyBatis (SQL Mapper Framework) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-03.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-22</div><div class="info-item-2">MyBatis (SQL Mapper Framework) 详解</div></div><div class="info-2"><div class="info-item-1"> MyBatis 是一款优秀的持久层框架，它避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集的工作。MyBatis 使用简单的 XML 或注解来配置和映射原始类型、Map 和 POJO 到数据库中的记录。它是一个 SQL Mapper 框架，强调 SQL 的灵活性和控制性，允许开发者完全掌控 SQL 语句，而不需要像全功能 ORM 框架（如 Hibernate）那样进行过度的抽象。  核心思想：MyBatis 提供了一个介于应用程序和数据库之间的桥梁，将 SQL 语句和应用程序代码解耦，并通过 XML 或注解定义 SQL 映射关系，实现数据对象的灵活持久化。它允许开发者编写高性能、可优化的定制化 SQL。    一、为什么需要 MyBatis？在 Java Web 开发中，持久层是处理数据存储和检索的关键部分。传统的 JDBC (Java Database Connectivity) 直接操作数据库，虽然提供了最大的灵活性，但存在以下痛点：  代码冗余和复杂：需要手动编写大量的模板代码来建立连接、创建 Statement、设置参数、处理 ResultSet、关闭资源等...</div></div></div></a><a class="pagination-related" href="/94cd78552baf/" title="MyBatis-Plus (MP) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-11.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-24</div><div class="info-item-2">MyBatis-Plus (MP) 详解</div></div><div class="info-2"><div class="info-item-1"> MyBatis-Plus (MP) 是一个基于 MyBatis 的增强工具，它在 MyBatis 的基础上提供了许多便捷的功能，旨在简化开发、提高效率。MP 提供了无侵入式的特性，即它仅在 MyBatis 的基础上进行增强，不改变 MyBatis 原有的逻辑和配置，可以与 MyBatis 完全兼容。它的核心目标是少写代码，甚至不用写 SQL，即可完成大部分常见的 CRUD (创建、读取、更新、删除) 操作。  核心思想：MyBatis-Plus 通过提供通用的 CRUD 接口、强大的条件构造器、代码生成器以及一系列自动化功能，极大地减少了开发者在持久层的工作量，使得 MyBatis 更加易用，开发效率更高，同时保留了 MyBatis 对 SQL 的高度控制能力。    一、为什么需要 MyBatis-Plus？尽管 MyBatis 已经是一个非常优秀的持久层框架，解决了传统 JDBC 的许多痛点，但在实际开发中，仍然存在一些重复性劳动：  大量重复的 CRUD SQL：对于每个实体类，都需要编写大量的 insert, selectById, updateById, delete...</div></div></div></a><a class="pagination-related" href="/be930ce35928/" title="Java 常用设计模式详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-21.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-30</div><div class="info-item-2">Java 常用设计模式详解</div></div><div class="info-2"><div class="info-item-1"> 设计模式 (Design Patterns) 是在软件工程中，针对特定问题场景提出的一套经过验证的、可复用的解决方案。它们是从实践中总结出来的，是软件开发过程中的最佳实践。学习和应用设计模式，可以帮助开发者构建出结构清晰、可维护、可扩展、复用性强的软件系统，同时也能促进团队成员之间的沟通。  核心思想：设计模式的目标是提升软件的灵活性 (Flexibility)、可重用性 (Reusability) 和可扩展性 (Extensibility)，同时降低维护成本 (Maintainability)。它们不是代码，而是解决特定问题的思想和方法。   一、设计模式的分类根据 GoF (Gang of Four，《设计模式：可复用面向对象软件的基础》的四位作者) 的经典分类，设计模式主要分为三类：  创建型模式 (Creational Patterns)： 关注对象的创建机制，目标是解耦对象的创建与使用，从而提供更大的灵活性。 包括：单例 (Singleton)、工厂方法 (Factory Method)、抽象工厂 (Abstract Factory)、建造者 (Builder)、原型...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">426</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">219</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">80</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-JDBC%EF%BC%9F"><span class="toc-text">一、为什么需要 JDBC？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81JDBC-%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%8E%A5%E5%8F%A3"><span class="toc-text">二、JDBC 核心组件与接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81JDBC-%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%AD%A5%E9%AA%A4-JDBC-%E7%BC%96%E7%A8%8B%E5%85%AD%E6%AD%A5%E8%B5%B0"><span class="toc-text">三、JDBC 连接数据库的步骤 (JDBC 编程六步走)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81JDBC-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-text">四、JDBC 事务管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81Statement-PreparedStatement-%E5%92%8C-CallableStatement-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">五、Statement, PreparedStatement 和 CallableStatement 的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81JDBC-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">六、JDBC 最佳实践</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">七、总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/03cebd3cc28a/" title="行为驱动开发 (BDD) 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-27.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="行为驱动开发 (BDD) 详解"/></a><div class="content"><a class="title" href="/03cebd3cc28a/" title="行为驱动开发 (BDD) 详解">行为驱动开发 (BDD) 详解</a><time datetime="2025-12-21T22:24:00.000Z" title="发表于 2025-12-22 06:24:00">2025-12-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/7bb082434be0/" title="测试驱动开发 (TDD) 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-16.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="测试驱动开发 (TDD) 详解"/></a><div class="content"><a class="title" href="/7bb082434be0/" title="测试驱动开发 (TDD) 详解">测试驱动开发 (TDD) 详解</a><time datetime="2025-12-19T22:24:00.000Z" title="发表于 2025-12-20 06:24:00">2025-12-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/24ffc0bedb41/" title="IPFS (InterPlanetary File System) 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-01.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IPFS (InterPlanetary File System) 详解"/></a><div class="content"><a class="title" href="/24ffc0bedb41/" title="IPFS (InterPlanetary File System) 详解">IPFS (InterPlanetary File System) 详解</a><time datetime="2025-12-16T22:24:00.000Z" title="发表于 2025-12-17 06:24:00">2025-12-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/bfcc84247c6a/" title="智能体 (Agent) 详解：深入 LangChain 开发实践"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="智能体 (Agent) 详解：深入 LangChain 开发实践"/></a><div class="content"><a class="title" href="/bfcc84247c6a/" title="智能体 (Agent) 详解：深入 LangChain 开发实践">智能体 (Agent) 详解：深入 LangChain 开发实践</a><time datetime="2025-12-10T22:24:00.000Z" title="发表于 2025-12-11 06:24:00">2025-12-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/28f993be5cfe/" title="Bun.js 深度解析：冷启动与边缘函数优化"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-22.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Bun.js 深度解析：冷启动与边缘函数优化"/></a><div class="content"><a class="title" href="/28f993be5cfe/" title="Bun.js 深度解析：冷启动与边缘函数优化">Bun.js 深度解析：冷启动与边缘函数优化</a><time datetime="2025-12-07T22:24:00.000Z" title="发表于 2025-12-08 06:24:00">2025-12-08</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-07.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/archives/2023/" target="_blank" title="📌 2023">📌 2023</a><a href="/archives/2024/" target="_blank" title="❓ 2024">❓ 2024</a><a href="/archives/2025/" target="_blank" title="🚀 2025">🚀 2025</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="分类">分类</a><a href="/tags/" target="_blank" title="标签">标签</a><a href="/categories/" target="_blank" title="时间线">时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="说说">说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2025 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="ture"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      true
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.3"></script></div></div></body></html>