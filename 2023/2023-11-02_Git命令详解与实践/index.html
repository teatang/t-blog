<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Git命令详解与实践 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Git 是一款免费、开源的分布式版本控制系统，旨在快速、高效地处理从小规模到超大规模的所有项目。它由 Linux 内核的创建者 Linus Torvalds 于 2005 年创建。Git 的核心理念是跟踪内容而非文件，并支持非线性开发（即多人并行开发，合并不同的工作流）。  本文将深入介绍 Git 的核心概念、常用命令、工作流程、分支管理策略以及一些最佳实践。 “Git is a free an">
<meta property="og:type" content="article">
<meta property="og:title" content="Git命令详解与实践">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/2023/2023-11-02_Git%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E8%B7%B5/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="Git 是一款免费、开源的分布式版本控制系统，旨在快速、高效地处理从小规模到超大规模的所有项目。它由 Linux 内核的创建者 Linus Torvalds 于 2005 年创建。Git 的核心理念是跟踪内容而非文件，并支持非线性开发（即多人并行开发，合并不同的工作流）。  本文将深入介绍 Git 的核心概念、常用命令、工作流程、分支管理策略以及一些最佳实践。 “Git is a free an">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-06.jpg">
<meta property="article:published_time" content="2023-11-01T22:24:00.000Z">
<meta property="article:modified_time" content="2025-10-14T02:05:09.154Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="2023">
<meta property="article:tag" content="开发工具">
<meta property="article:tag" content="Git">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-06.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Git命令详解与实践",
  "url": "https://blog.tbf1211.xx.kg/2023/2023-11-02_Git%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E8%B7%B5/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-06.jpg",
  "datePublished": "2023-11-01T22:24:00.000Z",
  "dateModified": "2025-10-14T02:05:09.154Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/2023/2023-11-02_Git%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E8%B7%B5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Git命令详解与实践',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">123</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">132</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">52</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tags/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/tags/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/tags/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-06.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">Git命令详解与实践</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tags/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/tags/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/tags/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Git命令详解与实践</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2023-11-01T22:24:00.000Z" title="发表于 2023-11-02 06:24:00">2023-11-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git/">Git</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>14分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="umamiPV" data-path="/2023/2023-11-02_Git%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E8%B7%B5/"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p>Git 是一款免费、开源的分布式版本控制系统，旨在快速、高效地处理从小规模到超大规模的所有项目。它由 Linux 内核的创建者 Linus Torvalds 于 2005 年创建。Git 的核心理念是<strong>跟踪内容而非文件</strong>，并支持<strong>非线性开发</strong>（即多人并行开发，合并不同的工作流）。</p>
</blockquote>
<p>本文将深入介绍 Git 的核心概念、常用命令、工作流程、分支管理策略以及一些最佳实践。</p>
<div class="note info flat"><p>“Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.” —— Git 官方 Slogan</p>
</div>

<h2 id="一、Git-核心概念"><a href="#一、Git-核心概念" class="headerlink" title="一、Git 核心概念"></a>一、Git 核心概念</h2><p>在使用 Git 命令之前，理解其核心概念至关重要。</p>
<h3 id="1-工作区-Working-Directory"><a href="#1-工作区-Working-Directory" class="headerlink" title="1. 工作区 (Working Directory)"></a>1. 工作区 (Working Directory)</h3><ul>
<li>你电脑上当前可见的目录，包含你项目的所有文件。</li>
<li>你正在进行修改和编辑的地方。</li>
</ul>
<h3 id="2-暂存区-Staging-Area-Index"><a href="#2-暂存区-Staging-Area-Index" class="headerlink" title="2. 暂存区 (Staging Area &#x2F; Index)"></a>2. 暂存区 (Staging Area &#x2F; Index)</h3><ul>
<li>一个文件，通常位于 <code>.git/index</code>，记录了你下次提交 (commit) 将要包含的所有文件修改。</li>
<li>它是工作区和版本库之间的桥梁，用于选择性地添加修改。</li>
</ul>
<h3 id="3-本地仓库-Local-Repository"><a href="#3-本地仓库-Local-Repository" class="headerlink" title="3. 本地仓库 (Local Repository)"></a>3. 本地仓库 (Local Repository)</h3><ul>
<li>你项目 <code>.git</code> 目录下的所有内容，包含了项目的所有版本历史记录。</li>
<li>所有的提交 (commit) 都存储在这里。</li>
</ul>
<h3 id="4-远程仓库-Remote-Repository"><a href="#4-远程仓库-Remote-Repository" class="headerlink" title="4. 远程仓库 (Remote Repository)"></a>4. 远程仓库 (Remote Repository)</h3><ul>
<li>托管在网络上的仓库，如 GitHub、GitLab、Bitbucket 等。</li>
<li>允许团队成员进行协作，共享代码。</li>
</ul>
<p>理解这三区一库 (工作区、暂存区、本地仓库、远程仓库) 的概念，是掌握 Git 的关键。</p>
<p><img src="/img/loading.gif" data-lazy-src="/img/post/2023/11/20231102-01.png" alt="Git工作区、暂存区、本地仓库"><br><em>示意图：Git 工作区、暂存区、本地仓库</em></p>
<h3 id="5-HEAD"><a href="#5-HEAD" class="headerlink" title="5. HEAD"></a>5. HEAD</h3><ul>
<li>一个指向当前所在分支的指针。</li>
<li>在分支上，它指向最新的一次提交 (commit)。</li>
<li><code>HEAD</code> 总是指向当前提交的快照 (snapshot)。</li>
</ul>
<h2 id="二、Git-基础配置"><a href="#二、Git-基础配置" class="headerlink" title="二、Git 基础配置"></a>二、Git 基础配置</h2><p>首次使用 Git 或在新机器上使用时，需要进行一些基本配置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置用户名（重要，会记录到每次提交中）</span></span><br><span class="line">git config --global user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置用户邮箱（重要，会记录到每次提交中）</span></span><br><span class="line">git config --global user.email <span class="string">&quot;your.email@example.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置默认的分支名称（Git 2.28+ 或更高版本，默认是 main）</span></span><br><span class="line">git config --global init.defaultBranch main</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有配置</span></span><br><span class="line">git config --list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看某个配置项的值</span></span><br><span class="line">git config user.name</span><br></pre></td></tr></table></figure>

<h2 id="三、Git-初始化与克隆"><a href="#三、Git-初始化与克隆" class="headerlink" title="三、Git 初始化与克隆"></a>三、Git 初始化与克隆</h2><h3 id="1-初始化本地仓库-git-init"><a href="#1-初始化本地仓库-git-init" class="headerlink" title="1. 初始化本地仓库 (git init)"></a>1. 初始化本地仓库 (<code>git init</code>)</h3><p>在一个已存在的项目目录中初始化一个新的 Git 仓库。这会在当前目录下创建一个 <code>.git</code> 隐藏文件夹。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> my-new-project</span><br><span class="line"><span class="built_in">cd</span> my-new-project</span><br><span class="line">git init</span><br></pre></td></tr></table></figure>

<h3 id="2-克隆远程仓库-git-clone"><a href="#2-克隆远程仓库-git-clone" class="headerlink" title="2. 克隆远程仓库 (git clone)"></a>2. 克隆远程仓库 (<code>git clone</code>)</h3><p>从远程仓库下载一个项目到本地，并自动将其配置为本地仓库的远程源。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;remote-repository-url&gt; [local-directory-name]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/octocat/Spoon-Knife.git</span><br><span class="line"><span class="comment"># 或者克隆到一个指定名称的目录</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/octocat/Spoon-Knife.git my-spoon-knife</span><br></pre></td></tr></table></figure>

<h2 id="四、Git-文件管理"><a href="#四、Git-文件管理" class="headerlink" title="四、Git 文件管理"></a>四、Git 文件管理</h2><h3 id="1-查看文件状态-git-status"><a href="#1-查看文件状态-git-status" class="headerlink" title="1. 查看文件状态 (git status)"></a>1. 查看文件状态 (<code>git status</code>)</h3><p>查看工作区和暂存区文件的状态，哪些被修改了，哪些在暂存区等待提交。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 简短输出，更适合快速查看</span></span><br><span class="line">git status -s</span><br></pre></td></tr></table></figure>

<h3 id="2-添加文件到暂存区-git-add"><a href="#2-添加文件到暂存区-git-add" class="headerlink" title="2. 添加文件到暂存区 (git add)"></a>2. 添加文件到暂存区 (<code>git add</code>)</h3><p>将工作区中文件的修改或新增的文件添加到暂存区。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加指定文件</span></span><br><span class="line">git add &lt;file1&gt; &lt;file2&gt; ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加当前目录下所有修改和新增的文件（不包括删除的文件）</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加所有修改、新增和删除的文件（包括删除的，慎用）</span></span><br><span class="line">git add -A</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加所有修改和新增的文件，包括被删除的（比较常用）</span></span><br><span class="line">git add -u</span><br></pre></td></tr></table></figure>

<h3 id="3-撤销暂存-git-reset"><a href="#3-撤销暂存-git-reset" class="headerlink" title="3. 撤销暂存 (git reset)"></a>3. 撤销暂存 (<code>git reset</code>)</h3><p>将暂存区的文件移回工作区（取消暂存）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将指定文件从暂存区中移除，但保留工作区修改</span></span><br><span class="line">git reset HEAD &lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将所有文件从暂存区中移除，但保留工作区修改</span></span><br><span class="line">git reset HEAD .</span><br></pre></td></tr></table></figure>

<h3 id="4-撤销工作区的修改-git-checkout-git-restore"><a href="#4-撤销工作区的修改-git-checkout-git-restore" class="headerlink" title="4. 撤销工作区的修改 (git checkout &#x2F; git restore)"></a>4. 撤销工作区的修改 (<code>git checkout</code> &#x2F; <code>git restore</code>)</h3><p>丢弃工作区中文件的修改，恢复到上一次提交或暂存时的状态。</p>
<ul>
<li><strong><code>git checkout -- &lt;file&gt;</code></strong>: 传统方式，自 Git 2.23 起被 <code>git restore</code> 替代。</li>
<li><strong><code>git restore &lt;file&gt;</code></strong>: 推荐方式（Git 2.23+），操作更清晰。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 丢弃指定文件在工作区的修改</span></span><br><span class="line">git restore &lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 丢弃所有文件在工作区的修改（慎用，会丢失未提交的修改）</span></span><br><span class="line">git restore .</span><br></pre></td></tr></table></figure>

<h3 id="5-重命名或移动文件-git-mv"><a href="#5-重命名或移动文件-git-mv" class="headerlink" title="5. 重命名或移动文件 (git mv)"></a>5. 重命名或移动文件 (<code>git mv</code>)</h3><p>在 Git 中重命名或移动文件，并自动将这些更改暂存。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">mv</span> &lt;old_path&gt; &lt;new_path&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：将 test.txt 重命名为 new_test.txt</span></span><br><span class="line">git <span class="built_in">mv</span> test.txt new_test.txt</span><br></pre></td></tr></table></figure>

<h3 id="6-删除文件-git-rm"><a href="#6-删除文件-git-rm" class="headerlink" title="6. 删除文件 (git rm)"></a>6. 删除文件 (<code>git rm</code>)</h3><p>将文件从工作区和暂存区中删除，并标记为待提交的删除操作。<br>如果只想从 Git 追踪中移除文件，但保留在工作区（例如某些临时文件），可以使用 <code>--cached</code> 选项。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从工作区和暂存区删除文件</span></span><br><span class="line">git <span class="built_in">rm</span> &lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只从暂存区删除文件，保留工作区文件，不再被 Git 追踪</span></span><br><span class="line">git <span class="built_in">rm</span> --cached &lt;file&gt;</span><br></pre></td></tr></table></figure>

<h2 id="五、Git-提交与历史"><a href="#五、Git-提交与历史" class="headerlink" title="五、Git 提交与历史"></a>五、Git 提交与历史</h2><h3 id="1-提交修改-git-commit"><a href="#1-提交修改-git-commit" class="headerlink" title="1. 提交修改 (git commit)"></a>1. 提交修改 (<code>git commit</code>)</h3><p>将暂存区中的所有修改作为一个新的版本提交到本地仓库，并生成一个提交信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用默认编辑器输入提交信息</span></span><br><span class="line">git commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在命令行中直接输入提交信息</span></span><br><span class="line">git commit -m <span class="string">&quot;Your commit message here&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 跳过暂存区，直接提交工作区中所有已追踪的修改（慎用，不推荐常规使用）</span></span><br><span class="line"><span class="comment"># 等同于 git add -u &amp;&amp; git commit -m &quot;...&quot;</span></span><br><span class="line">git commit -am <span class="string">&quot;Your commit message here&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改上一次提交（可用于修改提交信息或添加遗漏的文件）</span></span><br><span class="line"><span class="comment"># 会打开编辑器让你修改提交信息，保存退出即可。如果想添加文件，先 git add，再 git commit --amend</span></span><br><span class="line">git commit --amend</span><br></pre></td></tr></table></figure>

<h3 id="2-查看提交历史-git-log"><a href="#2-查看提交历史-git-log" class="headerlink" title="2. 查看提交历史 (git log)"></a>2. 查看提交历史 (<code>git log</code>)</h3><p>查看本地仓库的提交历史记录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有提交历史</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看简短的提交历史</span></span><br><span class="line">git <span class="built_in">log</span> --oneline</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以图谱形式查看提交历史（带分支信息，非常有用）</span></span><br><span class="line">git <span class="built_in">log</span> --graph --oneline --decorate</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定文件的提交历史</span></span><br><span class="line">git <span class="built_in">log</span> &lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看某个提交的具体修改内容</span></span><br><span class="line">git show &lt;commit_id&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-比较差异-git-diff"><a href="#3-比较差异-git-diff" class="headerlink" title="3. 比较差异 (git diff)"></a>3. 比较差异 (<code>git diff</code>)</h3><p>查看文件之间的差异。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 比较工作区和暂存区之间的差异</span></span><br><span class="line">git diff</span><br><span class="line"></span><br><span class="line"><span class="comment"># 比较暂存区和最新提交之间的差异</span></span><br><span class="line">git diff --cached</span><br><span class="line"></span><br><span class="line"><span class="comment"># 比较工作区和最新提交之间的差异</span></span><br><span class="line">git diff HEAD</span><br><span class="line"></span><br><span class="line"><span class="comment"># 比较两个提交之间的差异</span></span><br><span class="line">git diff &lt;commit_id1&gt; &lt;commit_id2&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 比较某个文件在工作区与暂存区的差异</span></span><br><span class="line">git diff &lt;file&gt;</span><br></pre></td></tr></table></figure>

<h2 id="六、Git-分支管理"><a href="#六、Git-分支管理" class="headerlink" title="六、Git 分支管理"></a>六、Git 分支管理</h2><p>分支是 Git 的核心功能之一，允许在不影响主线开发的情况下进行并行开发。</p>
<h3 id="1-查看分支-git-branch"><a href="#1-查看分支-git-branch" class="headerlink" title="1. 查看分支 (git branch)"></a>1. 查看分支 (<code>git branch</code>)</h3><p>查看本地分支列表。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出所有本地分支，当前分支前有 *</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出所有本地和远程分支</span></span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出所有远程分支</span></span><br><span class="line">git branch -r</span><br></pre></td></tr></table></figure>

<h3 id="2-创建分支-git-branch"><a href="#2-创建分支-git-branch" class="headerlink" title="2. 创建分支 (git branch)"></a>2. 创建分支 (<code>git branch</code>)</h3><p>创建一个新的分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git branch &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：创建一个名为 feature-x 的分支</span></span><br><span class="line">git branch feature-x</span><br></pre></td></tr></table></figure>

<h3 id="3-切换分支-git-checkout-git-switch"><a href="#3-切换分支-git-checkout-git-switch" class="headerlink" title="3. 切换分支 (git checkout &#x2F; git switch)"></a>3. 切换分支 (<code>git checkout</code> &#x2F; <code>git switch</code>)</h3><p>切换到指定分支。</p>
<ul>
<li><strong><code>git checkout &lt;branch-name&gt;</code></strong>: 传统方式。</li>
<li><strong><code>git switch &lt;branch-name&gt;</code></strong>: Git 2.23+ 推荐，将切换操作与恢复操作 (<code>git restore</code>) 分离，使命令更清晰。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到 feature-x 分支</span></span><br><span class="line">git switch feature-x</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到上一个分支</span></span><br><span class="line">git switch -</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建并切换到新分支</span></span><br><span class="line">git switch -c &lt;new-branch-name&gt;</span><br><span class="line"><span class="comment"># 等同于 git branch &lt;new-branch-name&gt; &amp;&amp; git switch &lt;new-branch-name&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-合并分支-git-merge"><a href="#4-合并分支-git-merge" class="headerlink" title="4. 合并分支 (git merge)"></a>4. 合并分支 (<code>git merge</code>)</h3><p>将指定分支的修改合并到当前分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设当前在 main 分支，要合并 feature-x</span></span><br><span class="line">git switch main</span><br><span class="line">git merge feature-x</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并时强制执行 fast-forward（快速前进）模式（如果可能）</span></span><br><span class="line">git merge --ff-only &lt;branch&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并时创建一个新的合并提交，即使可以 fast-forward（默认行为，推荐）</span></span><br><span class="line">git merge --no-ff &lt;branch&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 终止正在进行的合并（例如发生冲突时）</span></span><br><span class="line">git merge --abort</span><br></pre></td></tr></table></figure>

<h3 id="5-删除分支-git-branch-d-git-branch-D"><a href="#5-删除分支-git-branch-d-git-branch-D" class="headerlink" title="5. 删除分支 (git branch -d &#x2F; git branch -D)"></a>5. 删除分支 (<code>git branch -d</code> &#x2F; <code>git branch -D</code>)</h3><p>删除一个本地分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安全删除分支（只删除已合并的分支）</span></span><br><span class="line">git branch -d &lt;branch-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制删除分支（即使未合并也会删除，慎用！）</span></span><br><span class="line">git branch -D &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-变基-git-rebase"><a href="#6-变基-git-rebase" class="headerlink" title="6. 变基 (git rebase)"></a>6. 变基 (<code>git rebase</code>)</h3><p>将一系列提交“移”到另一个基底提交之上。它可以使提交历史变得更线性、更整洁。</p>
<ul>
<li><strong>优点</strong>: 产生线性的、整洁的提交历史，易于代码审查和追溯。</li>
<li><strong>缺点</strong>: 如果 rebase 了一个已经推送到远程的公共分支，会导致历史混乱，<strong>绝对禁止对公共分支进行 rebase</strong>。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设当前在 feature-x 分支，想将它 rebase 到 main</span></span><br><span class="line">git switch feature-x</span><br><span class="line">git rebase main</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交互式 rebase (用于修改、合并、删除提交等)</span></span><br><span class="line">git rebase -i &lt;commit_id&gt; <span class="comment"># 从指定提交到当前 HEAD 之间的提交进行操作</span></span><br><span class="line">git rebase -i HEAD~3      <span class="comment"># 操作最近的3个提交</span></span><br></pre></td></tr></table></figure>

<h2 id="七、Git-远程仓库操作"><a href="#七、Git-远程仓库操作" class="headerlink" title="七、Git 远程仓库操作"></a>七、Git 远程仓库操作</h2><h3 id="1-查看远程仓库-git-remote"><a href="#1-查看远程仓库-git-remote" class="headerlink" title="1. 查看远程仓库 (git remote)"></a>1. 查看远程仓库 (<code>git remote</code>)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出所有远程仓库</span></span><br><span class="line">git remote</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出所有远程仓库及其 URL</span></span><br><span class="line">git remote -v</span><br></pre></td></tr></table></figure>

<h3 id="2-添加远程仓库-git-remote-add"><a href="#2-添加远程仓库-git-remote-add" class="headerlink" title="2. 添加远程仓库 (git remote add)"></a>2. 添加远程仓库 (<code>git remote add</code>)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git remote add &lt;name&gt; &lt;url&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：添加一个名为 origin 的远程仓库</span></span><br><span class="line">git remote add origin https://github.com/your/repo.git</span><br></pre></td></tr></table></figure>

<h3 id="3-从远程拉取-git-pull"><a href="#3-从远程拉取-git-pull" class="headerlink" title="3. 从远程拉取 (git pull)"></a>3. 从远程拉取 (<code>git pull</code>)</h3><p>从远程仓库获取最新修改并合并到当前本地分支。</p>
<ul>
<li><strong><code>git fetch</code> + <code>git merge</code></strong>: <code>git pull</code> 的底层操作。</li>
<li><strong><code>git fetch</code></strong>: 只从远程获取修改，不合并。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从 origin 远程仓库的 master 分支拉取并合并到当前本地分支</span></span><br><span class="line">git pull origin master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有远程分支的最新状态，但不合并</span></span><br><span class="line">git fetch origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有远程仓库的所有分支的最新状态</span></span><br><span class="line">git fetch --all</span><br></pre></td></tr></table></figure>

<h3 id="4-推送到远程-git-push"><a href="#4-推送到远程-git-push" class="headerlink" title="4. 推送到远程 (git push)"></a>4. 推送到远程 (<code>git push</code>)</h3><p>将本地仓库的提交推送到远程仓库。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将当前分支的修改推送到 origin 远程仓库的当前同名分支</span></span><br><span class="line">git push origin &lt;branch-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：将本地 main 分支推送到 origin 的 main 分支</span></span><br><span class="line">git push origin main</span><br><span class="line"></span><br><span class="line"><span class="comment"># 首次推送时，设置上游分支（以后 git push 即可）</span></span><br><span class="line">git push -u origin main</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制推送（慎用！会覆盖远程仓库的历史）</span></span><br><span class="line">git push -f origin &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-同步远程仓库-git-remote-update"><a href="#5-同步远程仓库-git-remote-update" class="headerlink" title="5. 同步远程仓库 (git remote update)"></a>5. 同步远程仓库 (<code>git remote update</code>)</h3><p>更新所有远程分支的引用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote update</span><br></pre></td></tr></table></figure>

<h2 id="八、Git-撤销操作"><a href="#八、Git-撤销操作" class="headerlink" title="八、Git 撤销操作"></a>八、Git 撤销操作</h2><p>Git 提供了多种撤销方式，但需谨慎使用。</p>
<h3 id="1-撤销工作区修改-git-restore"><a href="#1-撤销工作区修改-git-restore" class="headerlink" title="1. 撤销工作区修改 (git restore)"></a>1. 撤销工作区修改 (<code>git restore</code>)</h3><p>前面已提过，用于丢弃工作区中文件的修改。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git restore &lt;file&gt;</span><br><span class="line">git restore . <span class="comment"># 丢弃所有修改</span></span><br></pre></td></tr></table></figure>

<h3 id="2-撤销暂存区修改-git-reset-HEAD"><a href="#2-撤销暂存区修改-git-reset-HEAD" class="headerlink" title="2. 撤销暂存区修改 (git reset HEAD)"></a>2. 撤销暂存区修改 (<code>git reset HEAD</code>)</h3><p>前面已提过，用于将暂存区文件移回工作区。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD &lt;file&gt;</span><br><span class="line">git reset HEAD . <span class="comment"># 撤销所有暂存</span></span><br></pre></td></tr></table></figure>

<h3 id="3-撤销提交-git-reset"><a href="#3-撤销提交-git-reset" class="headerlink" title="3. 撤销提交 (git reset)"></a>3. 撤销提交 (<code>git reset</code>)</h3><ul>
<li><strong><code>git reset --soft &lt;commit_id&gt;</code></strong>:<ul>
<li>将 <code>HEAD</code> 移到 <code>&lt;commit_id&gt;</code>。</li>
<li>保留工作区和暂存区的修改。</li>
<li>你可以重新提交这些修改。</li>
</ul>
</li>
<li><strong><code>git reset --mixed &lt;commit_id&gt;</code> (默认模式)</strong>:<ul>
<li>将 <code>HEAD</code> 移到 <code>&lt;commit_id&gt;</code>。</li>
<li>保留工作区修改。</li>
<li><strong>清空暂存区</strong>。</li>
<li>你需要重新 <code>git add</code> 并 <code>git commit</code>。</li>
</ul>
</li>
<li><strong><code>git reset --hard &lt;commit_id&gt;</code></strong>:<ul>
<li><strong>危险操作！</strong> 将 <code>HEAD</code> 移到 <code>&lt;commit_id&gt;</code>。</li>
<li><strong>丢弃工作区和暂存区的所有修改</strong>，强制回到指定提交的状态。</li>
<li><strong>会丢失未保存的工作，请谨慎使用！</strong></li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 撤销到上一次提交，保留工作区和暂存区</span></span><br><span class="line">git reset --soft HEAD~1 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 撤销到上一次提交，保留工作区，清空暂存区</span></span><br><span class="line">git reset HEAD~1 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 撤销到上一次提交，并丢弃所有修改（危险！）</span></span><br><span class="line">git reset --hard HEAD~1 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 撤销到指定提交 ID，并丢弃所有修改</span></span><br><span class="line">git reset --hard &lt;commit_id&gt; </span><br></pre></td></tr></table></figure>

<h3 id="4-反转提交-git-revert"><a href="#4-反转提交-git-revert" class="headerlink" title="4. 反转提交 (git revert)"></a>4. 反转提交 (<code>git revert</code>)</h3><ul>
<li><strong><code>git revert &lt;commit_id&gt;</code></strong>:<ul>
<li>用于<strong>撤销一个已存在的提交</strong>。</li>
<li>它会创建一个<strong>新的提交</strong>，这个新提交的内容是指定提交的<strong>逆向修改</strong>。</li>
<li>优点是<strong>不会改写历史</strong>，非常适合在公共分支上撤销提交。</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 反转指定提交，会创建一个新的反转提交</span></span><br><span class="line">git revert &lt;commit_id&gt; </span><br></pre></td></tr></table></figure>

<h3 id="5-找回丢失的提交-git-reflog"><a href="#5-找回丢失的提交-git-reflog" class="headerlink" title="5. 找回丢失的提交 (git reflog)"></a>5. 找回丢失的提交 (<code>git reflog</code>)</h3><p>如果在使用 <code>git reset --hard</code> 或其他操作时不小心丢弃了提交，<code>git reflog</code> 可以帮助你找回。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br><span class="line"><span class="comment"># 查看 reflog 输出，找到你需要的 commit_id</span></span><br><span class="line"><span class="comment"># 然后使用 git reset --hard &lt;commit_id&gt; 恢复</span></span><br></pre></td></tr></table></figure>

<h2 id="九、Git-标签-Tags"><a href="#九、Git-标签-Tags" class="headerlink" title="九、Git 标签 (Tags)"></a>九、Git 标签 (Tags)</h2><p>标签用于标记仓库历史中的重要里程碑，例如发布版本。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出所有标签</span></span><br><span class="line">git tag</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建轻量标签（不含提交者信息，更像是一个分支指针）</span></span><br><span class="line">git tag &lt;tag-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建附注标签（推荐，包含提交者、日期、信息等，对象在 Git 数据库中）</span></span><br><span class="line">git tag -a &lt;tag-name&gt; -m <span class="string">&quot;Tag message&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 给特定提交创建标签</span></span><br><span class="line">git tag -a &lt;tag-name&gt; &lt;commit_id&gt; -m <span class="string">&quot;Tag message&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送标签到远程仓库（默认 git push 不推送标签）</span></span><br><span class="line">git push origin &lt;tag-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送所有标签到远程仓库</span></span><br><span class="line">git push origin --tags</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除本地标签</span></span><br><span class="line">git tag -d &lt;tag-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程标签</span></span><br><span class="line">git push origin --delete &lt;tag-name&gt;</span><br></pre></td></tr></table></figure>

<h2 id="十、Git-临时存贮-git-stash"><a href="#十、Git-临时存贮-git-stash" class="headerlink" title="十、Git 临时存贮 (git stash)"></a>十、Git 临时存贮 (<code>git stash</code>)</h2><p>当你在一个分支上工作时，突然需要切换到另一个分支处理紧急问题，但又不希望提交当前未完成的工作，<code>git stash</code> 就能派上用场。它会<strong>保存当前工作区和暂存区的修改</strong>，然后将工作区恢复到 <code>HEAD</code> 的状态。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存储当前修改（暂存区和工作区）</span></span><br><span class="line">git stash save <span class="string">&quot;Work in progress on feature X&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出所有存储的 stash</span></span><br><span class="line">git stash list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用最近的 stash（不会从列表中删除）</span></span><br><span class="line">git stash apply</span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用最近的 stash 并从列表中删除</span></span><br><span class="line">git stash pop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用指定的 stash</span></span><br><span class="line">git stash apply stash@&#123;1&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除最近的 stash</span></span><br><span class="line">git stash drop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除指定的 stash</span></span><br><span class="line">git stash drop stash@&#123;1&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除所有 stash</span></span><br><span class="line">git stash clear</span><br></pre></td></tr></table></figure>

<h2 id="十一、Git-最佳实践"><a href="#十一、Git-最佳实践" class="headerlink" title="十一、Git 最佳实践"></a>十一、Git 最佳实践</h2><ol>
<li><strong>提交粒度小而精</strong>: 每次提交只做一件事情，且提交信息清晰明了。</li>
<li><strong>提交信息规范</strong>: 遵循一定的提交信息规范，例如 <code>feat: 新增功能</code>, <code>fix: 修复 bug</code>, <code>docs: 更新文档</code> 等。</li>
<li><strong>频繁提交</strong>: 经常在本地进行提交，保持工作区干净。</li>
<li><strong>合理使用分支</strong>: 为每个功能、bug 修复或实验性任务创建独立的分支。</li>
<li><strong>主分支保持稳定</strong>: <code>main</code> (或 <code>master</code>) 等主分支应始终保持可发布状态。</li>
<li><strong>禁止对公共分支进行 <code>rebase</code></strong>: <code>rebase</code> 适用于在本地清理提交历史，但切勿在已推送到远程的公共分支上强制 <code>rebase</code>，这会造成历史混乱。</li>
<li><strong>经常 <code>pull</code> &#x2F; <code>fetch</code></strong>: 与团队成员协作时，保持本地仓库与远程仓库同步。</li>
<li><strong>代码审查 (Code Review)</strong>: 通过 Pull Request&#x2F;Merge Request 进行代码审查，确保代码质量。</li>
<li><strong>忽略不必要的文件</strong>: 使用 <code>.gitignore</code> 文件忽略编译产物、日志、依赖模块等不应提交的文件。</li>
<li><strong>学习 <code>git reflog</code></strong>: 它是你的后悔药，可以帮你找回“丢失”的提交。</li>
</ol>
<h2 id="十二、总结"><a href="#十二、总结" class="headerlink" title="十二、总结"></a>十二、总结</h2><p>Git 是现代软件开发不可或缺的工具。掌握了这些基础和进阶命令，你就能自信地管理项目代码，与团队高效协作。记住，实践是最好的学习方式，多加练习才能真正领会 Git 的强大之处。如果你有任何疑问，Git 官方文档和社区是获取帮助的最好资源。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/2023/2023-11-02_Git%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E8%B7%B5/">https://blog.tbf1211.xx.kg/2023/2023-11-02_Git%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E8%B7%B5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/2023/">2023</a><a class="post-meta__tags" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a><a class="post-meta__tags" href="/tags/Git/">Git</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-06.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2023/2023-11-09_WebGL%E8%AF%A6%E8%A7%A3%EF%BC%9A%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%843D%E5%9B%BE%E5%BD%A2%E9%AD%94%E6%B3%95/" title="WebGL详解：浏览器中的3D图形魔法"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-16.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">WebGL详解：浏览器中的3D图形魔法</div></div><div class="info-2"><div class="info-item-1"> WebGL (Web Graphics Library) 是一种 JavaScript API，用于在任何兼容的网页浏览器中渲染高性能的交互式 3D 和 2D 图形，而无需使用插件。它通过将 JavaScript 和 OpenGL ES 2.0 (或 3.0，对应 WebGL2) 的功能结合起来，直接在 HTML5 Canvas 元素中利用用户的 GPU 硬件加速进行渲染。  核心思想：WebGL 是一个基于 JavaScript 的浏览器 3D 图形 API，通过 HTML Canvas 元素将 OpenGL ES (2.0&#x2F;3.0) 硬件加速能力带到 Web 端，允许开发者直接与 GPU 交互，利用着色器程序渲染高性能、交互式的 3D 内容。   一、WebGL 简介1.1 什么是 WebGL？WebGL 是一种底层图形 API，它允许 Web 开发者在浏览器中直接访问和控制 GPU。简而言之，它是一个将 JavaScript 代码转换为 GPU 指令的桥梁。这意味着你可以用 JavaScript 编写程序来绘制复杂的 3D 模型、创建游戏、进行数据可视化等，而这...</div></div></div></a><a class="pagination-related" href="/2023/2023-10-23_Stylus%20CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%E8%AF%A6%E8%A7%A3/" title="Stylus CSS预处理器详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-10.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Stylus CSS预处理器详解</div></div><div class="info-2"><div class="info-item-1"> Stylus 是一个富有表现力、动态且功能强大的 CSS 预处理器。它由 TJ Holowaychuk（Pug 模板引擎的作者）创建，与 Less 和 Sass 齐名，是前端开发中提高 CSS 编写效率和可维护性的重要工具之一。Stylus 以其高度灵活和简洁的语法而著称，允许开发者以多种方式编写 CSS，包括类似原生 CSS 的语法、省略括号和冒号的缩进语法等。  核心思想：Stylus 通过灵活的语法（可省略分号、冒号、括号），提供变量、混合、函数、条件判断、循环等高级特性，使 CSS 编写更高效、模块化和可维护。   一、Stylus 简介1.1 什么是 CSS 预处理器？CSS 预处理器是一种编程语言，它允许你使用变量、函数、混合 (Mixins)、嵌套、继承等编程特性来编写 CSS。这些预处理器代码最终会被编译成浏览器能够理解的标准 CSS。它们解决了传统 CSS 编程性差、难以维护和复用的问题。 常见的 CSS 预处理器包括：Sass&#x2F;SCSS、Less 和 Stylus。 1.2 Stylus 的特点 极度灵活的语法： 可省略分号：一行一个属性时，可省略...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/2024-02-15_Git%20Merge%20vs.%20Rebase%20%E5%AF%B9%E6%AF%94%E8%AF%A6%E8%A7%A3/" title="Git Merge vs. Rebase 对比详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-02.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-15</div><div class="info-item-2">Git Merge vs. Rebase 对比详解</div></div><div class="info-2"><div class="info-item-1"> 在使用 Git 进行团队协作或分支管理时，git merge 和 git rebase 是两种最常用的将一个分支的修改整合到另一个分支的方法。它们都能达到相同的最终目标——将不同分支历史上的修改合并——但在实现方式、提交历史的呈现以及适用场景上有着显著的区别。理解这两者的不同是熟练掌握 Git 的关键。  核心对比：  Merge (合并)：保留所有分支的原始提交历史，通过产生一个新的合并提交来连接不同的历史。 Rebase (变基)：将一个分支上的所有提交“移动”到另一个分支的末端，从而形成一个线性的、没有合并提交的提交历史。    一、Git Merge (合并)1.1 工作原理git merge 将两个或多个分支的开发历史整合到一个新的提交中。它会找到两个分支最新的共同祖先，然后将这两个分支从共同祖先到各自最新的提交的所有修改整合到一个新的合并提交 (merge commit) 中。 1.2 提交历史 非线性历史：git merge 会保留所有分支的原始提交历史，包括每个分支上的每一次提交。当从一个特性分支合并回主分支时，会在主分支上创建一个新的合并提交，这个提交会有两个...</div></div></div></a><a class="pagination-related" href="/2025/2025-06-01_LazyGit%E4%BD%BF%E7%94%A8%E8%A7%A3%E6%9E%90%EF%BC%9A%E4%BD%A0%E7%9A%84Git%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%95%88%E7%8E%87%E7%A5%9E%E5%99%A8/" title="LazyGit使用解析：你的Git命令行效率神器"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-11.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-01</div><div class="info-item-2">LazyGit使用解析：你的Git命令行效率神器</div></div><div class="info-2"><div class="info-item-1"> 本文将带你深入了解 LazyGit，一个简单直观的终端 UI Git 客户端。如果你厌倦了反复输入 Git 命令，又觉得 GUI 客户端不够灵活，那么 LazyGit 可能会成为你的新宠。它将终端的强大与 GUI 的便捷完美结合，让你的 Git 工作流变得前所未有的高效和愉悦。  对于开发者而言，Git 无疑是日常工作中不可或缺的工具。然而，即使是最熟练的 Git 用户，也可能被一些重复、繁琐的命令行操作所困扰，例如 git add ., git status, git commit -m &quot;...&quot;, git log --oneline 等等。虽然有各种图形化 Git 客户端，但它们往往意味着脱离终端环境，或多或少牺牲了速度和灵活性。LazyGit 正是为了解决这一痛点而生的——它提供了一个文本用户界面 (TUI)，让你在终端中就能以图形化的方式快速、直观地执行 Git 操作，大幅提升工作效率。   一、为什么选择 LazyGit？LazyGit 并不是简单的 Git 命令别名集合，它提供了一个交互式的视图，将 git status, git branch...</div></div></div></a><a class="pagination-related" href="/2023/2023-01-26_%E4%BB%8E%E5%8D%95%E6%9C%BA%E5%88%B0%E5%93%A8%E5%85%B5%E4%B8%80%E5%BC%A0%E5%9B%BE%E7%90%86%E6%B8%85redis%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B/" title="从单机到哨兵，一张图理清redis架构演进！"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-01.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-26</div><div class="info-item-2">从单机到哨兵，一张图理清redis架构演进！</div></div><div class="info-2"><div class="info-item-1">Redis 的架构是逐步演进而来的，正所谓“罗马不是一天建成的”。   2010 年：单机版 Redis  当 Redis1.0在 2010 年首次发布时，整体架构非常简单，通常作为业务系统的缓存使用。不过，Redis 的数据是存储在内存中的，一旦重启，数据就会全部丢失，导致请求会直接打到数据库上，带来较大的压力。  2013 年：持久化机制上线  2013 年，Redis2.8版本发布，解决了之前“重启就丢数据”的问题。Redis 引入了 RDB（内存快照）机制，用于定时将内存中的数据持久化到磁盘。同时还支持 AOF（只追加文件）方式，将每一次写操作都记录到日志文件中，实现更高级别的持久化保障。  2013 年：主从复制机制  同样在 Redis2.8中，官方引入了主从复制功能，提升了系统的高可用性。主节点负责处理实时的读写请求，从节点则负责同步主节点的数据，起到备份和读扩展的作用。  2013 年：Sentinel 哨兵机制上线  在 Redis2.8版本中，引入了 Sentinel（哨兵）机制，用于实时监控 Redis 实例的运行状态。它主要负责以下几个方面的工作：   监...</div></div></div></a><a class="pagination-related" href="/2023/2023-01-27_MySQL%20%E7%B4%A2%E5%BC%95%E8%AF%A6%E8%A7%A3/" title="MySQL 索引详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-04.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-27</div><div class="info-item-2">MySQL 索引详解</div></div><div class="info-2"><div class="info-item-1"> 索引是数据库中用于提高查询速度的一种数据结构。在 MySQL 中，合理有效地使用索引能够显著提升数据库的查询性能，减少 I&#x2F;O 操作。然而，不恰当的索引也可能带来额外的开销。理解 MySQL 索引的原理和优化策略，是数据库性能调优的关键。  “好的索引，事半功倍；坏的索引，越帮越忙。” - 数据库优化格言   一、什么是索引？索引（Index）是一种特殊的查找表，数据库搜索引擎可以利用它来快速定位数据。可以将其类比为一本书的目录，通过目录我们可以快速找到感兴趣的章节，而不需要通读整本书。 在数据库中，没有索引的查询需要全表扫描，即逐行检查每条记录，直到找到符合条件的记录。当数据量非常大时，这种操作的效率会非常低下。索引通过创建指向数据物理位置的指针，使得数据库在查询时能够直接跳转到相关记录，从而大大加快查询速度。 二、索引的优缺点优点 显著提高数据检索速度：这是索引最核心、最主要的优点。 加快表与表之间的连接速度：对于 JOIN 操作，索引可以加速连接条件的匹配。 加快分组和排序操作：GROUP BY 和 ORDER BY 操作通常通过消除临时表和对文件进行排序来提高...</div></div></div></a><a class="pagination-related" href="/2023/2023-02-01_Docker%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E4%B8%8E%E7%AE%A1%E7%90%86%EF%BC%9A%E6%89%93%E9%80%A0%E6%A0%87%E5%87%86%E5%8C%96%E3%80%81%E5%8F%AF%E5%A4%8D%E7%94%A8%E7%9A%84%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F/" title="Docker镜像构建与管理：打造标准化、可复用的容器镜像"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-19.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-01</div><div class="info-item-2">Docker镜像构建与管理：打造标准化、可复用的容器镜像</div></div><div class="info-2"><div class="info-item-1"> 本文由 简悦 SimpRead 转码， 原文地址 mp.weixin.qq.com  Docker 镜像构建与管理：打造标准化、可复用的容器镜像开篇：你是否也在镜像管理上栽过跟头？凌晨 2 点，生产环境突然告警，新部署的容器启动失败。排查后发现：开发环境用的镜像 800MB，生产环境的却有 3.2GB，里面塞满了编译工具、测试数据，甚至还有开发同学的 SSH 私钥… 这种 “镜像肥胖症” 你遇到过吗？或者更糟糕的：  同一个服务，测试环境能跑，生产环境启动就报错 镜像仓库里堆满了 latest、v1、v1-final、v1-final-final 这种让人崩溃的标签 构建一次镜像要等 20 分钟，因为每次都要重新下载依赖包  今天这篇文章，我会基于 5 年运维实战经验，教你构建一套标准化的镜像管理体系：从多阶段构建优化到镜像安全扫描，从版本管理策略到自动化构建流程，让你的镜像体积缩小 70%、构建速度提升 5 倍，并且永远不会再出现 “这个镜像到底能不能用” 的灵魂拷问。 一、镜像构建的三大核心原则（90% 的人都忽略了）1. 最小化原则：镜像里只放 “必需品”很多人写 Doc...</div></div></div></a><a class="pagination-related" href="/2023/2023-02-05_Docker%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E8%AF%A6%E8%A7%A3%EF%BC%9A%E4%BB%8EDockerfile%E5%88%B0%E9%AB%98%E6%95%88%E5%AE%9E%E8%B7%B5/" title="Docker镜像构建详解：从Dockerfile到高效实践"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-08.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-05</div><div class="info-item-2">Docker镜像构建详解：从Dockerfile到高效实践</div></div><div class="info-2"><div class="info-item-1"> Docker 镜像是 Docker 的核心组成部分之一。它是一个轻量级、独立、可执行的软件包，包含运行应用程序所需的一切：代码、运行时、系统工具、系统库和设置。构建 Docker 镜像是实现应用程序容器化的关键步骤，通过 Dockerfile 文件，我们可以定义镜像的构建过程。  “Docker 镜像本质上是文件系统和配置的组合，它通过层（Layer）的概念实现了高效的存储和复用。理解 Dockerfile 的每一条指令以及如何优化构建过程，是成为 Docker 高手的必经之路。”   一、Docker 镜像构建概述 Dockerfile：一个文本文件，包含一系列指令，用于自动化地在 Docker 环境中构建镜像。 构建上下文 (Build Context)：在执行 docker build 命令时，你指定了一个路径（通常是当前目录）。这个路径下的所有文件和目录都会被发送到 Docker daemon，作为构建上下文。只有在构建上下文中包含的文件才能被 Dockerfile 中的指令（如 ADD, COPY）访问。 镜像层 (Image Layer)：Docker 镜像由一系列...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">123</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">132</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">52</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Git-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">一、Git 核心概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B7%A5%E4%BD%9C%E5%8C%BA-Working-Directory"><span class="toc-text">1. 工作区 (Working Directory)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9A%82%E5%AD%98%E5%8C%BA-Staging-Area-Index"><span class="toc-text">2. 暂存区 (Staging Area &#x2F; Index)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93-Local-Repository"><span class="toc-text">3. 本地仓库 (Local Repository)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93-Remote-Repository"><span class="toc-text">4. 远程仓库 (Remote Repository)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-HEAD"><span class="toc-text">5. HEAD</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Git-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-text">二、Git 基础配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Git-%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E5%85%8B%E9%9A%86"><span class="toc-text">三、Git 初始化与克隆</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93-git-init"><span class="toc-text">1. 初始化本地仓库 (git init)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%85%8B%E9%9A%86%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93-git-clone"><span class="toc-text">2. 克隆远程仓库 (git clone)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Git-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-text">四、Git 文件管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81-git-status"><span class="toc-text">1. 查看文件状态 (git status)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6%E5%88%B0%E6%9A%82%E5%AD%98%E5%8C%BA-git-add"><span class="toc-text">2. 添加文件到暂存区 (git add)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%92%A4%E9%94%80%E6%9A%82%E5%AD%98-git-reset"><span class="toc-text">3. 撤销暂存 (git reset)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%92%A4%E9%94%80%E5%B7%A5%E4%BD%9C%E5%8C%BA%E7%9A%84%E4%BF%AE%E6%94%B9-git-checkout-git-restore"><span class="toc-text">4. 撤销工作区的修改 (git checkout &#x2F; git restore)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%87%8D%E5%91%BD%E5%90%8D%E6%88%96%E7%A7%BB%E5%8A%A8%E6%96%87%E4%BB%B6-git-mv"><span class="toc-text">5. 重命名或移动文件 (git mv)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6-git-rm"><span class="toc-text">6. 删除文件 (git rm)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81Git-%E6%8F%90%E4%BA%A4%E4%B8%8E%E5%8E%86%E5%8F%B2"><span class="toc-text">五、Git 提交与历史</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%8F%90%E4%BA%A4%E4%BF%AE%E6%94%B9-git-commit"><span class="toc-text">1. 提交修改 (git commit)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9F%A5%E7%9C%8B%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2-git-log"><span class="toc-text">2. 查看提交历史 (git log)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%AF%94%E8%BE%83%E5%B7%AE%E5%BC%82-git-diff"><span class="toc-text">3. 比较差异 (git diff)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81Git-%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86"><span class="toc-text">六、Git 分支管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9F%A5%E7%9C%8B%E5%88%86%E6%94%AF-git-branch"><span class="toc-text">1. 查看分支 (git branch)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF-git-branch"><span class="toc-text">2. 创建分支 (git branch)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF-git-checkout-git-switch"><span class="toc-text">3. 切换分支 (git checkout &#x2F; git switch)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF-git-merge"><span class="toc-text">4. 合并分支 (git merge)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%A0%E9%99%A4%E5%88%86%E6%94%AF-git-branch-d-git-branch-D"><span class="toc-text">5. 删除分支 (git branch -d &#x2F; git branch -D)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%8F%98%E5%9F%BA-git-rebase"><span class="toc-text">6. 变基 (git rebase)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81Git-%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-text">七、Git 远程仓库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9F%A5%E7%9C%8B%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93-git-remote"><span class="toc-text">1. 查看远程仓库 (git remote)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B7%BB%E5%8A%A0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93-git-remote-add"><span class="toc-text">2. 添加远程仓库 (git remote add)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BB%8E%E8%BF%9C%E7%A8%8B%E6%8B%89%E5%8F%96-git-pull"><span class="toc-text">3. 从远程拉取 (git pull)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%8E%A8%E9%80%81%E5%88%B0%E8%BF%9C%E7%A8%8B-git-push"><span class="toc-text">4. 推送到远程 (git push)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%90%8C%E6%AD%A5%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93-git-remote-update"><span class="toc-text">5. 同步远程仓库 (git remote update)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81Git-%E6%92%A4%E9%94%80%E6%93%8D%E4%BD%9C"><span class="toc-text">八、Git 撤销操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%92%A4%E9%94%80%E5%B7%A5%E4%BD%9C%E5%8C%BA%E4%BF%AE%E6%94%B9-git-restore"><span class="toc-text">1. 撤销工作区修改 (git restore)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%92%A4%E9%94%80%E6%9A%82%E5%AD%98%E5%8C%BA%E4%BF%AE%E6%94%B9-git-reset-HEAD"><span class="toc-text">2. 撤销暂存区修改 (git reset HEAD)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%92%A4%E9%94%80%E6%8F%90%E4%BA%A4-git-reset"><span class="toc-text">3. 撤销提交 (git reset)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8F%8D%E8%BD%AC%E6%8F%90%E4%BA%A4-git-revert"><span class="toc-text">4. 反转提交 (git revert)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%89%BE%E5%9B%9E%E4%B8%A2%E5%A4%B1%E7%9A%84%E6%8F%90%E4%BA%A4-git-reflog"><span class="toc-text">5. 找回丢失的提交 (git reflog)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81Git-%E6%A0%87%E7%AD%BE-Tags"><span class="toc-text">九、Git 标签 (Tags)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81Git-%E4%B8%B4%E6%97%B6%E5%AD%98%E8%B4%AE-git-stash"><span class="toc-text">十、Git 临时存贮 (git stash)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81Git-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">十一、Git 最佳实践</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">十二、总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-10-06_TresJS%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%94%A8Vue%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9E%84%E5%BB%BAThree.js%E5%9C%BA%E6%99%AF/" title="TresJS详解：用Vue的方式构建Three.js场景"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-02.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TresJS详解：用Vue的方式构建Three.js场景"/></a><div class="content"><a class="title" href="/2025/2025-10-06_TresJS%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%94%A8Vue%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9E%84%E5%BB%BAThree.js%E5%9C%BA%E6%99%AF/" title="TresJS详解：用Vue的方式构建Three.js场景">TresJS详解：用Vue的方式构建Three.js场景</a><time datetime="2025-10-05T22:24:00.000Z" title="发表于 2025-10-06 06:24:00">2025-10-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-10-01_Go%E8%AF%AD%E8%A8%80%E6%8C%87%E5%90%91%E6%8C%87%E9%92%88%E7%9A%84%E6%8C%87%E9%92%88(Pointer%20to%20Pointer)%E8%AF%A6%E8%A7%A3/" title="Go语言指向指针的指针(Pointer to Pointer)详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go语言指向指针的指针(Pointer to Pointer)详解"/></a><div class="content"><a class="title" href="/2025/2025-10-01_Go%E8%AF%AD%E8%A8%80%E6%8C%87%E5%90%91%E6%8C%87%E9%92%88%E7%9A%84%E6%8C%87%E9%92%88(Pointer%20to%20Pointer)%E8%AF%A6%E8%A7%A3/" title="Go语言指向指针的指针(Pointer to Pointer)详解">Go语言指向指针的指针(Pointer to Pointer)详解</a><time datetime="2025-09-30T22:24:00.000Z" title="发表于 2025-10-01 06:24:00">2025-10-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-09-28_HTMX%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%94%A8HTML%E5%B1%9E%E6%80%A7%E7%9B%B4%E6%8E%A5%E9%A9%B1%E5%8A%A8AJAX%E3%80%81CSS%E8%BF%87%E6%B8%A1%E5%92%8CWebSocket/" title="HTMX详解：用HTML属性直接驱动AJAX、CSS过渡和WebSocket"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HTMX详解：用HTML属性直接驱动AJAX、CSS过渡和WebSocket"/></a><div class="content"><a class="title" href="/2025/2025-09-28_HTMX%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%94%A8HTML%E5%B1%9E%E6%80%A7%E7%9B%B4%E6%8E%A5%E9%A9%B1%E5%8A%A8AJAX%E3%80%81CSS%E8%BF%87%E6%B8%A1%E5%92%8CWebSocket/" title="HTMX详解：用HTML属性直接驱动AJAX、CSS过渡和WebSocket">HTMX详解：用HTML属性直接驱动AJAX、CSS过渡和WebSocket</a><time datetime="2025-09-27T22:24:00.000Z" title="发表于 2025-09-28 06:24:00">2025-09-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-09-22_WSL2%E8%AF%A6%E8%A7%A3%EF%BC%9A%E5%9C%A8Windows%E8%BF%90%E8%A1%8CLinux%E7%9A%84%E6%96%B0%E6%A0%87%E5%87%86/" title="WSL2详解：在Windows运行Linux的新标准"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WSL2详解：在Windows运行Linux的新标准"/></a><div class="content"><a class="title" href="/2025/2025-09-22_WSL2%E8%AF%A6%E8%A7%A3%EF%BC%9A%E5%9C%A8Windows%E8%BF%90%E8%A1%8CLinux%E7%9A%84%E6%96%B0%E6%A0%87%E5%87%86/" title="WSL2详解：在Windows运行Linux的新标准">WSL2详解：在Windows运行Linux的新标准</a><time datetime="2025-09-21T22:24:00.000Z" title="发表于 2025-09-22 06:24:00">2025-09-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-09-18_GoLang%20Wails%20%E6%A1%86%E6%9E%B6%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%94%A8%20Web%20%E6%8A%80%E6%9C%AF%E6%9E%84%E5%BB%BA%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8/" title="GoLang Wails 框架详解：用 Web 技术构建桌面应用"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-09.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GoLang Wails 框架详解：用 Web 技术构建桌面应用"/></a><div class="content"><a class="title" href="/2025/2025-09-18_GoLang%20Wails%20%E6%A1%86%E6%9E%B6%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%94%A8%20Web%20%E6%8A%80%E6%9C%AF%E6%9E%84%E5%BB%BA%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8/" title="GoLang Wails 框架详解：用 Web 技术构建桌面应用">GoLang Wails 框架详解：用 Web 技术构建桌面应用</a><time datetime="2025-09-17T22:24:00.000Z" title="发表于 2025-09-18 06:24:00">2025-09-18</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-06.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/tags/2023/" target="_blank" title="📌 2023">📌 2023</a><a href="/tags/2024/" target="_blank" title="❓ 2024">❓ 2024</a><a href="/tags/2025/" target="_blank" title="🚀 2025">🚀 2025</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="分类">分类</a><a href="/tags/" target="_blank" title="标签">标签</a><a href="/categories/" target="_blank" title="时间线">时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="说说">说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2021 - 2025 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.0/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><script src="/self/sakura.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      true
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script>(() => {
  const option = null
  const config = {"site_uv":true,"site_pv":true,"page_pv":true,"token":"qTvz1SkmPDt785fgh6BpiA5qiFFIVUwxj8Ft+rPW+cdN59v1hXjwRgSmy0+ji9m+oLlcxvo2NfDSMa6epVl3NTlsN3ejCIwWeP8Y51aEJ0Sbem4UexGmJLspB7AkOBId2SdtT6QWEBlGmFIIQgchQ2zAKYxTmc/kpBED5aLSr+3uvmQ9/G7FJQeVFpveDkK0xM1hu36xq4a6/FSeROxtoEp5zabzTWiYTlLsQzIl/NlELnCq3nxK+oo/vl3UQo/oM/rae/gJX/MaVKsgIUCd2ABJogNkx2KTenBIBpbPki5FzOgPh6/z4GPa4HvhNO51DDVG1SEQZooqEYmt/gnybLBWFbN+7liZWw=="}

  const runTrack = () => {
    if (typeof umami !== 'undefined' && typeof umami.track === 'function') {
      umami.track(props => ({ ...props, url: window.location.pathname, title: GLOBAL_CONFIG_SITE.title }))
    } else {
      console.warn('Umami Analytics: umami.track is not available')
    }
  }

  const loadUmamiJS = () => {
    btf.getScript('https://umami.012700.xyz/script.js', {
      'data-website-id': '2a796d6c-6499-42d8-8eb4-d9a2930b0ff3',
      'data-auto-track': 'false',
      ...option
    }).then(() => {
      runTrack()
    }).catch(error => {
      console.error('Umami Analytics: Error loading script', error)
    })
  }

  const getData = async (isPost) => {
    try {
      const now = Date.now()
      const keyUrl = isPost ? `&url=${window.location.pathname}` : ''
      const headerList = { 'Accept': 'application/json' }

      if (true) {
        headerList['Authorization'] = `Bearer ${config.token}`
      } else {
        headerList['x-umami-api-key'] = config.token
      }

      const res = await fetch(`https://umami.012700.xyz/api/websites/2a796d6c-6499-42d8-8eb4-d9a2930b0ff3/stats?startAt=0000000000&endAt=${now}${keyUrl}`, {
        method: "GET",
        headers: headerList
      })

      if (!res.ok) {
        throw new Error(`HTTP error! status: ${res.status}`)
      }

      return await res.json()
    } catch (error) {
      console.error('Umami Analytics: Failed to fetch data', error)
      throw error
    }
  }

  const insertData = async () => {
    try {
      if (GLOBAL_CONFIG_SITE.pageType === 'post' && config.page_pv) {
        const pagePV = document.getElementById('umamiPV')
        if (pagePV) {
          const data = await getData(true)
          if (data && data.pageviews && typeof data.pageviews.value !== 'undefined') {
            pagePV.textContent = data.pageviews.value
          } else {
            console.warn('Umami Analytics: Invalid page view data received')
          }
        }
      }

      if (config.site_uv || config.site_pv) {
        const data = await getData(false)

        if (config.site_uv) {
          const siteUV = document.getElementById('umami-site-uv')
          if (siteUV && data && data.visitors && typeof data.visitors.value !== 'undefined') {
            siteUV.textContent = data.visitors.value
          } else if (siteUV) {
            console.warn('Umami Analytics: Invalid site UV data received')
          }
        }

        if (config.site_pv) {
          const sitePV = document.getElementById('umami-site-pv')
          if (sitePV && data && data.pageviews && typeof data.pageviews.value !== 'undefined') {
            sitePV.textContent = data.pageviews.value
          } else if (sitePV) {
            console.warn('Umami Analytics: Invalid site PV data received')
          }
        }
      }
    } catch (error) {
      console.error('Umami Analytics: Failed to insert data', error)
    }
  }

  btf.addGlobalFn('pjaxComplete', runTrack, 'umami_analytics_run_track')
  btf.addGlobalFn('pjaxComplete', insertData, 'umami_analytics_insert')


  loadUmamiJS()

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', insertData)
  } else {
    setTimeout(insertData, 100)
  }
})()</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.1"></script></div></div></body></html>