<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>JavaScript Lodash 库详解 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Lodash 是一个广受欢迎的 JavaScript 实用工具库，提供了一系列模块化、高性能的函数，旨在简化 JavaScript 应用程序中的数据操作。它通过提供一致的、跨环境的、经过性能优化的方法，帮助开发者更高效地处理数组、对象、字符串、函数和数字等。Lodash 的函数式编程风格和对不可变数据操作的支持，使其在现代 JavaScript 开发中占据重要地位。  核心思想：提供一套强大、一">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript Lodash 库详解">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/eefad265dcbc/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="Lodash 是一个广受欢迎的 JavaScript 实用工具库，提供了一系列模块化、高性能的函数，旨在简化 JavaScript 应用程序中的数据操作。它通过提供一致的、跨环境的、经过性能优化的方法，帮助开发者更高效地处理数组、对象、字符串、函数和数字等。Lodash 的函数式编程风格和对不可变数据操作的支持，使其在现代 JavaScript 开发中占据重要地位。  核心思想：提供一套强大、一">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-15.jpg">
<meta property="article:published_time" content="2023-11-24T22:24:00.000Z">
<meta property="article:modified_time" content="2026-01-30T10:18:03.453Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="2023">
<meta property="article:tag" content="前端技术">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-15.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "JavaScript Lodash 库详解",
  "url": "https://blog.tbf1211.xx.kg/eefad265dcbc/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-15.jpg",
  "datePublished": "2023-11-24T22:24:00.000Z",
  "dateModified": "2026-01-30T10:18:03.453Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/eefad265dcbc/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.9/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaScript Lodash 库详解',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">536</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">229</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-15.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">JavaScript Lodash 库详解</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">JavaScript Lodash 库详解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2023-11-24T22:24:00.000Z" title="发表于 2023-11-25 06:24:00">2023-11-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/">前端技术</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/%E5%BA%93/">库</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>14分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><strong>Lodash</strong> 是一个广受欢迎的 JavaScript 实用工具库，提供了一系列模块化、高性能的函数，旨在简化 JavaScript 应用程序中的数据操作。它通过提供一致的、跨环境的、经过性能优化的方法，帮助开发者更高效地处理数组、对象、字符串、函数和数字等。Lodash 的函数式编程风格和对不可变数据操作的支持，使其在现代 JavaScript 开发中占据重要地位。</p>
</blockquote>
<div class="note info flat"><p>核心思想：<strong>提供一套强大、一致且高效的工具函数，用于简化 JavaScript 中的常见任务，尤其是在处理集合（数组和对象）时，提升代码的可读性、可维护性和性能。</strong></p>
</div>
<hr>
<h2 id="一、为什么需要-Lodash？"><a href="#一、为什么需要-Lodash？" class="headerlink" title="一、为什么需要 Lodash？"></a>一、为什么需要 Lodash？</h2><p>尽管现代 JavaScript (ES6+) 已经提供了许多内置方法（如 <code>Array.prototype.map</code>, <code>filter</code>, <code>reduce</code>），但 Lodash 依然有其独特的价值：</p>
<ol>
<li><strong>跨环境一致性</strong>：Node.js 和浏览器环境下行为一致，抹平了不同 JavaScript 引擎之间的兼容性差异。</li>
<li><strong>更丰富的功能</strong>：提供了大量原生 JS 没有的实用工具函数，例如深拷贝 (<code>_.cloneDeep</code>)、对象深度合并 (<code>_.merge</code>)、按路径获取&#x2F;设置值 (<code>_.get</code>, <code>_.set</code>)、函数节流&#x2F;防抖 (<code>_.throttle</code>, <code>_.debounce</code>) 等。</li>
<li><strong>性能优化</strong>：Lodash 的许多方法都经过高度优化，在处理大数据集时，其性能通常优于手写的循环或一些简单的原生实现。</li>
<li><strong>提高代码可读性与可维护性</strong>：通过使用语义化的函数名，代码意图更清晰，减少了手写复杂逻辑的必要性。</li>
<li><strong>函数式编程支持</strong>：提供了柯里化 (<code>_.curry</code>)、函数组合 (<code>_.flow</code>) 等工具，方便实践函数式编程范式。</li>
<li><strong>错误处理更健壮</strong>：许多 Lodash 方法在输入无效或缺失时，会返回更可预测的结果，而不会抛出错误。</li>
</ol>
<h2 id="二、安装与使用"><a href="#二、安装与使用" class="headerlink" title="二、安装与使用"></a>二、安装与使用</h2><h3 id="2-1-安装"><a href="#2-1-安装" class="headerlink" title="2.1 安装"></a>2.1 安装</h3><p>使用 npm 或 yarn 安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install lodash</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">yarn add lodash</span><br></pre></td></tr></table></figure>

<h3 id="2-2-导入与使用"><a href="#2-2-导入与使用" class="headerlink" title="2.2 导入与使用"></a>2.2 导入与使用</h3><p><strong>CommonJS (Node.js)</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _ = <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>); <span class="comment">// 导入整个库</span></span><br><span class="line"><span class="comment">// 或导入单个模块以减少打包体积</span></span><br><span class="line"><span class="comment">// const get = require(&#x27;lodash/get&#x27;);</span></span><br></pre></td></tr></table></figure>

<p><strong>ES Modules (现代浏览器&#x2F;打包工具)</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span>; <span class="comment">// 导入整个库</span></span><br><span class="line"><span class="comment">// 或导入单个模块以减少打包体积（推荐）</span></span><br><span class="line"><span class="keyword">import</span> &#123; get, map, filter &#125; <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span>;</span><br><span class="line"><span class="comment">// 或从 lodash-es (ES modules 版本) 导入</span></span><br><span class="line"><span class="comment">// import &#123; get, map, filter &#125; from &#x27;lodash-es&#x27;;</span></span><br></pre></td></tr></table></figure>

<p><strong>CDN (浏览器)</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 现在可以使用 _ 对象了</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="property">VERSION</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="三、Lodash-核心功能分类与示例"><a href="#三、Lodash-核心功能分类与示例" class="headerlink" title="三、Lodash 核心功能分类与示例"></a>三、Lodash 核心功能分类与示例</h2><p>Lodash 的函数通常以 <code>_</code> 开头，并分为多个类别。</p>
<h3 id="3-1-集合-Collections"><a href="#3-1-集合-Collections" class="headerlink" title="3.1 集合 (Collections)"></a>3.1 集合 (Collections)</h3><p>处理数组和对象等可迭代数据结构。</p>
<ul>
<li><code>_.forEach(collection, iteratee)</code>: 遍历集合中的每个元素。</li>
<li><code>_.map(collection, iteratee)</code>: 遍历集合，并根据 <code>iteratee</code> 函数的结果创建一个新数组。</li>
<li><code>_.filter(collection, predicate)</code>: 遍历集合，返回 <code>predicate</code> 函数返回真值的所有元素组成的新数组。</li>
<li><code>_.reduce(collection, iteratee, accumulator)</code>: 将集合缩减为单个值。</li>
<li><code>_.find(collection, predicate)</code>: 遍历集合，返回第一个通过 <code>predicate</code> 真值检测的元素。</li>
<li><code>_.sortBy(collection, [iteratees])</code>: 创建一个排序后的数组。</li>
<li><code>_.groupBy(collection, iteratee)</code>: 根据 <code>iteratee</code> 的结果将集合中的元素分组。</li>
<li><code>_.sample(collection)</code> &#x2F; <code>_.sampleSize(collection, n)</code>: 从集合中随机获取一个或多个元素。</li>
<li><code>_.shuffle(collection)</code>: 打乱集合的顺序。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;barney&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">36</span>, <span class="string">&#x27;active&#x27;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  &#123; <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;fred&#x27;</span>,   <span class="string">&#x27;age&#x27;</span>: <span class="number">40</span>, <span class="string">&#x27;active&#x27;</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;pebbles&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;active&#x27;</span>: <span class="literal">true</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--- Collections ---&#x27;</span>);</span><br><span class="line"><span class="comment">// _.map</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">map</span>(users, <span class="string">&#x27;user&#x27;</span>)); <span class="comment">// [&#x27;barney&#x27;, &#x27;fred&#x27;, &#x27;pebbles&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.filter</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">filter</span>(users, &#123; <span class="string">&#x27;age&#x27;</span>: <span class="number">36</span>, <span class="string">&#x27;active&#x27;</span>: <span class="literal">true</span> &#125;));</span><br><span class="line"><span class="comment">// [&#123; &#x27;user&#x27;: &#x27;barney&#x27;, &#x27;age&#x27;: 36, &#x27;active&#x27;: true &#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.sortBy</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">sortBy</span>(users, [<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;age&#x27;</span>]));</span><br><span class="line"><span class="comment">// [&#123; user: &#x27;barney&#x27;, age: 36, active: true &#125;, &#123; user: &#x27;fred&#x27;, age: 40, active: false &#125;, &#123; user: &#x27;pebbles&#x27;, age: 1, active: true &#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.groupBy</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">groupBy</span>(users, <span class="function"><span class="params">user</span> =&gt;</span> user.<span class="property">age</span> &lt; <span class="number">18</span> ? <span class="string">&#x27;kids&#x27;</span> : <span class="string">&#x27;adults&#x27;</span>));</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">  &#x27;adults&#x27;: [&#123; user: &#x27;barney&#x27;, age: 36, active: true &#125;, &#123; user: &#x27;fred&#x27;, age: 40, active: false &#125;],</span></span><br><span class="line"><span class="comment">  &#x27;kids&#x27;: [&#123; user: &#x27;pebbles&#x27;, age: 1, active: true &#125;]</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-数组-Arrays"><a href="#3-2-数组-Arrays" class="headerlink" title="3.2 数组 (Arrays)"></a>3.2 数组 (Arrays)</h3><p>专注于数组特有的操作，通常比原生方法更强大或更灵活。</p>
<ul>
<li><code>_.chunk(array, size)</code>: 将数组拆分成多个指定大小的块。</li>
<li><code>_.compact(array)</code>: 创建一个新数组，其中包含原数组中所有真值元素（移除 <code>false</code>, <code>null</code>, <code>0</code>, <code>&quot;&quot;</code>, <code>undefined</code>, <code>NaN</code>）。</li>
<li><code>_.concat(array, [values])</code>: 连接数组和&#x2F;或值。</li>
<li><code>_.difference(array, [values])</code>: 返回一个新数组，包含那些在第一个数组中出现，但在后续数组中没有出现的元素。</li>
<li><code>_.flatten(array)</code> &#x2F; <code>_.flattenDeep(array)</code> &#x2F; <code>_.flattenDepth(array, depth)</code>: 扁平化数组。</li>
<li><code>_.intersection([arrays])</code>: 返回一个新数组，包含所有给定数组中都存在的唯一元素。</li>
<li><code>_.union([arrays])</code>: 返回一个新数组，包含所有给定数组中的唯一元素（去重）。</li>
<li><code>_.uniq(array)</code>: 去重数组中的元素。</li>
<li><code>_.zip([arrays])</code>: 将多个数组相同索引的元素组合成一个新数组。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\n--- Arrays ---&#x27;</span>);</span><br><span class="line"><span class="comment">// _.chunk</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">chunk</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>], <span class="number">2</span>)); <span class="comment">// [[&#x27;a&#x27;, &#x27;b&#x27;], [&#x27;c&#x27;, &#x27;d&#x27;]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.compact</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">compact</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="literal">false</span>, <span class="number">2</span>, <span class="string">&#x27;&#x27;</span>, <span class="number">3</span>])); <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.difference</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">difference</span>([<span class="number">2</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>])); <span class="comment">// [1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.flattenDeep</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">flattenDeep</span>([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>]], <span class="number">5</span>]])); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.union</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">union</span>([<span class="number">2</span>], [<span class="number">1</span>, <span class="number">2</span>])); <span class="comment">// [2, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.uniq</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">uniq</span>([<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>])); <span class="comment">// [2, 1]</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-对象-Objects"><a href="#3-3-对象-Objects" class="headerlink" title="3.3 对象 (Objects)"></a>3.3 对象 (Objects)</h3><p>处理对象的属性和结构。</p>
<ul>
<li><code>_.get(object, path, [defaultValue])</code>: 根据路径获取对象的属性值，支持深层嵌套。</li>
<li><code>_.set(object, path, value)</code>: 根据路径设置对象的属性值。</li>
<li><code>_.has(object, path)</code>: 检查对象是否有指定的属性（支持深层路径）。</li>
<li><code>_.merge(object, [sources])</code>: 递归地合并源对象的自身及继承的可枚举属性到目标对象。</li>
<li><code>_.assign(object, [sources])</code>: 类似于 <code>Object.assign</code>，但支持更多参数。</li>
<li><code>_.cloneDeep(value)</code>: 深度克隆一个值。</li>
<li><code>_.isEqual(value, other)</code>: 执行深度比较，判断两个值是否相等。</li>
<li><code>_.omit(object, [paths])</code>: 创建一个不包含指定属性的新对象。</li>
<li><code>_.pick(object, [paths])</code>: 创建一个只包含指定属性的新对象。</li>
<li><code>_.keys(object)</code> &#x2F; <code>_.values(object)</code> &#x2F; <code>_.entries(object)</code>: 返回对象的键&#x2F;值&#x2F;键值对数组。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> object = &#123; <span class="string">&#x27;a&#x27;</span>: [&#123; <span class="string">&#x27;b&#x27;</span>: &#123; <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span> &#125; &#125;], <span class="string">&#x27;x&#x27;</span>: <span class="literal">null</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\n--- Objects ---&#x27;</span>);</span><br><span class="line"><span class="comment">// _.get</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">get</span>(object, <span class="string">&#x27;a[0].b.c&#x27;</span>));    <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">get</span>(object, <span class="string">&#x27;a[0].b.d&#x27;</span>, <span class="string">&#x27;default&#x27;</span>)); <span class="comment">// default</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">get</span>(object, <span class="string">&#x27;x.y.z&#x27;</span>, <span class="string">&#x27;fallback&#x27;</span>)); <span class="comment">// fallback</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.set</span></span><br><span class="line">_.<span class="title function_">set</span>(object, <span class="string">&#x27;a[0].b.d&#x27;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object.<span class="property">a</span>[<span class="number">0</span>].<span class="property">b</span>.<span class="property">d</span>); <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.cloneDeep</span></span><br><span class="line"><span class="keyword">const</span> clonedObject = _.<span class="title function_">cloneDeep</span>(object);</span><br><span class="line">clonedObject.<span class="property">a</span>[<span class="number">0</span>].<span class="property">b</span>.<span class="property">c</span> = <span class="number">5</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object.<span class="property">a</span>[<span class="number">0</span>].<span class="property">b</span>.<span class="property">c</span>); <span class="comment">// 3 (原对象未受影响)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.isEqual</span></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> obj3 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">3</span> &#125; &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isEqual</span>(obj1, obj2)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isEqual</span>(obj1, obj3)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.omit</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">omit</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;, [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])); <span class="comment">// &#123; b: 2 &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-函数-Functions"><a href="#3-4-函数-Functions" class="headerlink" title="3.4 函数 (Functions)"></a>3.4 函数 (Functions)</h3><p>提供用于创建、装饰或控制函数执行的工具。</p>
<ul>
<li><code>_.debounce(func, [wait=0], [options])</code>: 创建一个防抖动（debounce）函数，在函数被触发后等待指定时间后才执行，如果在等待时间内再次触发，则重新计时。常用于输入框搜索、窗口resize事件。</li>
<li><code>_.throttle(func, [wait=0], [options])</code>: 创建一个节流（throttle）函数，在指定时间段内最多只执行一次。常用于滚动事件、高频点击。</li>
<li><code>_.curry(func, [arity=func.length])</code>: 创建一个柯里化（curry）函数。</li>
<li><code>_.memoize(func, [resolver])</code>: 创建一个记忆化（memoized）函数，缓存其计算结果。</li>
<li><code>_.once(func)</code>: 创建一个只执行一次的函数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\n--- Functions ---&#x27;</span>);</span><br><span class="line"><span class="comment">// _.debounce 示例</span></span><br><span class="line"><span class="comment">// const expensiveSearch = _.debounce((query) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   console.log(`Performing search for: $&#123;query&#125;`);</span></span><br><span class="line"><span class="comment">// &#125;, 500);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// expensiveSearch(&#x27;nodejs&#x27;); // 不会立即执行</span></span><br><span class="line"><span class="comment">// setTimeout(() =&gt; expensiveSearch(&#x27;lodash&#x27;), 300); // 重新计时</span></span><br><span class="line"><span class="comment">// setTimeout(() =&gt; expensiveSearch(&#x27;javascript&#x27;), 800); // 执行 &#x27;javascript&#x27; 搜索</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _.throttle 示例</span></span><br><span class="line"><span class="comment">// const onScroll = _.throttle(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   console.log(&#x27;Scroll event handled!&#x27;);</span></span><br><span class="line"><span class="comment">// &#125;, 1000);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// document.addEventListener(&#x27;scroll&#x27;, onScroll); // 每隔1秒最多触发一次</span></span><br></pre></td></tr></table></figure>

<h3 id="3-5-字符串-Strings"><a href="#3-5-字符串-Strings" class="headerlink" title="3.5 字符串 (Strings)"></a>3.5 字符串 (Strings)</h3><p>提供常见的字符串格式化和操作。</p>
<ul>
<li><code>_.capitalize(string)</code>: 转换字符串第一个字符为大写，其余为小写。</li>
<li><code>_.kebabCase(string)</code>: 转换字符串为 kebab-case (连字符)。</li>
<li><code>_.snakeCase(string)</code>: 转换字符串为 snake_case (下划线)。</li>
<li><code>_.camelCase(string)</code>: 转换字符串为 camelCase (驼峰)。</li>
<li><code>_.trim(string, [chars])</code>: 移除字符串两端的空白符或指定字符。</li>
<li><code>_.startsWith(string, target, [position])</code>: 检查字符串是否以 <code>target</code> 开头。</li>
<li><code>_.endsWith(string, target, [position])</code>: 检查字符串是否以 <code>target</code> 结尾。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\n--- Strings ---&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">capitalize</span>(<span class="string">&#x27;hello world&#x27;</span>)); <span class="comment">// Hello world</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">kebabCase</span>(<span class="string">&#x27;Foo Bar&#x27;</span>));      <span class="comment">// foo-bar</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">snakeCase</span>(<span class="string">&#x27;Foo Bar&#x27;</span>));      <span class="comment">// foo_bar</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">camelCase</span>(<span class="string">&#x27;foo bar&#x27;</span>));      <span class="comment">// fooBar</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">trim</span>(<span class="string">&#x27;  hello world  &#x27;</span>));   <span class="comment">// hello world</span></span><br></pre></td></tr></table></figure>

<h3 id="3-6-数值-Numbers"><a href="#3-6-数值-Numbers" class="headerlink" title="3.6 数值 (Numbers)"></a>3.6 数值 (Numbers)</h3><p>简单的数值操作。</p>
<ul>
<li><code>_.clamp(number, [lower], upper)</code>: 将 <code>number</code> 限制在一个范围内。</li>
<li><code>_.random([lower=0], [upper=1], [floating])</code>: 生成一个随机数。</li>
<li><code>_.inRange(number, [start=0], end)</code>: 检查 <code>number</code> 是否在指定范围内。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\n--- Numbers ---&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">clamp</span>(-<span class="number">10</span>, -<span class="number">5</span>, <span class="number">5</span>)); <span class="comment">// -5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">clamp</span>(<span class="number">10</span>, -<span class="number">5</span>, <span class="number">5</span>));  <span class="comment">// 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">random</span>(<span class="number">1</span>, <span class="number">5</span>));     <span class="comment">// 2 (每次运行可能不同)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">inRange</span>(<span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>));  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="3-7-实用工具-Utilities"><a href="#3-7-实用工具-Utilities" class="headerlink" title="3.7 实用工具 (Utilities)"></a>3.7 实用工具 (Utilities)</h3><p>通用辅助函数，包括类型检查。</p>
<ul>
<li><code>_.noop()</code>: 一个什么也不做的函数，作为空操作的占位符。</li>
<li><code>_.identity(value)</code>: 返回 <code>value</code> 本身。</li>
<li><code>_.uniqueId([prefix])</code>: 生成一个唯一的 ID 字符串。</li>
<li><strong>类型检查</strong>：<ul>
<li><code>_.isArray(value)</code></li>
<li><code>_.isObject(value)</code></li>
<li><code>_.isString(value)</code></li>
<li><code>_.isNumber(value)</code></li>
<li><code>_.isBoolean(value)</code></li>
<li><code>_.isFunction(value)</code></li>
<li><code>_.isEmpty(value)</code>: 检查 <code>value</code> 是否为空集合、空对象、空字符串等。</li>
<li><code>_.isNil(value)</code>: 检查 <code>value</code> 是否为 <code>null</code> 或 <code>undefined</code>。</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\n--- Utilities ---&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">uniqueId</span>(<span class="string">&#x27;prefix_&#x27;</span>)); <span class="comment">// prefix_1 (每次运行可能不同)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isEmpty</span>(<span class="literal">null</span>));       <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isEmpty</span>(<span class="literal">true</span>));       <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isEmpty</span>(<span class="number">1</span>));          <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isEmpty</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]));  <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isEmpty</span>([]));         <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isEmpty</span>(&#123;&#125;));         <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isNil</span>(<span class="literal">null</span>));         <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isNil</span>(<span class="literal">undefined</span>));    <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isString</span>(<span class="string">&#x27;hello&#x27;</span>));   <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="3-8-链式调用-Chaining"><a href="#3-8-链式调用-Chaining" class="headerlink" title="3.8 链式调用 (Chaining)"></a>3.8 链式调用 (Chaining)</h3><p>Lodash 支持链式调用，可以连续应用多个操作。有两种方式：</p>
<ol>
<li><strong>隐式链</strong>：使用 <code>_()</code> 或 <code>_.chain()</code>，需要调用 <code>.value()</code> 来获取最终结果。</li>
<li><strong>显式链</strong>：直接使用 Lodash 函数，它们返回非 Lodash 包装的值。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;barney&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">36</span>, <span class="string">&#x27;active&#x27;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  &#123; <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;fred&#x27;</span>,   <span class="string">&#x27;age&#x27;</span>: <span class="number">40</span>, <span class="string">&#x27;active&#x27;</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;pebbles&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;active&#x27;</span>: <span class="literal">true</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\n--- Chaining ---&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> youngestActiveUser = _.<span class="title function_">chain</span>(users)</span><br><span class="line">  .<span class="title function_">filter</span>(<span class="string">&#x27;active&#x27;</span>)      <span class="comment">// 过滤活跃用户</span></span><br><span class="line">  .<span class="title function_">sortBy</span>(<span class="string">&#x27;age&#x27;</span>)         <span class="comment">// 按年龄排序</span></span><br><span class="line">  .<span class="title function_">map</span>(<span class="string">&#x27;user&#x27;</span>)           <span class="comment">// 只获取用户名</span></span><br><span class="line">  .<span class="title function_">head</span>()                <span class="comment">// 获取第一个 (最年轻的)</span></span><br><span class="line">  .<span class="title function_">capitalize</span>()          <span class="comment">// 首字母大写</span></span><br><span class="line">  .<span class="title function_">value</span>();              <span class="comment">// 提取最终结果</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(youngestActiveUser); <span class="comment">// Pebbles</span></span><br></pre></td></tr></table></figure>

<h2 id="四、Lodash-与原生-JavaScript-的抉择"><a href="#四、Lodash-与原生-JavaScript-的抉择" class="headerlink" title="四、Lodash 与原生 JavaScript 的抉择"></a>四、Lodash 与原生 JavaScript 的抉择</h2><h3 id="4-1-何时选择-Lodash"><a href="#4-1-何时选择-Lodash" class="headerlink" title="4.1 何时选择 Lodash"></a>4.1 何时选择 Lodash</h3><ul>
<li><strong>项目需要广泛使用集合、对象和函数操作</strong>：Lodash 提供了一致且功能强大的 API。</li>
<li><strong>需要兼容旧版浏览器</strong>：Lodash 提供了现代 JavaScript 特性的向下兼容实现。</li>
<li><strong>对性能有较高要求</strong>：Lodash 的许多函数都经过优化，对于大型数据集或频繁操作可能带来性能优势。</li>
<li><strong>提升代码可读性和可维护性</strong>：语义化的函数名可以使代码更清晰。</li>
<li><strong>需要使用 Lodash 特有的高级功能</strong>：例如 <code>_.debounce</code>, <code>_.throttle</code>, <code>_.cloneDeep</code>, <code>_.get</code> 等。</li>
</ul>
<h3 id="4-2-何时偏向原生-JavaScript"><a href="#4-2-何时偏向原生-JavaScript" class="headerlink" title="4.2 何时偏向原生 JavaScript"></a>4.2 何时偏向原生 JavaScript</h3><ul>
<li><strong>项目对 bundle 大小有严格限制</strong>：如果只使用少量 Lodash 功能，原生实现或只导入特定模块可能更轻量。</li>
<li><strong>现代浏览器和 Node.js 环境</strong>：许多 Lodash 的基本功能在 ES6+ 中都有对应的原生方法 (<code>Array.prototype.map</code>, <code>filter</code>, <code>reduce</code>, <code>Object.assign</code>, <code>Object.keys</code> 等)。</li>
<li><strong>对简单操作</strong>：对于简单的数组遍历、过滤等，原生方法通常足够且直接。</li>
</ul>
<h3 id="4-3-趋势"><a href="#4-3-趋势" class="headerlink" title="4.3 趋势"></a>4.3 趋势</h3><p>随着 ES6+ 的普及和浏览器兼容性的提高，一些 Lodash 的基本功能（如 <code>_.map</code> 对应 <code>Array.prototype.map</code>）逐渐被原生 JavaScript 取代。但其提供的高级功能、性能优化和跨平台一致性，仍然使其在许多复杂应用场景中不可或缺。</p>
<h2 id="五、模块化导入与-Tree-Shaking"><a href="#五、模块化导入与-Tree-Shaking" class="headerlink" title="五、模块化导入与 Tree Shaking"></a>五、模块化导入与 Tree Shaking</h2><p>为了减少最终打包体积，强烈建议只导入所需的 Lodash 函数，而不是整个库。</p>
<ul>
<li><strong><code>import &#123; funcName &#125; from &#39;lodash&#39;;</code></strong> (推荐使用 <code>lodash-es</code> 模块以获得更好的 tree-shaking 效果):<ul>
<li>如果打包工具 (如 Webpack) 配置了 <code>lodash</code> 的 tree-shaking 优化，或者直接使用 <code>lodash-es</code>，可以有效减少打包体积。</li>
</ul>
</li>
<li><strong><code>import funcName from &#39;lodash/funcName&#39;;</code></strong>:<ul>
<li>直接导入单个文件，无论打包工具是否支持 tree-shaking，都可以确保只引入所需代码。</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 推荐的按需导入方式 (使用 lodash-es 更佳)</span></span><br><span class="line"><span class="keyword">import</span> &#123; get, debounce, map &#125; <span class="keyword">from</span> <span class="string">&#x27;lodash-es&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myObject = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="number">1</span> &#125; &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">get</span>(myObject, <span class="string">&#x27;a.b&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handler = <span class="title function_">debounce</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Debounced!&#x27;</span>), <span class="number">100</span>);</span><br><span class="line"><span class="title function_">handler</span>();</span><br></pre></td></tr></table></figure>

<h2 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h2><p>Lodash 是一个功能强大、设计精良的 JavaScript 实用工具库。它通过提供一套高性能、一致且易于使用的 API，极大地简化了 JavaScript 开发中的许多常见任务。无论是处理复杂的数据结构、优化函数执行、还是保证跨环境的代码兼容性，Lodash 都能够提供可靠的解决方案。尽管现代 JavaScript 已经进步，但 Lodash 依然是许多开发者工具箱中不可或缺的一部分，尤其是在处理大型项目和需要高级数据操作时，它能显著提升开发效率和代码质量。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/eefad265dcbc/">https://blog.tbf1211.xx.kg/eefad265dcbc/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/2023/">2023</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/">前端技术</a><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-15.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/b4cf2900f9ab/" title="CommonJS 与 ES Modules 对比详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-24.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">CommonJS 与 ES Modules 对比详解</div></div><div class="info-2"><div class="info-item-1"> 在 JavaScript 生态系统中，模块化是组织和重用代码的核心机制。随着 Web 应用复杂度的不断提升，以及 Node.js 等服务端 JavaScript 平台的兴起，对模块化方案的需求也日益增长。目前主流的两种模块化规范是 CommonJS (CJS) 和 ES Modules (ESM)。理解它们的异同对于现代 JavaScript 开发至关重要。  核心思想：CommonJS 诞生于服务端，采用同步加载，适用于 Node.js 的文件系统特性；ES Modules 是 JavaScript 官方标准，支持异步加载，同时适用于浏览器和 Node.js，具有静态分析、Tree Shaking 等高级特性。 它们代表了 JavaScript 模块化的两种不同哲学和演进路径。   一、模块化简史与背景在模块化规范出现之前，JavaScript 主要通过以下方式组织代码：  全局变量：所有脚本共享全局命名空间，容易造成命名冲突和污染。 立即执行函数表达式 (IIFE)：通过创建私有作用域来避免命名冲突，但依然需要手动管理依赖顺序。  随着前端应用变得复杂，以及 Node.js...</div></div></div></a><a class="pagination-related" href="/f9907953525a/" title="Java try-catch-finally 与 try-with-resources 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-04.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Java try-catch-finally 与 try-with-resources 详解</div></div><div class="info-2"><div class="info-item-1"> 在 Java 编程中，异常处理是确保程序健壮性和可靠性的关键。try-catch-finally 结构是 Java 异常处理的基石，而 try-with-resources (自 Java 7 引入) 则是为了更优雅、更安全地管理资源而设计的语法糖。本文将详细探讨这两种机制的工作原理、使用场景、优缺点以及最佳实践。  核心思想：  try-catch-finally：提供了一个结构化的方式来捕获和处理可能发生的运行时错误 (异常)，并确保在异常发生或不发生的情况下，特定代码块（通常用于资源清理）能够执行。 try-with-resources：针对需要关闭的资源（如文件流、数据库连接等），提供了一种自动管理资源生命周期的方式，确保资源在使用完毕后被正确关闭，即使发生异常。     一、try-catch-finally 详解try-catch-finally 是 Java 异常处理的核心机制。  try 块：包含可能抛出异常的代码。 catch 块：用于捕获 try 块中抛出的特定类型的异常，并进行相应的处理。一个 try 块可以跟多个 catch 块，以处理不同类型的异常。 ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/ab44062dd349/" title="深入理解虚拟 DOM 与 Vue 核心补丁机制：patch(), patchVnode(), updateChildren()"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-11.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-15</div><div class="info-item-2">深入理解虚拟 DOM 与 Vue 核心补丁机制：patch(), patchVnode(), updateChildren()</div></div><div class="info-2"><div class="info-item-1"> 现代前端框架如 Vue 和 React 之所以能提供高性能和优秀的开发体验，很大程度上要归功于 虚拟 DOM (Virtual DOM) 及其配套的 Diff 算法 (补丁机制)。虚拟 DOM 充当了真实 DOM 的一个轻量级抽象层，而 Vue 的补丁机制则负责将虚拟 DOM 的变化高效地反映到真实的浏览器 DOM 上。本文将深入解析虚拟 DOM 的概念，并聚焦 Vue 2 中驱动这一机制的三个核心函数：patch(), patchVnode(), 和 updateChildren()，并辅以 Mermaid 流程图进行可视化说明。  “虚拟 DOM 是前端性能优化的基石，而 Vue 的 patch() 系列函数正是将这块基石转化为实际渲染效率的魔法棒。”   一、虚拟 DOM (Virtual DOM) 再探1.1 什么是虚拟 DOM？虚拟 DOM 是一个用 JavaScript 对象来模拟真实 DOM 节点的数据结构。它是一个轻量级的、内存中的真实 DOM 树的抽象。每一个虚拟节点（VNode）都包含构建一个真实 DOM 节点所需的所有信息，例如：  tag：标签名（如 d...</div></div></div></a><a class="pagination-related" href="/8d32c59da40a/" title="Vitest 详解：下一代前端测试框架"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-30.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-29</div><div class="info-item-2">Vitest 详解：下一代前端测试框架</div></div><div class="info-2"><div class="info-item-1"> Vitest 是一个由 Vite 驱动的下一代单元测试框架，旨在提供一个快速、现代且极具效率的测试体验。它与 Vite 深度集成，共享相同的配置、转换和解析器，从而为使用 Vite 构建的前端项目提供了无缝的测试解决方案。Vitest 的诞生，部分是为了解决传统前端测试工具（如 Jest）在大型项目中启动慢、HMR（热模块替换）支持不足等痛点。  核心思想：Vitest 利用 Vite 的 ESM-first 开发服务器和闪电般的 HMR 能力，为 JavaScript&#x2F;TypeScript 项目带来前所未有的快速测试体验，尤其适合基于 Vite 的现代前端项目。   一、为什么选择 Vitest？在前端开发日益复杂的今天，测试是保证代码质量和项目稳定性的关键环节。传统的测试框架，如 Jest，尽管功能强大，但在面对现代前端构建工具（如 ESM、TypeScript、JSX&#x2F;TSX 转换）时，往往需要额外的配置和转换步骤，导致测试启动慢、HMR 效率不高。Vitest 应运而生，旨在解决这些问题。 1.1 核心优势 Vite 驱动，极致速度：  直接利用 V...</div></div></div></a><a class="pagination-related" href="/d883c2e5bd14/" title="端到端测试 (E2E Testing) 深度解析"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-05.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-23</div><div class="info-item-2">端到端测试 (E2E Testing) 深度解析</div></div><div class="info-2"><div class="info-item-1"> 端到端测试 (End-to-End Testing, E2E Testing) 是一种软件测试方法，旨在模拟真实用户在应用程序中的完整交互路径。它涵盖了从用户界面 (UI) 到后端服务、数据库乃至任何外部依赖的整个应用堆栈。E2E 测试的目标是验证应用程序的所有组件和子系统作为一个整体是否协同工作，并满足业务需求，确保关键的用户流程能够顺畅地完成。  核心思想：从用户的视角出发，检验应用程序的每一个环节，确保整个系统在真实使用场景下能够稳定、正确地运行。   一、为什么需要端到端测试？在现代复杂的分布式系统中，一个应用程序通常包含前端界面、多个后端服务、数据库、缓存、消息队列以及第三方集成等众多组件。尽管单元测试和集成测试能够有效验证单个模块和它们之间的局部交互，但它们无法全面覆盖以下场景：  完整用户流程验证：用户从登录、操作数据到登出的整个业务流程是否顺畅。 系统集成问题：不同服务、数据库、缓存和外部API之间的实际交互是否正确。 UI 与后端的一致性：前端页面渲染的数据是否与后端返回的数据一致，以及前端操作能否正确触发后端逻辑。 环境配置问题：部署到准生产或生产环境后，各...</div></div></div></a><a class="pagination-related" href="/8258d22937ed/" title="Vue3 ref和reactive对比解析：深入理解响应式数据"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-09.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-04</div><div class="info-item-2">Vue3 ref和reactive对比解析：深入理解响应式数据</div></div><div class="info-2"><div class="info-item-1"> 在 Vue 3 的 Composition API 中，ref 和 reactive 是创建响应式状态的两个核心函数。它们都旨在将普通 JavaScript 数据转换为响应式数据，以便在数据变化时自动触发视图更新。然而，它们在处理数据类型、访问方式和底层机制上存在显著差异。理解这些差异对于有效地使用 Composition API 至关重要。  核心思想：ref 用于处理原始值和对象，通过 .value 访问其内部值，而 reactive 专门用于处理对象，直接访问对象的属性，且底层基于 Proxy 实现。   一、ref：处理原始值和对象ref 函数接受一个内部值（inner value），并返回一个响应式的 ref 对象。这个 ref 对象只有一个 value 属性，用来指向内部值。 1.1 定义和用法 定义：ref 可以接收任何类型的值作为参数：原始值 (string, number, boolean, null, undefined, Symbol) 或对象 (Object, Array)。 访问：在 JavaScript 中访问 ref 对象时，需要通过其 .valu...</div></div></div></a><a class="pagination-related" href="/312a685b1f28/" title="ESLint 与 Prettier 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-18.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-30</div><div class="info-item-2">ESLint 与 Prettier 详解</div></div><div class="info-2"><div class="info-item-1"> 在现代前端开发中，ESLint 和 Prettier 是两大不可或缺的工具，它们共同构成了代码质量和风格管理的核心。ESLint 专注于代码质量检查和规范强制，识别潜在 Bug 和不良实践；Prettier 则专注于代码格式化，确保代码外观的一致性。本文将深入探讨这两个工具的职责、工作原理，并提供如何将它们在项目中完美结合的最佳实践。  核心思想：  ESLint：检查代码质量，识别语法错误、潜在 Bug 和不推荐的编码模式。 Prettier：统一代码风格，自动格式化代码。两者分工明确，互为补充，共同提升代码质量和开发效率。    一、理解 ESLint：代码质量的守护者1.1 ESLint 是什么？ESLint 是一个可插拔的 JavaScript 和 TypeScript 代码检查工具。它通过解析代码的抽象语法树（AST），根据配置的规则来识别代码中潜在的问题。这些问题可以分为两类：  代码质量问题：语法错误、潜在的 Bug（如未使用的变量、未定义的变量、强制类型转换带来的问题）、不推荐的模式（如使用 eval、var 关键字）。 代码风格问题：例如缩进、引号使用、分号、...</div></div></div></a><a class="pagination-related" href="/7cdd9f5b33c9/" title="前端项目工程化详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-31.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-17</div><div class="info-item-2">前端项目工程化详解</div></div><div class="info-2"><div class="info-item-1"> 随着前端应用的复杂度日益增加，单纯依靠人工管理和协作已经无法满足高效、高质量开发的需求。前端工程化应运而生，它旨在通过将软件工程的思想和方法引入前端开发，构建一套系统化、标准化、自动化、体系化的解决方案，以提高开发效率、保障代码质量、降低维护成本。  前端工程化的核心思想是：以自动化取代人力，以工具取代重复劳动，以规范约束散漫。   一、什么是前端工程化？前端工程化是构建、管理和维护前端项目的实践和工具集。它涵盖了从项目初始化、开发、构建、测试到部署的整个生命周期，目标是提升团队协作效率、统一代码风格、保证项目质量、优化产物性能以及实现快速迭代。 它不仅仅是使用几个构建工具，更是一种体系化的思维方式和工作流。 二、为什么需要前端工程化？在没有工程化的时代，前端开发面临诸多挑战：  开发效率低下：手动重复任务（如文件合并、压缩），环境搭建复杂。 代码质量参差不齐：缺乏统一的代码规范和质量检查机制，导致 Bug 增多，难以维护。 团队协作困难：不同成员的代码风格差异大，冲突频繁，交接成本高。 项目性能不佳：缺乏自动化优化手段（如图片压缩、按需加载），页面加载慢。 部署上线复杂：手动...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">536</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">229</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-Lodash%EF%BC%9F"><span class="toc-text">一、为什么需要 Lodash？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="toc-text">二、安装与使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85"><span class="toc-text">2.1 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%AF%BC%E5%85%A5%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="toc-text">2.2 导入与使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Lodash-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB%E4%B8%8E%E7%A4%BA%E4%BE%8B"><span class="toc-text">三、Lodash 核心功能分类与示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E9%9B%86%E5%90%88-Collections"><span class="toc-text">3.1 集合 (Collections)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%95%B0%E7%BB%84-Arrays"><span class="toc-text">3.2 数组 (Arrays)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%AF%B9%E8%B1%A1-Objects"><span class="toc-text">3.3 对象 (Objects)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E5%87%BD%E6%95%B0-Functions"><span class="toc-text">3.4 函数 (Functions)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E5%AD%97%E7%AC%A6%E4%B8%B2-Strings"><span class="toc-text">3.5 字符串 (Strings)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E6%95%B0%E5%80%BC-Numbers"><span class="toc-text">3.6 数值 (Numbers)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7-Utilities"><span class="toc-text">3.7 实用工具 (Utilities)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8-Chaining"><span class="toc-text">3.8 链式调用 (Chaining)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Lodash-%E4%B8%8E%E5%8E%9F%E7%94%9F-JavaScript-%E7%9A%84%E6%8A%89%E6%8B%A9"><span class="toc-text">四、Lodash 与原生 JavaScript 的抉择</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%BD%95%E6%97%B6%E9%80%89%E6%8B%A9-Lodash"><span class="toc-text">4.1 何时选择 Lodash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E4%BD%95%E6%97%B6%E5%81%8F%E5%90%91%E5%8E%9F%E7%94%9F-JavaScript"><span class="toc-text">4.2 何时偏向原生 JavaScript</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E8%B6%8B%E5%8A%BF"><span class="toc-text">4.3 趋势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%E5%AF%BC%E5%85%A5%E4%B8%8E-Tree-Shaking"><span class="toc-text">五、模块化导入与 Tree Shaking</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">六、总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/8fc7e3e72510/" title="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-28.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解"/></a><div class="content"><a class="title" href="/8fc7e3e72510/" title="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解">前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解</a><time datetime="2026-01-27T22:24:00.000Z" title="发表于 2026-01-28 06:24:00">2026-01-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/5341a0037256/" title="CSS-in-JS 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-14.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSS-in-JS 详解"/></a><div class="content"><a class="title" href="/5341a0037256/" title="CSS-in-JS 详解">CSS-in-JS 详解</a><time datetime="2026-01-25T22:24:00.000Z" title="发表于 2026-01-26 06:24:00">2026-01-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/0b52cb819619/" title="Git 核心对象：Commit, Tree, Blob 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-07.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git 核心对象：Commit, Tree, Blob 详解"/></a><div class="content"><a class="title" href="/0b52cb819619/" title="Git 核心对象：Commit, Tree, Blob 详解">Git 核心对象：Commit, Tree, Blob 详解</a><time datetime="2026-01-21T22:24:00.000Z" title="发表于 2026-01-22 06:24:00">2026-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/1d2a942bda1e/" title="Terraform 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-16.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Terraform 详解"/></a><div class="content"><a class="title" href="/1d2a942bda1e/" title="Terraform 详解">Terraform 详解</a><time datetime="2026-01-19T22:24:00.000Z" title="发表于 2026-01-20 06:24:00">2026-01-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/26cdb2447b3d/" title="WebView 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WebView 详解"/></a><div class="content"><a class="title" href="/26cdb2447b3d/" title="WebView 详解">WebView 详解</a><time datetime="2026-01-17T22:24:00.000Z" title="发表于 2026-01-18 06:24:00">2026-01-18</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-15.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/archives/2023/" target="_blank" title="🆕 2023">🆕 2023</a><a href="/archives/2024/" target="_blank" title="🆒 2024">🆒 2024</a><a href="/archives/2025/" target="_blank" title="👨‍👩‍👦 2025">👨‍👩‍👦 2025</a><a href="/archives/2026/" target="_blank" title="🆙 2026">🆙 2026</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="📁 分类">📁 分类</a><a href="/tags/" target="_blank" title="🔖 标签">🔖 标签</a><a href="/categories/" target="_blank" title="📽️ 时间线">📽️ 时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="💬 说说">💬 说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2026 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.9/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const parseViewBox = viewBox => {
    if (!viewBox) return null
    const parts = viewBox.trim().split(/[\s,]+/).map(n => Number(n))
    if (parts.length !== 4 || parts.some(n => Number.isNaN(n))) return null
    return parts
  }

  const getSvgViewBox = svg => {
    const attr = parseViewBox(svg.getAttribute('viewBox'))
    if (attr) return attr

    // Fallback: use bbox to build a viewBox
    try {
      const bbox = svg.getBBox()
      if (bbox && bbox.width && bbox.height) return [bbox.x, bbox.y, bbox.width, bbox.height]
    } catch (e) {
      // getBBox may fail on some edge cases; ignore
    }

    const w = Number(svg.getAttribute('width')) || 0
    const h = Number(svg.getAttribute('height')) || 0
    if (w > 0 && h > 0) return [0, 0, w, h]
    return [0, 0, 100, 100]
  }

  const setSvgViewBox = (svg, vb) => {
    svg.setAttribute('viewBox', `${vb[0]} ${vb[1]} ${vb[2]} ${vb[3]}`)
  }

  const clamp = (v, min, max) => Math.max(min, Math.min(max, v))

  const openSvgInNewTab = ({ source, initViewBox }) => {
    const getClonedSvg = () => {
      if (typeof source === 'string') {
        const template = document.createElement('template')
        template.innerHTML = source.trim()
        const svg = template.content.querySelector('svg')
        return svg ? svg.cloneNode(true) : null
      }
      if (source && typeof source.cloneNode === 'function') {
        return source.cloneNode(true)
      }
      return null
    }

    const clone = getClonedSvg()
    if (!clone) return
    if (initViewBox && initViewBox.length === 4) {
      clone.setAttribute('viewBox', initViewBox.join(' '))
    }
    if (!clone.getAttribute('xmlns')) clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg')
    if (!clone.getAttribute('xmlns:xlink') && clone.outerHTML.includes('xlink:')) {
      clone.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink')
    }
    // inject background to match current theme
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark'
    const bg = getComputedStyle(document.body).backgroundColor || (isDark ? '#1e1e1e' : '#ffffff')
    if (!clone.style.background) clone.style.background = bg

    const serializer = new XMLSerializer()
    const svgSource = serializer.serializeToString(clone)
    const htmlSource = `<!doctype html><html><head><meta charset="utf-8" />
      <style>
        html, body { width: 100%; height: 100%; margin: 0; display: flex; align-items: center; justify-content: center; background: ${bg}; }
        svg { max-width: 100%; max-height: 100%; height: auto; width: auto; }
      </style>
      </head><body>${svgSource}</body></html>`
    const blob = new Blob([htmlSource], { type: 'text/html;charset=utf-8' })
    const url = URL.createObjectURL(blob)
    window.open(url, '_blank', 'noopener')
    setTimeout(() => URL.revokeObjectURL(url), 30000)
  }

  const attachMermaidViewerButton = wrap => {
    let btn = wrap.querySelector('.mermaid-open-btn')
    if (!btn) {
      btn = document.createElement('button')
      btn.type = 'button'
      btn.className = 'mermaid-open-btn'
      wrap.appendChild(btn)
    }

    btn.innerHTML = '<i class="fa fa-search fa-fw" aria-hidden="true"></i>'

    if (!btn.__mermaidViewerBound) {
      btn.addEventListener('click', e => {
        e.preventDefault()
        e.stopPropagation()
        const svg = wrap.__mermaidOriginalSvg || wrap.querySelector('svg')
        if (!svg) return
        const initViewBox = wrap.__mermaidInitViewBox
        if (typeof svg === 'string') {
          openSvgInNewTab({ source: svg, initViewBox })
          return
        }
        openSvgInNewTab({ source: svg, initViewBox })
      })
      btn.__mermaidViewerBound = true
    }
  }

  // Zoom around a point (px, py) in the SVG viewport (in viewBox coordinates)
  const zoomAtPoint = (vb, factor, px, py) => {
    const w = vb[2] * factor
    const h = vb[3] * factor
    const nx = px - (px - vb[0]) * factor
    const ny = py - (py - vb[1]) * factor
    return [nx, ny, w, h]
  }

  const initMermaidGestures = wrap => {
    const svg = wrap.querySelector('svg')
    if (!svg) return

    // Ensure viewBox exists so gestures always work
    const initVb = getSvgViewBox(svg)
    wrap.__mermaidInitViewBox = initVb
    wrap.__mermaidCurViewBox = initVb.slice()
    setSvgViewBox(svg, initVb)

    // Avoid binding multiple times on themeChange/pjax
    if (wrap.__mermaidGestureBound) return
    wrap.__mermaidGestureBound = true

    // Helper: map client (viewport) coordinate -> viewBox coordinate
    const clientToViewBox = (clientX, clientY) => {
      const rect = svg.getBoundingClientRect()
      const vb = wrap.__mermaidCurViewBox || getSvgViewBox(svg)
      const x = vb[0] + (clientX - rect.left) * (vb[2] / rect.width)
      const y = vb[1] + (clientY - rect.top) * (vb[3] / rect.height)
      return { x, y, rect, vb }
    }

    const state = {
      pointers: new Map(),
      startVb: null,
      startDist: 0,
      startCenter: null
    }

    const clampVb = vb => {
      const init = wrap.__mermaidInitViewBox || vb
      const minW = init[2] * 0.1
      const maxW = init[2] * 10
      const minH = init[3] * 0.1
      const maxH = init[3] * 10
      vb[2] = clamp(vb[2], minW, maxW)
      vb[3] = clamp(vb[3], minH, maxH)
      return vb
    }

    const setCurVb = vb => {
      vb = clampVb(vb)
      wrap.__mermaidCurViewBox = vb
      setSvgViewBox(svg, vb)
    }

    const onPointerDown = e => {
      // Allow only primary button for mouse
      if (e.pointerType === 'mouse' && e.button !== 0) return
      svg.setPointerCapture(e.pointerId)
      state.pointers.set(e.pointerId, { x: e.clientX, y: e.clientY })

      if (state.pointers.size === 1) {
        state.startVb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
      } else if (state.pointers.size === 2) {
        const pts = [...state.pointers.values()]
        const dx = pts[0].x - pts[1].x
        const dy = pts[0].y - pts[1].y
        state.startDist = Math.hypot(dx, dy)
        state.startVb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
        state.startCenter = { x: (pts[0].x + pts[1].x) / 2, y: (pts[0].y + pts[1].y) / 2 }
      }
    }

    const onPointerMove = e => {
      if (!state.pointers.has(e.pointerId)) return
      state.pointers.set(e.pointerId, { x: e.clientX, y: e.clientY })

      // Pan with 1 pointer
      if (state.pointers.size === 1 && state.startVb) {
        const p = [...state.pointers.values()][0]
        const prev = { x: e.clientX - e.movementX, y: e.clientY - e.movementY }
        // movementX/Y unreliable on touch, compute from stored last position
        const last = wrap.__mermaidLastSinglePointer || p
        const dxClient = p.x - last.x
        const dyClient = p.y - last.y
        wrap.__mermaidLastSinglePointer = p

        const { rect } = clientToViewBox(p.x, p.y)
        const vb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
        const dx = dxClient * (vb[2] / rect.width)
        const dy = dyClient * (vb[3] / rect.height)
        setCurVb([vb[0] - dx, vb[1] - dy, vb[2], vb[3]])
        return
      }

      // Pinch zoom with 2 pointers
      if (state.pointers.size === 2 && state.startVb && state.startDist > 0) {
        const pts = [...state.pointers.values()]
        const dx = pts[0].x - pts[1].x
        const dy = pts[0].y - pts[1].y
        const dist = Math.hypot(dx, dy)
        if (!dist) return
        const factor = state.startDist / dist // dist bigger => zoom in (viewBox smaller)

        const cx = (pts[0].x + pts[1].x) / 2
        const cy = (pts[0].y + pts[1].y) / 2
        const centerClient = { x: cx, y: cy }

        const pxy = clientToViewBox(centerClient.x, centerClient.y)
        const cpx = pxy.x
        const cpy = pxy.y

        const vb = zoomAtPoint(state.startVb, factor, cpx, cpy)
        setCurVb(vb)
      }
    }

    const onPointerUpOrCancel = e => {
      state.pointers.delete(e.pointerId)
      if (state.pointers.size === 0) {
        state.startVb = null
        state.startDist = 0
        state.startCenter = null
        wrap.__mermaidLastSinglePointer = null
      } else if (state.pointers.size === 1) {
        // reset single pointer baseline to avoid jump
        wrap.__mermaidLastSinglePointer = [...state.pointers.values()][0]
      }
    }

    // Wheel zoom (mouse/trackpad)
    const onWheel = e => {
      // ctrlKey on mac trackpad pinch; we treat both as zoom
      e.preventDefault()
      const delta = e.deltaY
      const zoomFactor = delta > 0 ? 1.1 : 0.9
      const { x, y } = clientToViewBox(e.clientX, e.clientY)
      const vb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
      setCurVb(zoomAtPoint(vb, zoomFactor, x, y))
    }

    const onDblClick = () => {
      const init = wrap.__mermaidInitViewBox
      if (!init) return
      wrap.__mermaidCurViewBox = init.slice()
      setSvgViewBox(svg, init)
    }

    svg.addEventListener('pointerdown', onPointerDown)
    svg.addEventListener('pointermove', onPointerMove)
    svg.addEventListener('pointerup', onPointerUpOrCancel)
    svg.addEventListener('pointercancel', onPointerUpOrCancel)
    svg.addEventListener('wheel', onWheel, { passive: false })
    svg.addEventListener('dblclick', onDblClick)
  }

  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild

      // Clear old render (themeChange/pjax will rerun)
      const oldSvg = item.querySelector('svg')
      if (oldSvg) oldSvg.remove()
      item.__mermaidGestureBound = false

      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
        if (true) initMermaidGestures(item)
        item.__mermaidOriginalSvg = svg
        if (true) attachMermaidViewerButton(item)
      }


      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="ture"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      true
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div></body></html>