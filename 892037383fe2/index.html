<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MathJax 详解：在 Web 上优雅地渲染数学公式 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MathJax 是一个开源的 JavaScript 显示引擎，用于在所有现代浏览器中显示数学公式。它以高性能渲染高质量的排版，支持广泛使用的数学标记语言，如 LaTeX、MathML 和 AsciiMath。MathJax 的目标是让网页上的数学内容能够像桌面排版软件那样清晰、美观、易读，同时保持可访问性和可搜索性。  核心思想： MathJax 使得在浏览器中显示复杂的数学公式变得简单、美观且">
<meta property="og:type" content="article">
<meta property="og:title" content="MathJax 详解：在 Web 上优雅地渲染数学公式">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/892037383fe2/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="MathJax 是一个开源的 JavaScript 显示引擎，用于在所有现代浏览器中显示数学公式。它以高性能渲染高质量的排版，支持广泛使用的数学标记语言，如 LaTeX、MathML 和 AsciiMath。MathJax 的目标是让网页上的数学内容能够像桌面排版软件那样清晰、美观、易读，同时保持可访问性和可搜索性。  核心思想： MathJax 使得在浏览器中显示复杂的数学公式变得简单、美观且">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-02.jpg">
<meta property="article:published_time" content="2023-08-02T22:24:00.000Z">
<meta property="article:modified_time" content="2026-01-30T10:18:03.447Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="2023">
<meta property="article:tag" content="前端技术">
<meta property="article:tag" content="Markdown">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-02.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "MathJax 详解：在 Web 上优雅地渲染数学公式",
  "url": "https://blog.tbf1211.xx.kg/892037383fe2/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-02.jpg",
  "datePublished": "2023-08-02T22:24:00.000Z",
  "dateModified": "2026-01-30T10:18:03.447Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/892037383fe2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.9/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MathJax 详解：在 Web 上优雅地渲染数学公式',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">536</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">229</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-02.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">MathJax 详解：在 Web 上优雅地渲染数学公式</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">MathJax 详解：在 Web 上优雅地渲染数学公式</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2023-08-02T22:24:00.000Z" title="发表于 2023-08-03 06:24:00">2023-08-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/">前端技术</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/Markdown/">Markdown</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>10分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><strong>MathJax</strong> 是一个<strong>开源的 JavaScript 显示引擎</strong>，用于在所有现代浏览器中显示数学公式。它以高性能渲染高质量的排版，支持广泛使用的数学标记语言，如 <strong>LaTeX</strong>、<strong>MathML</strong> 和 <strong>AsciiMath</strong>。MathJax 的目标是让网页上的数学内容能够像桌面排版软件那样清晰、美观、易读，同时保持可访问性和可搜索性。</p>
</blockquote>
<div class="note info flat"><p><strong>核心思想：</strong> MathJax 使得在浏览器中显示复杂的数学公式变得<strong>简单、美观且无需安装任何插件或字体</strong>。它将数学标记语言转换为网页上可渲染的图形元素（通常是 HTML + CSS 或 SVG），确保跨平台和设备的显示一致性。</p>
</div>
<hr>
<h2 id="一、为什么选择-MathJax？"><a href="#一、为什么选择-MathJax？" class="headerlink" title="一、为什么选择 MathJax？"></a>一、为什么选择 MathJax？</h2><p>在 Web 上显示数学公式一直是一个挑战。传统的解决方案包括：</p>
<ol>
<li><strong>图片 (Images)</strong>：将公式渲染成图片。<ul>
<li><strong>缺点</strong>：不清晰（特别是缩放时）、不易编辑、不可搜索、不能复制文本、可访问性差（屏幕阅读器无法识别）。</li>
</ul>
</li>
<li><strong>纯文本 (Plain Text)</strong>：使用 ASCII 字符近似表示公式（如 <code>x^2 + y^2 = r^2</code>）。<ul>
<li><strong>缺点</strong>：可读性极差，无法表达复杂结构。</li>
</ul>
</li>
<li><strong>MathML (Mathematical Markup Language)</strong>：W3C 标准的 XML 标记语言。<ul>
<li><strong>优点</strong>：语义化。</li>
<li><strong>缺点</strong>：浏览器支持不一，编写复杂。</li>
</ul>
</li>
<li><strong>自定义字体 (Custom Fonts)</strong>：需要用户安装特定字体。<ul>
<li><strong>缺点</strong>：用户体验差，兼容性问题。</li>
</ul>
</li>
</ol>
<p>MathJax 旨在解决这些问题，提供一个<strong>一劳永逸</strong>的解决方案：</p>
<ul>
<li><strong>高质量排版</strong>：生成与桌面出版质量媲美的数学公式，清晰、美观。</li>
<li><strong>跨浏览器兼容</strong>：支持所有主流浏览器，无需插件。</li>
<li><strong>自适应缩放</strong>：公式可随页面文字自由缩放，且保持清晰。</li>
<li><strong>可访问性</strong>：支持屏幕阅读器，公式文本可复制。</li>
<li><strong>可搜索性</strong>：公式文本是 DOM 内容的一部分，可被搜索引擎索引。</li>
<li><strong>灵活性</strong>：支持多种输入格式 (LaTeX, MathML, AsciiMath) 和多种输出格式 (HTML+CSS, SVG, CHTML)。</li>
<li><strong>易于集成</strong>：只需几行 JavaScript 代码即可集成到任何网页中。</li>
</ul>
<h2 id="二、MathJax-的基本用法"><a href="#二、MathJax-的基本用法" class="headerlink" title="二、MathJax 的基本用法"></a>二、MathJax 的基本用法</h2><p>集成 MathJax 到你的网页非常简单，通常只需要在 HTML 文件的 <code>&lt;head&gt;</code> 或 <code>&lt;body&gt;</code> 标签中添加一个 <code>&lt;script&gt;</code> 标签。</p>
<h3 id="2-1-引入-MathJax-库"><a href="#2-1-引入-MathJax-库" class="headerlink" title="2.1 引入 MathJax 库"></a>2.1 引入 MathJax 库</h3><p>你可以从 MathJax 的 CDN (Content Delivery Network) 引入库文件。</p>
<p><strong>推荐方式 (MathJax v3):</strong><br>MathJax v3 引入了模块化和更快的加载速度。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>MathJax 示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">&quot;MathJax-script&quot;</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>MathJax 公式演示<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个行内公式：当 \(a \ne 0\) 时，方程 \(ax^2 + bx + c = 0\) 的解为 \(x = \frac&#123;-b \pm \sqrt&#123;b^2-4ac&#125;&#125;&#123;2a&#125;\)。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个块级公式：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    $$</span><br><span class="line">    \int_0^\infty \frac&#123;x^3&#125;&#123;e^x - 1&#125; dx = \frac&#123;\pi^4&#125;&#123;15&#125;</span><br><span class="line">    $$</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>你也可以使用传统的 LaTeX 块级公式分隔符：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    \[</span><br><span class="line">    \sum_&#123;n=1&#125;^\infty \frac&#123;1&#125;&#123;n^2&#125; = \frac&#123;\pi^2&#125;&#123;6&#125;</span><br><span class="line">    \]</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js</code>：这是一个包含 TeX (LaTeX)、MathML 输入和 CommonHTML 输出的 MathJax v3 主文件。</li>
<li><code>async</code> 属性：确保 MathJax 脚本异步加载，不阻塞页面渲染。</li>
<li><code>id=&quot;MathJax-script&quot;</code>：为了方便 MathJax 内部识别和管理。</li>
</ul>
<h3 id="2-2-配置-MathJax-可选"><a href="#2-2-配置-MathJax-可选" class="headerlink" title="2.2 配置 MathJax (可选)"></a>2.2 配置 MathJax (可选)</h3><p>MathJax 提供了丰富的配置选项，你可以通过 <code>MathJax.startup.extend()</code> 或 <code>MathJax.config</code> 对象进行自定义。</p>
<p><strong>示例：修改 LaTeX 分隔符</strong><br>默认情况下，MathJax 支持以下 LaTeX 分隔符：</p>
<ul>
<li><strong>行内公式 (Inline Math)</strong>：<code>\( ... \)</code> 或 <code>$ ... $</code> (需要启用)</li>
<li><strong>块级公式 (Display Math)</strong>：<code>\[ ... \]</code> 或 <code>$$ ... $$</code></li>
</ul>
<p>如果你想启用 <code>$ ... $</code> 作为行内公式分隔符，可以这样配置：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>MathJax 配置示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">MathJax</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tex</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">inlineMath</span>: [[<span class="string">&#x27;$&#x27;</span>, <span class="string">&#x27;$&#x27;</span>], [<span class="string">&#x27;\\(&#x27;</span>, <span class="string">&#x27;\\)&#x27;</span>]] <span class="comment">// 启用 $...$ 作为行内公式</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">svg</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fontCache</span>: <span class="string">&#x27;global&#x27;</span> <span class="comment">// SVG 输出的字体缓存策略</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">&quot;MathJax-script&quot;</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个用 $ 符号包围的行内公式：$E=mc^2$。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个用 \( \) 符号包围的行内公式：\(x^2+y^2=z^2\)。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>window.MathJax</code> 对象必须在 MathJax 脚本加载之前定义。</p>
<h2 id="三、数学标记语言：LaTeX-语法简介"><a href="#三、数学标记语言：LaTeX-语法简介" class="headerlink" title="三、数学标记语言：LaTeX 语法简介"></a>三、数学标记语言：LaTeX 语法简介</h2><p>MathJax 最常用且功能最强大的是对 <strong>LaTeX (TeX)</strong> 语法的支持。学习一些基本的 LaTeX 数学命令，你就能创建大多数常见公式。</p>
<h3 id="3-1-行内公式与块级公式"><a href="#3-1-行内公式与块级公式" class="headerlink" title="3.1 行内公式与块级公式"></a>3.1 行内公式与块级公式</h3><ul>
<li><strong>行内公式 (Inline Math)</strong>：嵌入在文本行中的公式。<ul>
<li>使用 <code>\( ... \)</code> 或 <code>$ ... $</code> (如果启用)。</li>
<li>示例：<code>\(E=mc^2\)</code> 显示为 $E&#x3D;mc^2$</li>
</ul>
</li>
<li><strong>块级公式 (Display Math)</strong>：独立显示在一行或多行中，通常居中显示。<ul>
<li>使用 <code>\[ ... \]</code> 或 <code>$$ ... $$</code>。</li>
<li>示例：<code>$$ \sum_&#123;i=1&#125;^n i = \frac&#123;n(n+1)&#125;&#123;2&#125; $$</code><br>$$ \sum_{i&#x3D;1}^n i &#x3D; \frac{n(n+1)}{2} $$</li>
</ul>
</li>
</ul>
<h3 id="3-2-常用数学符号与结构"><a href="#3-2-常用数学符号与结构" class="headerlink" title="3.2 常用数学符号与结构"></a>3.2 常用数学符号与结构</h3><table>
<thead>
<tr>
<th align="left">功能</th>
<th align="left">LaTeX 语法</th>
<th align="left">示例</th>
<th align="left">渲染效果</th>
</tr>
</thead>
<tbody><tr>
<td align="left">上下标</td>
<td align="left"><code>^</code> (上标), <code>_</code> (下标)</td>
<td align="left"><code>x^2</code>, <code>y_i</code>, <code>e^&#123;ax^2+b&#125;</code>, <code>x_&#123;ij&#125;</code></td>
<td align="left">$x^2$, $y_i$, $e^{ax^2+b}$, $x_{ij}$</td>
</tr>
<tr>
<td align="left">分数</td>
<td align="left"><code>\frac&#123;分子&#125;&#123;分母&#125;</code></td>
<td align="left"><code>\frac&#123;x+y&#125;&#123;2&#125;</code></td>
<td align="left">$\frac{x+y}{2}$</td>
</tr>
<tr>
<td align="left">根号</td>
<td align="left"><code>\sqrt&#123;内容&#125;</code>, <code>\sqrt[n]&#123;内容&#125;</code></td>
<td align="left"><code>\sqrt&#123;x^2+y^2&#125;</code>, <code>\sqrt[3]&#123;8&#125;</code></td>
<td align="left">$\sqrt{x^2+y^2}$, $\sqrt[3]{8}$</td>
</tr>
<tr>
<td align="left">积分</td>
<td align="left"><code>\int</code>, <code>\int_a^b</code></td>
<td align="left"><code>\int f(x)dx</code>, <code>\int_0^\infty e^&#123;-x&#125;dx</code></td>
<td align="left">$\int f(x)dx$, $\int_0^\infty e^{-x}dx$</td>
</tr>
<tr>
<td align="left">求和</td>
<td align="left"><code>\sum</code>, <code>\sum_&#123;i=1&#125;^n</code></td>
<td align="left"><code>\sum_&#123;i=1&#125;^n i</code>, <code>\sum_&#123;n=0&#125;^\infty \frac&#123;1&#125;&#123;n!&#125;</code></td>
<td align="left">$\sum_{i&#x3D;1}^n i$, $\sum_{n&#x3D;0}^\infty \frac{1}{n!}$</td>
</tr>
<tr>
<td align="left">希腊字母</td>
<td align="left"><code>\alpha</code>, <code>\beta</code>, <code>\Gamma</code></td>
<td align="left"><code>\alpha</code>, <code>\beta</code>, <code>\Gamma</code>, <code>\Delta</code></td>
<td align="left">$\alpha$, $\beta$, $\Gamma$, $\Delta$</td>
</tr>
<tr>
<td align="left">运算符</td>
<td align="left"><code>+</code>, <code>-</code>, <code>\times</code>, <code>\div</code>, <code>\pm</code></td>
<td align="left"><code>a \times b</code>, <code>p \pm q</code></td>
<td align="left">$a \times b$, $p \pm q$</td>
</tr>
<tr>
<td align="left">关系运算符</td>
<td align="left"><code>=</code>, <code>\ne</code>, <code>&lt;</code>, <code>&gt;</code>, <code>\le</code>, <code>\ge</code></td>
<td align="left"><code>A \ne B</code>, <code>x \le y</code></td>
<td align="left">$A \ne B$, $x \le y$</td>
</tr>
<tr>
<td align="left">括号</td>
<td align="left"><code>( )</code>, <code>[ ]</code>, <code>&#123; &#125;</code>, <code>| |</code></td>
<td align="left"><code>(x+y)</code>, <code>[a,b]</code>, <code>&#123; z &#125;</code>, <code>|v|</code></td>
<td align="left">$(x+y)$, $[a,b]$, ${ z }$, $|v|$</td>
</tr>
<tr>
<td align="left">自动匹配括号</td>
<td align="left"><code>\left( ... \right)</code></td>
<td align="left"><code>\left(\frac&#123;1&#125;&#123;x&#125; + \frac&#123;1&#125;&#123;y&#125;\right)</code></td>
<td align="left">$\left(\frac{1}{x} + \frac{1}{y}\right)$</td>
</tr>
<tr>
<td align="left">矩阵</td>
<td align="left"><code>\begin&#123;pmatrix&#125; ... \end&#123;pmatrix&#125;</code></td>
<td align="left">见下方示例</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">矢量</td>
<td align="left"><code>\vec&#123;v&#125;</code>, <code>\overrightarrow&#123;AB&#125;</code></td>
<td align="left"><code>\vec&#123;v&#125;</code>, <code>\overrightarrow&#123;AB&#125;</code></td>
<td align="left">$\vec{v}$, $\overrightarrow{AB}$</td>
</tr>
</tbody></table>
<p><strong>矩阵示例：</strong></p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line">A = <span class="keyword">\begin</span>&#123;pmatrix&#125;</span><br><span class="line">a <span class="built_in">&amp;</span> b <span class="keyword">\\</span></span><br><span class="line">c <span class="built_in">&amp;</span> d</span><br><span class="line"><span class="keyword">\end</span>&#123;pmatrix&#125;</span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<p>$$<br>A &#x3D; \begin{pmatrix}<br>a &amp; b \<br>c &amp; d<br>\end{pmatrix}<br>$$</p>
<p><strong>分段函数示例：</strong></p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br><span class="line">f(x) = <span class="keyword">\begin</span>&#123;cases&#125;</span><br><span class="line">x<span class="built_in">^</span>2 <span class="built_in">&amp;</span> <span class="keyword">\text</span>&#123;if &#125; x &lt; 0 <span class="keyword">\\</span></span><br><span class="line">x+1 <span class="built_in">&amp;</span> <span class="keyword">\text</span>&#123;if &#125; x <span class="keyword">\ge</span> 0</span><br><span class="line"><span class="keyword">\end</span>&#123;cases&#125;</span><br><span class="line"><span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<p>$$<br>f(x) &#x3D; \begin{cases}<br>x^2 &amp; \text{if } x &lt; 0 \<br>x+1 &amp; \text{if } x \ge 0<br>\end{cases}<br>$$</p>
<p><strong>常用函数</strong>：<code>\sin</code>, <code>\cos</code>, <code>\log</code>, <code>\ln</code>, <code>\lim</code> 等会自动以正体显示。<br>例如：<code>\sin(x)</code>, <code>\lim_&#123;x \to 0&#125; \frac&#123;\sin x&#125;&#123;x&#125;</code><br>显示为：$\sin(x)$, $\lim_{x \to 0} \frac{\sin x}{x}$</p>
<h3 id="3-3-文本与空格"><a href="#3-3-文本与空格" class="headerlink" title="3.3 文本与空格"></a>3.3 文本与空格</h3><ul>
<li><strong>文本</strong>：在数学模式中插入普通文本，使用 <code>\text&#123;...&#125;</code> 或 <code>\mbox&#123;...&#125;</code>。<ul>
<li>示例：<code>$$ \sum_&#123;i=1&#125;^n i = \frac&#123;n(n+1)&#125;&#123;2&#125; \text&#123; for &#125; n \ge 1 $$</code><br>$$ \sum_{i&#x3D;1}^n i &#x3D; \frac{n(n+1)}{2} \text{ for } n \ge 1 $$</li>
</ul>
</li>
<li><strong>空格</strong>：LaTeX 会自动调整公式中的空格。如果需要手动调整，可以使用：<ul>
<li><code>\,</code> (小空格), <code>\;</code> (中空格), <code>\quad</code> (大空格), <code>\qquad</code> (特大空格)</li>
<li><code>\!</code> (负空格)</li>
</ul>
</li>
</ul>
<h2 id="四、MathJax-的渲染输出"><a href="#四、MathJax-的渲染输出" class="headerlink" title="四、MathJax 的渲染输出"></a>四、MathJax 的渲染输出</h2><p>MathJax 可以根据浏览器和配置选择不同的输出格式：</p>
<ol>
<li><strong>CommonHTML (CHTML)</strong>：MathJax v3 的默认输出。<ul>
<li>使用 HTML 和 CSS 渲染数学公式。</li>
<li><strong>优点</strong>：渲染速度快，占用内存少，打印效果好。</li>
<li><strong>缺点</strong>：在某些旧浏览器或特定字体环境下可能显示不如 SVG 完美。</li>
</ul>
</li>
<li><strong>SVG (Scalable Vector Graphics)</strong>：<ul>
<li>使用 SVG 图形渲染公式。</li>
<li><strong>优点</strong>：缩放无锯齿，显示效果非常锐利，特别适合高分辨率屏幕。</li>
<li><strong>缺点</strong>：可能比 CHTML 稍慢，生成的 DOM 结构更复杂。</li>
</ul>
</li>
<li><strong>MathML</strong>：如果浏览器原生支持 MathML，MathJax 也可以选择直接输出 MathML。<ul>
<li><strong>优点</strong>：语义化，原生支持。</li>
<li><strong>缺点</strong>：浏览器支持不一致，且通常 MathJax 的渲染效果优于原生 MathML。</li>
</ul>
</li>
</ol>
<p>在 MathJax 配置中，你可以指定首选的输出格式。例如，要强制使用 SVG 输出：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">MathJax</span> = &#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">renderActions</span>: &#123;</span><br><span class="line">            <span class="attr">add</span>: [</span><br><span class="line">                [<span class="string">&#x27;CHTMLorSVG&#x27;</span>, <span class="number">10</span>, <span class="keyword">function</span> (<span class="params">doc</span>) &#123;</span><br><span class="line">                    <span class="keyword">const</span> preferred = <span class="title class_">MathJax</span>.<span class="property">startup</span>.<span class="property">output</span>;</span><br><span class="line">                    <span class="keyword">const</span> chtml = preferred.<span class="property">constructor</span>.<span class="property">name</span> === <span class="string">&#x27;CHTML&#x27;</span>;</span><br><span class="line">                    doc.<span class="property">outputJax</span> = (chtml ? <span class="title class_">MathJax</span>.<span class="property">startup</span>.<span class="property">get</span><span class="string">&#x27;) : preferred);</span></span><br><span class="line"><span class="string">                &#125;, &#x27;</span><span class="string">&#x27;, true],</span></span><br><span class="line"><span class="string">            ]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    // 或者更简单的 MathJax v3 配置</span></span><br><span class="line"><span class="string">    output: &#123;</span></span><br><span class="line"><span class="string">        force: &#x27;</span>svg<span class="string">&#x27; // 强制使用 SVG 输出</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;;</span></span><br></pre></td></tr></table></figure>
<p>或者，直接引入 SVG 相关的组件：<br><code>https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js</code></p>
<h2 id="五、在-Markdown-中使用-MathJax"><a href="#五、在-Markdown-中使用-MathJax" class="headerlink" title="五、在 Markdown 中使用 MathJax"></a>五、在 Markdown 中使用 MathJax</h2><p>大多数支持 MathJax 的 Markdown 渲染器或平台 (如 GitHub Pages、Jupyter Notebooks、一些博客系统) 都允许你在 Markdown 文件中直接使用 LaTeX 语法来撰写公式。</p>
<p><strong>行内公式</strong>：使用 <code>$E=mc^2$</code> 或 <code>\(E=mc^2\)</code><br><strong>块级公式</strong>：使用 <code>$$ \int_0^1 x^2 dx = \frac&#123;1&#125;&#123;3&#125; $$</code> 或 <code>\[ \frac&#123;d&#125;&#123;dx&#125; \sin x = \cos x \]</code></p>
<p><strong>注意事项</strong>：</p>
<ul>
<li><strong>GitHub Pages</strong>：默认不直接支持 MathJax。你需要手动在 <code>_layouts/default.html</code> 或其他布局文件中添加 MathJax 的 <code>&lt;script&gt;</code> 标签。</li>
<li><strong>Hexo, Hugo 等博客框架</strong>：通常有插件或主题配置来启用 MathJax&#x2F;KaTeX 支持。</li>
<li><strong>Markdown 编辑器</strong>：有些编辑器内置了 MathJax 预览功能，如 Typora、VS Code 搭配插件。</li>
</ul>
<h2 id="六、高级特性与配置"><a href="#六、高级特性与配置" class="headerlink" title="六、高级特性与配置"></a>六、高级特性与配置</h2><ul>
<li><strong>自定义宏 (Macros)</strong>：定义自己的 LaTeX 命令，简化常用或复杂的表达式。</li>
<li><strong>自动编号 (Automatic Numbering)</strong>：为块级公式自动添加编号。</li>
<li><strong>辅助功能 (Accessibility)</strong>：支持 MathML 结构，方便屏幕阅读器识别。</li>
<li><strong>扩展包 (Extensions)</strong>：支持多种 LaTeX 扩展包 (如 <code>amsmath</code>、<code>amssymb</code>)，提供更多数学符号和环境。</li>
<li><strong>动态内容</strong>：MathJax 提供了 API 来处理通过 JavaScript 动态加载或修改的数学内容。</li>
</ul>
<h2 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h2><p>MathJax 是一个强大而灵活的工具，它彻底改变了在 Web 上呈现数学公式的方式。通过利用其对 LaTeX 的广泛支持，开发者和内容创作者可以轻松地在网页上创建出专业、高质量且易于访问的数学内容，无需担心浏览器兼容性或复杂的排版问题。无论你是教育工作者、科学家、工程师，还是只是想在博客中分享一些数学思想，MathJax 都是你的理想选择。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/892037383fe2/">https://blog.tbf1211.xx.kg/892037383fe2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/2023/">2023</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/">前端技术</a><a class="post-meta__tags" href="/tags/Markdown/">Markdown</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-02.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/b965e23c1c33/" title="TypeScript 编码规范详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-20.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">TypeScript 编码规范详解</div></div><div class="info-2"><div class="info-item-1"> TypeScript 编码规范 旨在提供一套指导原则和最佳实践，以确保 TypeScript 代码的一致性、可读性、可维护性、类型安全性和团队协作效率。TypeScript 作为 JavaScript 的超集，引入了静态类型和更多现代语言特性。因此，其编码规范不仅要遵循 JavaScript 的最佳实践，还要充分利用 TypeScript 独有的类型系统优势。本规范结合了社区广泛接受的实践（如 Google TypeScript Style Guide、Airbnb TypeScript Style Guide）和 TypeScript 官方建议，以帮助开发者编写高质量的 TypeScript 代码。  核心思想：充分利用 TypeScript 的类型系统，提高代码的可维护性和健壮性。保持代码简洁、明确，易于理解和调试。遵循一致的风格，减少不必要的复杂性。   一、TypeScript 编码哲学理解 TypeScript 的设计哲学对于编写高质量代码至关重要：  渐进增强 (Gradual Typing)：TypeScript 允许你在 JavaScript 代码库中逐步引入类...</div></div></div></a><a class="pagination-related" href="/0fe4ebbe0d37/" title="Fish Shell 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-15.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Fish Shell 详解</div></div><div class="info-2"><div class="info-item-1"> Fish Shell (Friendly Interactive Shell) 是一个专为交互式使用而设计的类 Unix Shell。与 Bash 或 Zsh 等传统 Shell 不同，Fish 的核心设计哲学是提供开箱即用 (out-of-the-box) 的用户友好体验，它默认集成了许多现代化功能，如语法高亮、自动建议和 Web 配置界面，致力于让命令行工作更加便捷和高效，而无需复杂的配置。  核心思想：“Friendly” 是 Fish Shell 的核心，它预装了许多提升用户体验的功能，减少了用户手动配置的负担，让命令行操作更加智能、直观。   一、为什么选择 Fish Shell？传统的 Shell (如 Bash, Zsh) 功能强大且高度可定制，但它们的许多高级特性需要用户投入大量时间进行配置，例如：  语法高亮：需要额外安装插件。 自动建议：需要额外安装插件，如 Zsh 的 zsh-autosuggestions。 灵活的Tab补全：需要复杂的配置。 更友好的错误提示：通常需要手动配置。  对于许多用户而言，尤其是那些刚接触命令行或希望减少配置时间的开发者，这些...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/188567a93394/" title="Markdown 语法详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-08.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-31</div><div class="info-item-2">Markdown 语法详解</div></div><div class="info-2"><div class="info-item-1"> Markdown 是一种轻量级标记语言 (lightweight markup language)，它允许人们使用易读易写的纯文本格式编写文档，然后可以将其转换为结构化的 HTML（或其他格式）。Markdown 的目标是实现**“易于阅读、易于编写”**，其语法设计旨在尽可能地保持可读性，即使是在纯文本状态下也能够清晰地理解其内容。  核心思想：通过简单的符号（如 #, *, - 等）来表示文本的格式和结构，专注于内容创作本身，而非复杂的排版细节。   一、Markdown 简介Markdown 于 2004 年由 John Gruber 创立，其灵感来源于电子邮件的纯文本标记约定。它的主要优势在于：  简洁易学：语法简单直观，上手快。 纯文本：内容以纯文本形式存储，与平台无关，具有极佳的兼容性和可移植性。 版本控制友好：纯文本文件易于在版本控制系统（如 Git）中进行差异比较和管理。 易于转换：可以轻松转换为 HTML、PDF 等多种格式。 专注于内容：让作者将注意力集中在内容而不是格式上。  1.1 Markdown 的“方言”与标准由于 Markdown 规范最初并未完...</div></div></div></a><a class="pagination-related" href="/ab44062dd349/" title="深入理解虚拟 DOM 与 Vue 核心补丁机制：patch(), patchVnode(), updateChildren()"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-11.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-15</div><div class="info-item-2">深入理解虚拟 DOM 与 Vue 核心补丁机制：patch(), patchVnode(), updateChildren()</div></div><div class="info-2"><div class="info-item-1"> 现代前端框架如 Vue 和 React 之所以能提供高性能和优秀的开发体验，很大程度上要归功于 虚拟 DOM (Virtual DOM) 及其配套的 Diff 算法 (补丁机制)。虚拟 DOM 充当了真实 DOM 的一个轻量级抽象层，而 Vue 的补丁机制则负责将虚拟 DOM 的变化高效地反映到真实的浏览器 DOM 上。本文将深入解析虚拟 DOM 的概念，并聚焦 Vue 2 中驱动这一机制的三个核心函数：patch(), patchVnode(), 和 updateChildren()，并辅以 Mermaid 流程图进行可视化说明。  “虚拟 DOM 是前端性能优化的基石，而 Vue 的 patch() 系列函数正是将这块基石转化为实际渲染效率的魔法棒。”   一、虚拟 DOM (Virtual DOM) 再探1.1 什么是虚拟 DOM？虚拟 DOM 是一个用 JavaScript 对象来模拟真实 DOM 节点的数据结构。它是一个轻量级的、内存中的真实 DOM 树的抽象。每一个虚拟节点（VNode）都包含构建一个真实 DOM 节点所需的所有信息，例如：  tag：标签名（如 d...</div></div></div></a><a class="pagination-related" href="/40c57ff5cb61/" title="Pug(前Jade)模板引擎详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-32.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-17</div><div class="info-item-2">Pug(前Jade)模板引擎详解</div></div><div class="info-2"><div class="info-item-1"> Pug（发音 &#x2F;pʌɡ&#x2F;），前身为 Jade，是一个高性能的 Node.js 模板引擎。它以其简洁、富有表现力的语法而闻名，旨在让 HTML 编写变得更加高效和愉快。Pug 摒弃了传统 HTML 的尖括号和闭合标签，转而使用缩进和基于文本的语法，这使得模板文件更小、更易读、也更不易出错。  核心思想：Pug 通过简洁的缩进语法替代冗长的 HTML 标签，提供强大的动态数据渲染、代码重用和条件逻辑功能。   一、Pug 简介1.1 什么是模板引擎？模板引擎是一种将数据填充到预定义模板中以生成最终输出（通常是 HTML 字符串）的工具。它将页面的结构（模板）与数据分离，使得前端开发更加模块化和可维护。 1.2 Pug 的特点 独特语法：使用缩进表示嵌套关系，无需关闭标签。 简洁明了：代码量显著少于对应的 HTML。 强大功能：支持变量、循环、条件判断、Mixin（类似于函数或组件）、包含（文件复用）、布局继承等高级特性。 编译到 HTML：Pug 模板最终会被编译成标准的 HTML。 Node.js 支持：作为 Node.js 的模板引擎，Pug 完美集成于 E...</div></div></div></a><a class="pagination-related" href="/ecbfce34b2dd/" title="基于TypeScript封装Axios成通用工具类"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-01.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-01</div><div class="info-item-2">基于TypeScript封装Axios成通用工具类</div></div><div class="info-2"><div class="info-item-1"> Axios 是一款基于 Promise 的 HTTP 客户端，可用于浏览器和 Node.js 环境。它提供了丰富的功能，如请求&#x2F;响应拦截器、取消请求、自动转换 JSON 等，使其成为前端和后端 HTTP 请求的流行选择。然而，在大型项目中直接使用裸露的 Axios 实例往往不够高效和灵活。通过 TypeScript 封装 Axios 成通用工具类，我们可以实现：统一的请求配置、自动的错误处理、请求&#x2F;响应的标准化、方便的业务逻辑扩展，以及通过 TypeScript 带来的类型安全和代码智能提示，从而提升开发效率和代码质量。  核心思想：将 Axios 的强大功能（如拦截器、配置）整合到一个类型安全的 TypeScript 类中，提供一个统一、可配置、易用的 HTTP 请求接口，并处理常见的业务场景，从而提升项目的可维护性和开发体验。    一、为什么需要封装 Axios？直接使用 Axios 发送请求虽然简单，但在实际项目中会遇到以下问题：  重复配置：每个请求都可能需要设置 baseURL、timeout、headers 等，导致大量重复代码。 错误处理不统...</div></div></div></a><a class="pagination-related" href="/d883c2e5bd14/" title="端到端测试 (E2E Testing) 深度解析"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-05.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-23</div><div class="info-item-2">端到端测试 (E2E Testing) 深度解析</div></div><div class="info-2"><div class="info-item-1"> 端到端测试 (End-to-End Testing, E2E Testing) 是一种软件测试方法，旨在模拟真实用户在应用程序中的完整交互路径。它涵盖了从用户界面 (UI) 到后端服务、数据库乃至任何外部依赖的整个应用堆栈。E2E 测试的目标是验证应用程序的所有组件和子系统作为一个整体是否协同工作，并满足业务需求，确保关键的用户流程能够顺畅地完成。  核心思想：从用户的视角出发，检验应用程序的每一个环节，确保整个系统在真实使用场景下能够稳定、正确地运行。   一、为什么需要端到端测试？在现代复杂的分布式系统中，一个应用程序通常包含前端界面、多个后端服务、数据库、缓存、消息队列以及第三方集成等众多组件。尽管单元测试和集成测试能够有效验证单个模块和它们之间的局部交互，但它们无法全面覆盖以下场景：  完整用户流程验证：用户从登录、操作数据到登出的整个业务流程是否顺畅。 系统集成问题：不同服务、数据库、缓存和外部API之间的实际交互是否正确。 UI 与后端的一致性：前端页面渲染的数据是否与后端返回的数据一致，以及前端操作能否正确触发后端逻辑。 环境配置问题：部署到准生产或生产环境后，各...</div></div></div></a><a class="pagination-related" href="/8258d22937ed/" title="Vue3 ref和reactive对比解析：深入理解响应式数据"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-09.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-04</div><div class="info-item-2">Vue3 ref和reactive对比解析：深入理解响应式数据</div></div><div class="info-2"><div class="info-item-1"> 在 Vue 3 的 Composition API 中，ref 和 reactive 是创建响应式状态的两个核心函数。它们都旨在将普通 JavaScript 数据转换为响应式数据，以便在数据变化时自动触发视图更新。然而，它们在处理数据类型、访问方式和底层机制上存在显著差异。理解这些差异对于有效地使用 Composition API 至关重要。  核心思想：ref 用于处理原始值和对象，通过 .value 访问其内部值，而 reactive 专门用于处理对象，直接访问对象的属性，且底层基于 Proxy 实现。   一、ref：处理原始值和对象ref 函数接受一个内部值（inner value），并返回一个响应式的 ref 对象。这个 ref 对象只有一个 value 属性，用来指向内部值。 1.1 定义和用法 定义：ref 可以接收任何类型的值作为参数：原始值 (string, number, boolean, null, undefined, Symbol) 或对象 (Object, Array)。 访问：在 JavaScript 中访问 ref 对象时，需要通过其 .valu...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">536</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">229</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-MathJax%EF%BC%9F"><span class="toc-text">一、为什么选择 MathJax？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81MathJax-%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text">二、MathJax 的基本用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%BC%95%E5%85%A5-MathJax-%E5%BA%93"><span class="toc-text">2.1 引入 MathJax 库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E9%85%8D%E7%BD%AE-MathJax-%E5%8F%AF%E9%80%89"><span class="toc-text">2.2 配置 MathJax (可选)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%95%B0%E5%AD%A6%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80%EF%BC%9ALaTeX-%E8%AF%AD%E6%B3%95%E7%AE%80%E4%BB%8B"><span class="toc-text">三、数学标记语言：LaTeX 语法简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E8%A1%8C%E5%86%85%E5%85%AC%E5%BC%8F%E4%B8%8E%E5%9D%97%E7%BA%A7%E5%85%AC%E5%BC%8F"><span class="toc-text">3.1 行内公式与块级公式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%B8%B8%E7%94%A8%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E4%B8%8E%E7%BB%93%E6%9E%84"><span class="toc-text">3.2 常用数学符号与结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E6%96%87%E6%9C%AC%E4%B8%8E%E7%A9%BA%E6%A0%BC"><span class="toc-text">3.3 文本与空格</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81MathJax-%E7%9A%84%E6%B8%B2%E6%9F%93%E8%BE%93%E5%87%BA"><span class="toc-text">四、MathJax 的渲染输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%9C%A8-Markdown-%E4%B8%AD%E4%BD%BF%E7%94%A8-MathJax"><span class="toc-text">五、在 Markdown 中使用 MathJax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-text">六、高级特性与配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">七、总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/8fc7e3e72510/" title="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-28.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解"/></a><div class="content"><a class="title" href="/8fc7e3e72510/" title="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解">前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解</a><time datetime="2026-01-27T22:24:00.000Z" title="发表于 2026-01-28 06:24:00">2026-01-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/5341a0037256/" title="CSS-in-JS 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-14.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSS-in-JS 详解"/></a><div class="content"><a class="title" href="/5341a0037256/" title="CSS-in-JS 详解">CSS-in-JS 详解</a><time datetime="2026-01-25T22:24:00.000Z" title="发表于 2026-01-26 06:24:00">2026-01-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/0b52cb819619/" title="Git 核心对象：Commit, Tree, Blob 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-07.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git 核心对象：Commit, Tree, Blob 详解"/></a><div class="content"><a class="title" href="/0b52cb819619/" title="Git 核心对象：Commit, Tree, Blob 详解">Git 核心对象：Commit, Tree, Blob 详解</a><time datetime="2026-01-21T22:24:00.000Z" title="发表于 2026-01-22 06:24:00">2026-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/1d2a942bda1e/" title="Terraform 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-16.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Terraform 详解"/></a><div class="content"><a class="title" href="/1d2a942bda1e/" title="Terraform 详解">Terraform 详解</a><time datetime="2026-01-19T22:24:00.000Z" title="发表于 2026-01-20 06:24:00">2026-01-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/26cdb2447b3d/" title="WebView 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WebView 详解"/></a><div class="content"><a class="title" href="/26cdb2447b3d/" title="WebView 详解">WebView 详解</a><time datetime="2026-01-17T22:24:00.000Z" title="发表于 2026-01-18 06:24:00">2026-01-18</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-02.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/archives/2023/" target="_blank" title="🆕 2023">🆕 2023</a><a href="/archives/2024/" target="_blank" title="🆒 2024">🆒 2024</a><a href="/archives/2025/" target="_blank" title="👨‍👩‍👦 2025">👨‍👩‍👦 2025</a><a href="/archives/2026/" target="_blank" title="🆙 2026">🆙 2026</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="📁 分类">📁 分类</a><a href="/tags/" target="_blank" title="🔖 标签">🔖 标签</a><a href="/categories/" target="_blank" title="📽️ 时间线">📽️ 时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="💬 说说">💬 说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2026 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.9/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        loader: {
          load: [
            // Four font extension packages (optional)
            //- '[tex]/bbm',
            //- '[tex]/bboldx',
            //- '[tex]/dsfont',
            '[tex]/mhchem'
          ],
          paths: {
            'mathjax-newcm': '[mathjax]/../@mathjax/mathjax-newcm-font',

            //- // Four font extension packages (optional)
            //- 'mathjax-bbm-extension': '[mathjax]/../@mathjax/mathjax-bbm-font-extension',
            //- 'mathjax-bboldx-extension': '[mathjax]/../@mathjax/mathjax-bboldx-font-extension',
            //- 'mathjax-dsfont-extension': '[mathjax]/../@mathjax/mathjax-dsfont-font-extension',
            'mathjax-mhchem-extension': '[mathjax]/../@mathjax/mathjax-mhchem-font-extension'
          }
        },
        output: {
          font: 'mathjax-newcm',
        },
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
          packages: {
            '[+]': [
              'mhchem'
            ]
          }
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          menuOptions: {
            settings: {
              enrich: false  // Turn off Braille and voice narration text automatic generation
            }
          },
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@4.1.0/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const parseViewBox = viewBox => {
    if (!viewBox) return null
    const parts = viewBox.trim().split(/[\s,]+/).map(n => Number(n))
    if (parts.length !== 4 || parts.some(n => Number.isNaN(n))) return null
    return parts
  }

  const getSvgViewBox = svg => {
    const attr = parseViewBox(svg.getAttribute('viewBox'))
    if (attr) return attr

    // Fallback: use bbox to build a viewBox
    try {
      const bbox = svg.getBBox()
      if (bbox && bbox.width && bbox.height) return [bbox.x, bbox.y, bbox.width, bbox.height]
    } catch (e) {
      // getBBox may fail on some edge cases; ignore
    }

    const w = Number(svg.getAttribute('width')) || 0
    const h = Number(svg.getAttribute('height')) || 0
    if (w > 0 && h > 0) return [0, 0, w, h]
    return [0, 0, 100, 100]
  }

  const setSvgViewBox = (svg, vb) => {
    svg.setAttribute('viewBox', `${vb[0]} ${vb[1]} ${vb[2]} ${vb[3]}`)
  }

  const clamp = (v, min, max) => Math.max(min, Math.min(max, v))

  const openSvgInNewTab = ({ source, initViewBox }) => {
    const getClonedSvg = () => {
      if (typeof source === 'string') {
        const template = document.createElement('template')
        template.innerHTML = source.trim()
        const svg = template.content.querySelector('svg')
        return svg ? svg.cloneNode(true) : null
      }
      if (source && typeof source.cloneNode === 'function') {
        return source.cloneNode(true)
      }
      return null
    }

    const clone = getClonedSvg()
    if (!clone) return
    if (initViewBox && initViewBox.length === 4) {
      clone.setAttribute('viewBox', initViewBox.join(' '))
    }
    if (!clone.getAttribute('xmlns')) clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg')
    if (!clone.getAttribute('xmlns:xlink') && clone.outerHTML.includes('xlink:')) {
      clone.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink')
    }
    // inject background to match current theme
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark'
    const bg = getComputedStyle(document.body).backgroundColor || (isDark ? '#1e1e1e' : '#ffffff')
    if (!clone.style.background) clone.style.background = bg

    const serializer = new XMLSerializer()
    const svgSource = serializer.serializeToString(clone)
    const htmlSource = `<!doctype html><html><head><meta charset="utf-8" />
      <style>
        html, body { width: 100%; height: 100%; margin: 0; display: flex; align-items: center; justify-content: center; background: ${bg}; }
        svg { max-width: 100%; max-height: 100%; height: auto; width: auto; }
      </style>
      </head><body>${svgSource}</body></html>`
    const blob = new Blob([htmlSource], { type: 'text/html;charset=utf-8' })
    const url = URL.createObjectURL(blob)
    window.open(url, '_blank', 'noopener')
    setTimeout(() => URL.revokeObjectURL(url), 30000)
  }

  const attachMermaidViewerButton = wrap => {
    let btn = wrap.querySelector('.mermaid-open-btn')
    if (!btn) {
      btn = document.createElement('button')
      btn.type = 'button'
      btn.className = 'mermaid-open-btn'
      wrap.appendChild(btn)
    }

    btn.innerHTML = '<i class="fa fa-search fa-fw" aria-hidden="true"></i>'

    if (!btn.__mermaidViewerBound) {
      btn.addEventListener('click', e => {
        e.preventDefault()
        e.stopPropagation()
        const svg = wrap.__mermaidOriginalSvg || wrap.querySelector('svg')
        if (!svg) return
        const initViewBox = wrap.__mermaidInitViewBox
        if (typeof svg === 'string') {
          openSvgInNewTab({ source: svg, initViewBox })
          return
        }
        openSvgInNewTab({ source: svg, initViewBox })
      })
      btn.__mermaidViewerBound = true
    }
  }

  // Zoom around a point (px, py) in the SVG viewport (in viewBox coordinates)
  const zoomAtPoint = (vb, factor, px, py) => {
    const w = vb[2] * factor
    const h = vb[3] * factor
    const nx = px - (px - vb[0]) * factor
    const ny = py - (py - vb[1]) * factor
    return [nx, ny, w, h]
  }

  const initMermaidGestures = wrap => {
    const svg = wrap.querySelector('svg')
    if (!svg) return

    // Ensure viewBox exists so gestures always work
    const initVb = getSvgViewBox(svg)
    wrap.__mermaidInitViewBox = initVb
    wrap.__mermaidCurViewBox = initVb.slice()
    setSvgViewBox(svg, initVb)

    // Avoid binding multiple times on themeChange/pjax
    if (wrap.__mermaidGestureBound) return
    wrap.__mermaidGestureBound = true

    // Helper: map client (viewport) coordinate -> viewBox coordinate
    const clientToViewBox = (clientX, clientY) => {
      const rect = svg.getBoundingClientRect()
      const vb = wrap.__mermaidCurViewBox || getSvgViewBox(svg)
      const x = vb[0] + (clientX - rect.left) * (vb[2] / rect.width)
      const y = vb[1] + (clientY - rect.top) * (vb[3] / rect.height)
      return { x, y, rect, vb }
    }

    const state = {
      pointers: new Map(),
      startVb: null,
      startDist: 0,
      startCenter: null
    }

    const clampVb = vb => {
      const init = wrap.__mermaidInitViewBox || vb
      const minW = init[2] * 0.1
      const maxW = init[2] * 10
      const minH = init[3] * 0.1
      const maxH = init[3] * 10
      vb[2] = clamp(vb[2], minW, maxW)
      vb[3] = clamp(vb[3], minH, maxH)
      return vb
    }

    const setCurVb = vb => {
      vb = clampVb(vb)
      wrap.__mermaidCurViewBox = vb
      setSvgViewBox(svg, vb)
    }

    const onPointerDown = e => {
      // Allow only primary button for mouse
      if (e.pointerType === 'mouse' && e.button !== 0) return
      svg.setPointerCapture(e.pointerId)
      state.pointers.set(e.pointerId, { x: e.clientX, y: e.clientY })

      if (state.pointers.size === 1) {
        state.startVb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
      } else if (state.pointers.size === 2) {
        const pts = [...state.pointers.values()]
        const dx = pts[0].x - pts[1].x
        const dy = pts[0].y - pts[1].y
        state.startDist = Math.hypot(dx, dy)
        state.startVb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
        state.startCenter = { x: (pts[0].x + pts[1].x) / 2, y: (pts[0].y + pts[1].y) / 2 }
      }
    }

    const onPointerMove = e => {
      if (!state.pointers.has(e.pointerId)) return
      state.pointers.set(e.pointerId, { x: e.clientX, y: e.clientY })

      // Pan with 1 pointer
      if (state.pointers.size === 1 && state.startVb) {
        const p = [...state.pointers.values()][0]
        const prev = { x: e.clientX - e.movementX, y: e.clientY - e.movementY }
        // movementX/Y unreliable on touch, compute from stored last position
        const last = wrap.__mermaidLastSinglePointer || p
        const dxClient = p.x - last.x
        const dyClient = p.y - last.y
        wrap.__mermaidLastSinglePointer = p

        const { rect } = clientToViewBox(p.x, p.y)
        const vb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
        const dx = dxClient * (vb[2] / rect.width)
        const dy = dyClient * (vb[3] / rect.height)
        setCurVb([vb[0] - dx, vb[1] - dy, vb[2], vb[3]])
        return
      }

      // Pinch zoom with 2 pointers
      if (state.pointers.size === 2 && state.startVb && state.startDist > 0) {
        const pts = [...state.pointers.values()]
        const dx = pts[0].x - pts[1].x
        const dy = pts[0].y - pts[1].y
        const dist = Math.hypot(dx, dy)
        if (!dist) return
        const factor = state.startDist / dist // dist bigger => zoom in (viewBox smaller)

        const cx = (pts[0].x + pts[1].x) / 2
        const cy = (pts[0].y + pts[1].y) / 2
        const centerClient = { x: cx, y: cy }

        const pxy = clientToViewBox(centerClient.x, centerClient.y)
        const cpx = pxy.x
        const cpy = pxy.y

        const vb = zoomAtPoint(state.startVb, factor, cpx, cpy)
        setCurVb(vb)
      }
    }

    const onPointerUpOrCancel = e => {
      state.pointers.delete(e.pointerId)
      if (state.pointers.size === 0) {
        state.startVb = null
        state.startDist = 0
        state.startCenter = null
        wrap.__mermaidLastSinglePointer = null
      } else if (state.pointers.size === 1) {
        // reset single pointer baseline to avoid jump
        wrap.__mermaidLastSinglePointer = [...state.pointers.values()][0]
      }
    }

    // Wheel zoom (mouse/trackpad)
    const onWheel = e => {
      // ctrlKey on mac trackpad pinch; we treat both as zoom
      e.preventDefault()
      const delta = e.deltaY
      const zoomFactor = delta > 0 ? 1.1 : 0.9
      const { x, y } = clientToViewBox(e.clientX, e.clientY)
      const vb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
      setCurVb(zoomAtPoint(vb, zoomFactor, x, y))
    }

    const onDblClick = () => {
      const init = wrap.__mermaidInitViewBox
      if (!init) return
      wrap.__mermaidCurViewBox = init.slice()
      setSvgViewBox(svg, init)
    }

    svg.addEventListener('pointerdown', onPointerDown)
    svg.addEventListener('pointermove', onPointerMove)
    svg.addEventListener('pointerup', onPointerUpOrCancel)
    svg.addEventListener('pointercancel', onPointerUpOrCancel)
    svg.addEventListener('wheel', onWheel, { passive: false })
    svg.addEventListener('dblclick', onDblClick)
  }

  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild

      // Clear old render (themeChange/pjax will rerun)
      const oldSvg = item.querySelector('svg')
      if (oldSvg) oldSvg.remove()
      item.__mermaidGestureBound = false

      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
        if (true) initMermaidGestures(item)
        item.__mermaidOriginalSvg = svg
        if (true) attachMermaidViewerButton(item)
      }


      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="ture"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      true
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div></body></html>