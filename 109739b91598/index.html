<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Python Matplotlib 详解 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Matplotlib 是一个用于创建静态、动态和交互式可视化在 Python 中的综合库。它提供了强大的工具集，用于生成各种出版质量级别的图表，从简单的线图、散点图到复杂的3D图表和动画。它是 Python 科学计算生态系统（如 NumPy, SciPy, Pandas）中不可或缺的一部分。  核心思想：提供一个灵活、可高度定制的绘图框架，让开发者能够精确控制图表的每一个细节，以满足从数据探索到">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Matplotlib 详解">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/109739b91598/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="Matplotlib 是一个用于创建静态、动态和交互式可视化在 Python 中的综合库。它提供了强大的工具集，用于生成各种出版质量级别的图表，从简单的线图、散点图到复杂的3D图表和动画。它是 Python 科学计算生态系统（如 NumPy, SciPy, Pandas）中不可或缺的一部分。  核心思想：提供一个灵活、可高度定制的绘图框架，让开发者能够精确控制图表的每一个细节，以满足从数据探索到">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-25.jpg">
<meta property="article:published_time" content="2023-02-21T22:24:00.000Z">
<meta property="article:modified_time" content="2026-02-04T09:47:15.076Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="2023">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="数据处理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-25.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Python Matplotlib 详解",
  "url": "https://blog.tbf1211.xx.kg/109739b91598/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-25.jpg",
  "datePublished": "2023-02-21T22:24:00.000Z",
  "dateModified": "2026-02-04T09:47:15.076Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/109739b91598/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.9/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Python Matplotlib 详解',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">544</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">230</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-25.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">Python Matplotlib 详解</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Python Matplotlib 详解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2023-02-21T22:24:00.000Z" title="发表于 2023-02-22 06:24:00">2023-02-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/%E5%BA%93/">库</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>14分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><strong>Matplotlib</strong> 是一个用于创建静态、动态和交互式可视化在 <strong>Python</strong> 中的综合库。它提供了强大的工具集，用于生成各种出版质量级别的图表，从简单的线图、散点图到复杂的3D图表和动画。它是 Python 科学计算生态系统（如 NumPy, SciPy, Pandas）中不可或缺的一部分。</p>
</blockquote>
<div class="note info flat"><p>核心思想：<strong>提供一个灵活、可高度定制的绘图框架，让开发者能够精确控制图表的每一个细节，以满足从数据探索到学术出版的各种可视化需求。</strong></p>
</div>
<hr>
<h2 id="一、为什么需要-Matplotlib？"><a href="#一、为什么需要-Matplotlib？" class="headerlink" title="一、为什么需要 Matplotlib？"></a>一、为什么需要 Matplotlib？</h2><p>在数据分析、科学研究、工程计算等领域，数据可视化是理解数据、发现模式和传达洞察的关键。然而，手动绘制图表或使用通用工具往往效率低下且难以定制。Matplotlib 旨在解决以下问题：</p>
<ol>
<li><strong>数据理解</strong>：海量数据以表格形式呈现时难以理解，通过图表能够直观展示数据的分布、趋势和关系。</li>
<li><strong>报告与演示</strong>：需要高质量、专业级的图表用于学术论文、商业报告或演示文稿。</li>
<li><strong>定制化需求</strong>：通用绘图工具可能无法满足特定的可视化需求，需要能够对图表的每个元素（颜色、字体、线条、布局等）进行精确控制。</li>
<li><strong>编程集成</strong>：希望在 Python 程序中直接生成和操作图表，与其他数据处理库（如 Pandas, NumPy）无缝集成。</li>
<li><strong>跨平台兼容性</strong>：在不同操作系统和环境中生成一致的图表。</li>
</ol>
<p>Matplotlib 的出现，提供了一个强大、灵活且广泛支持的解决方案：</p>
<ul>
<li><strong>全面的绘图能力</strong>：支持几乎所有常见的2D图表类型（线图、散点图、柱状图、饼图、直方图等）和部分3D图表。</li>
<li><strong>高度可定制</strong>：可以控制图表的每一个细节，包括颜色、线条样式、标记、轴标签、标题、图例、画布大小、分辨率等。</li>
<li><strong>集成性强</strong>：与 NumPy、Pandas 等科学计算库紧密集成，数据可以直接用于绘图。</li>
<li><strong>多后端支持</strong>：支持多种图形后端，可以生成 PNG、JPG、PDF、SVG 等静态图片，也可以在 GUI 框架（如 Tkinter, PyQt, wxPython）中嵌入交互式图表。</li>
<li><strong>活跃的社区</strong>：拥有庞大而活跃的用户社区，丰富的文档和教程，遇到问题时容易找到帮助。</li>
</ul>
<h2 id="二、Matplotlib-的核心概念"><a href="#二、Matplotlib-的核心概念" class="headerlink" title="二、Matplotlib 的核心概念"></a>二、Matplotlib 的核心概念</h2><p>理解 Matplotlib 的核心概念对于高效使用它至关重要。</p>
<ol>
<li><p><strong>Figure (图)</strong></p>
<ul>
<li><strong>定义</strong>：<code>Figure</code> 是最顶层的容器，可以理解为一个独立的窗口或画布。它包含了所有图表元素，如一个或多个 <code>Axes</code>、标题、图例、颜色条等。</li>
<li><strong>作用</strong>：管理整个图表的生命周期和属性，如大小、分辨率、背景色等。</li>
</ul>
</li>
<li><p><strong>Axes (子图&#x2F;坐标系)</strong></p>
<ul>
<li><strong>定义</strong>：<code>Axes</code> 是实际绘图的区域，包含数据空间（Data Limits）和坐标轴（<code>Axis</code>）。一个 <code>Figure</code> 可以包含一个或多个 <code>Axes</code> 对象。</li>
<li><strong>作用</strong>：负责管理数据点的绘制、坐标轴的刻度、标签、网格线以及绘图的类型（如线图、散点图）。</li>
</ul>
</li>
<li><p><strong>Artist (艺术元素)</strong></p>
<ul>
<li><strong>定义</strong>：<code>Artist</code> 是 <code>Figure</code> 和 <code>Axes</code> 内部所有可见元素的基类。包括 <code>Text</code> 对象（标题、标签）、<code>Line2D</code> 对象（线、标记）、<code>Collection</code> 对象（散点、柱状图）、<code>Patch</code> 对象（多边形、矩形）等。</li>
<li><strong>作用</strong>：所有在图表上“画”出来的东西都是 <code>Artist</code>。</li>
</ul>
</li>
<li><p><strong>Axis (坐标轴)</strong></p>
<ul>
<li><strong>定义</strong>：<code>Axis</code> 是 <code>Axes</code> 的组成部分，负责处理刻度线（Ticks）、刻度标签（Tick Labels）和轴标签（Axis Label）。每个 <code>Axes</code> 通常有两个 <code>Axis</code>（x 轴和 y 轴）。</li>
<li><strong>作用</strong>：定义数据的度量和表示。</li>
</ul>
</li>
<li><p><strong>Pyplot (模块)</strong></p>
<ul>
<li><strong>定义</strong>：<code>matplotlib.pyplot</code> 是 Matplotlib 的一个模块，它提供了一个 MATLAB 风格的接口，用于快速、简洁地创建图表。它会自动创建 <code>Figure</code> 和 <code>Axes</code>，使得初学者能够快速上手。</li>
<li><strong>作用</strong>：提供便捷的函数，如 <code>plt.plot()</code>, <code>plt.scatter()</code>, <code>plt.title()</code>, <code>plt.show()</code> 等。</li>
</ul>
</li>
<li><p><strong>Backend (后端)</strong></p>
<ul>
<li><strong>定义</strong>：Matplotlib 支持多种后端，用于将生成的图表渲染到不同的输出介质。</li>
<li><strong>作用</strong>：<ul>
<li><strong>交互式后端</strong>：例如 <code>TkAgg</code>, <code>Qt5Agg</code>，用于在 GUI 窗口中显示图表并支持交互操作。</li>
<li><strong>非交互式后端</strong>：例如 <code>Agg</code> (PNG), <code>PDF</code>, <code>SVG</code>，用于生成图片文件而不显示窗口。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="三、Matplotlib-架构与工作流程"><a href="#三、Matplotlib-架构与工作流程" class="headerlink" title="三、Matplotlib 架构与工作流程"></a>三、Matplotlib 架构与工作流程</h2><h3 id="3-1-架构图"><a href="#3-1-架构图" class="headerlink" title="3.1 架构图"></a>3.1 架构图</h3><p>Matplotlib 的架构可以看作一个层次结构，从抽象到具体：</p>
<div class="mermaid-wrap"><pre class="mermaid-src" data-config="{}" hidden>
    graph TD
    A[&quot;Figure (Container for everything)&quot;] --&gt; B(Canvas &#x2F; Renderer)
    B --&gt; C(Backend - e.g., TkAgg, Qt5Agg, Agg)

    A --&gt; D(Axes - Plotting region)
    D --&gt; E(X-Axis)
    D --&gt; F(Y-Axis)
    D --&gt; G(Artist - Everything visible in Axes)
    G --&gt; H1(Line2D - Lines, Markers)
    G --&gt; H2(Text - Titles, Labels, Annotations)
    G --&gt; H3(Patch - Rectangles, Polygons)
    G --&gt; H4(Collection - Scatters, Bars)
    A --&gt; H5(Figure Title)
    A --&gt; H6(Legend)
    A --&gt; H7(Colorbar)
  </pre></div>

<h3 id="3-2-工作流程-推荐：Object-Oriented-接口"><a href="#3-2-工作流程-推荐：Object-Oriented-接口" class="headerlink" title="3.2 工作流程 (推荐：Object-Oriented 接口)"></a>3.2 工作流程 (推荐：Object-Oriented 接口)</h3><p>一个典型的 Matplotlib 绘图流程（使用 Object-Oriented 接口，更推荐用于复杂图表）如下：</p>
<div class="mermaid-wrap"><pre class="mermaid-src" data-config="{}" hidden>
    sequenceDiagram
    participant App as 应用程序
    participant MPL as Matplotlib (pyplot &#x2F; objects)
    participant Data as 数据 (NumPy&#x2F;Pandas)
    participant Backend as 图形后端

    App-&gt;&gt;MPL: 1. 导入 matplotlib.pyplot 和 numpy
    App-&gt;&gt;Data: 2. 准备数据 (e.g., numpy.linspace, random data)

    App-&gt;&gt;MPL: 3. 创建 Figure 和 Axes 对象 (fig, ax &#x3D; plt.subplots())
    MPL--&gt;&gt;App: 返回 fig, ax 引用

    App-&gt;&gt;ax: 4. 调用 Axes 对象的绘图方法 (e.g., ax.plot(x, y), ax.scatter(x, y))
    ax-&gt;&gt;G: 创建 Artist 对象 (Line2D, PathCollection etc.)

    App-&gt;&gt;ax: 5. 设置 Axes 属性 (e.g., ax.set_title(), ax.set_xlabel(), ax.legend())
    ax-&gt;&gt;G: 创建或修改 Artist 对象 (Text, Legend)

    App-&gt;&gt;fig: 6. 设置 Figure 属性 (e.g., fig.suptitle(), fig.set_size_inches())

    App-&gt;&gt;fig: 7. 保存图表 (fig.savefig(&#39;plot.png&#39;))
    fig-&gt;&gt;Backend: 8. 渲染图表到文件

    App-&gt;&gt;MPL: 9. 显示图表 (plt.show())
    MPL-&gt;&gt;Backend: 10. 激活交互式后端，显示窗口

    Note over App,Backend: 用户与图表进行交互 (缩放, 平移)

    App-&gt;&gt;MPL: 11. 释放资源 (窗口关闭)
  </pre></div>

<h2 id="四、Matplotlib-入门与基本用法"><a href="#四、Matplotlib-入门与基本用法" class="headerlink" title="四、Matplotlib 入门与基本用法"></a>四、Matplotlib 入门与基本用法</h2><h3 id="4-1-安装"><a href="#4-1-安装" class="headerlink" title="4.1 安装"></a>4.1 安装</h3><p>使用 pip 安装 Matplotlib：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install matplotlib numpy pandas</span><br></pre></td></tr></table></figure>

<h3 id="4-2-接口风格"><a href="#4-2-接口风格" class="headerlink" title="4.2 接口风格"></a>4.2 接口风格</h3><p>Matplotlib 主要有两种使用接口：</p>
<ol>
<li><strong>Pyplot 接口 (pyplot interface)</strong>：提供类似 MATLAB 的函数集合，方便快速绘图。自动管理 Figure 和 Axes。</li>
<li><strong>Object-Oriented (OO) 接口</strong>：明确创建 Figure 和 Axes 对象，并通过这些对象的方法进行操作。提供更细粒度的控制，推荐用于复杂或多子图的情况。</li>
</ol>
<p>本文档主要推荐并使用 <strong>Object-Oriented 接口</strong>。</p>
<h3 id="4-3-最小示例：简单的线图"><a href="#4-3-最小示例：简单的线图" class="headerlink" title="4.3 最小示例：简单的线图"></a>4.3 最小示例：简单的线图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 准备数据</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">100</span>) <span class="comment"># 生成 0 到 10 之间 100 个等间距的点</span></span><br><span class="line">y1 = np.sin(x)</span><br><span class="line">y2 = np.cos(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 创建 Figure 和 Axes 对象 (推荐的 OO 接口)</span></span><br><span class="line"><span class="comment"># fig 是 Figure 对象，ax 是 Axes 对象</span></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">8</span>, <span class="number">4</span>)) <span class="comment"># figsize 设置图表大小 (英寸)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 在 Axes 上绘制数据</span></span><br><span class="line">ax.plot(x, y1, label=<span class="string">&#x27;sin(x)&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>, linestyle=<span class="string">&#x27;-&#x27;</span>, linewidth=<span class="number">2</span>)</span><br><span class="line">ax.plot(x, y2, label=<span class="string">&#x27;cos(x)&#x27;</span>, color=<span class="string">&#x27;red&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>, linewidth=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 设置 Axes 属性 (标题、标签、图例、网格)</span></span><br><span class="line">ax.set_title(<span class="string">&#x27;Sine and Cosine Waves&#x27;</span>, fontsize=<span class="number">16</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;X-axis&#x27;</span>, fontsize=<span class="number">12</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Y-axis&#x27;</span>, fontsize=<span class="number">12</span>)</span><br><span class="line">ax.legend(fontsize=<span class="number">10</span>) <span class="comment"># 显示图例</span></span><br><span class="line">ax.grid(<span class="literal">True</span>, linestyle=<span class="string">&#x27;:&#x27;</span>, alpha=<span class="number">0.7</span>) <span class="comment"># 显示网格线</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 设置 Axes 的 X/Y 轴范围 (可选)</span></span><br><span class="line">ax.set_xlim(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">ax.set_ylim(-<span class="number">1.1</span>, <span class="number">1.1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. (可选) 设置 Figure 属性</span></span><br><span class="line">fig.suptitle(<span class="string">&#x27;My First Matplotlib Plot&#x27;</span>, fontsize=<span class="number">18</span>, color=<span class="string">&#x27;darkgreen&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 保存图表 (可选)</span></span><br><span class="line">plt.savefig(<span class="string">&#x27;sine_cosine_waves.png&#x27;</span>, dpi=<span class="number">300</span>, bbox_inches=<span class="string">&#x27;tight&#x27;</span>) <span class="comment"># dpi 设置分辨率，bbox_inches=&#x27;tight&#x27; 移除白边</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 8. 显示图表</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h2 id="五、Matplotlib-常用-SQL-操作方法-图表类型与定制"><a href="#五、Matplotlib-常用-SQL-操作方法-图表类型与定制" class="headerlink" title="五、Matplotlib 常用 SQL 操作方法 (图表类型与定制)"></a>五、Matplotlib 常用 SQL 操作方法 (图表类型与定制)</h2><h3 id="5-1-线图-Line-Plot"><a href="#5-1-线图-Line-Plot" class="headerlink" title="5.1 线图 (Line Plot)"></a>5.1 线图 (Line Plot)</h3><p><code>ax.plot()</code> 是最基本的绘图函数，用于绘制线和&#x2F;或点。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例沿用上面的数据 x, y1, y2</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.plot(x, y1, <span class="string">&#x27;g^&#x27;</span>, label=<span class="string">&#x27;sin(x) with triangles&#x27;</span>) <span class="comment"># &#x27;g^&#x27; 是格式字符串，表示绿色三角形标记</span></span><br><span class="line">ax.plot(x, y2, <span class="string">&#x27;b--&#x27;</span>, label=<span class="string">&#x27;cos(x) dashed line&#x27;</span>)   <span class="comment"># &#x27;b--&#x27; 表示蓝色虚线</span></span><br><span class="line">ax.set_title(<span class="string">&#x27;Line Plot with Markers and Styles&#x27;</span>)</span><br><span class="line">ax.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="5-2-散点图-Scatter-Plot"><a href="#5-2-散点图-Scatter-Plot" class="headerlink" title="5.2 散点图 (Scatter Plot)"></a>5.2 散点图 (Scatter Plot)</h3><p><code>ax.scatter()</code> 用于绘制散点图，通常用于显示两个变量之间的关系。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">np.random.seed(<span class="number">42</span>)</span><br><span class="line">num_points = <span class="number">50</span></span><br><span class="line">x_scatter = np.random.rand(num_points) * <span class="number">10</span></span><br><span class="line">y_scatter = np.random.rand(num_points) * <span class="number">10</span></span><br><span class="line">colors = np.random.rand(num_points) <span class="comment"># 颜色映射</span></span><br><span class="line">sizes = (np.random.rand(num_points) * <span class="number">20</span>)**<span class="number">2</span> <span class="comment"># 大小映射</span></span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">7</span>, <span class="number">6</span>))</span><br><span class="line">scatter = ax.scatter(x_scatter, y_scatter, c=colors, s=sizes, alpha=<span class="number">0.7</span>, cmap=<span class="string">&#x27;viridis&#x27;</span>, edgecolors=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;Scatter Plot&#x27;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;X-value&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Y-value&#x27;</span>)</span><br><span class="line">fig.colorbar(scatter, label=<span class="string">&#x27;Color Scale&#x27;</span>) <span class="comment"># 添加颜色条</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="5-3-柱状图-Bar-Chart"><a href="#5-3-柱状图-Bar-Chart" class="headerlink" title="5.3 柱状图 (Bar Chart)"></a>5.3 柱状图 (Bar Chart)</h3><p><code>ax.bar()</code> 用于绘制垂直柱状图，<code>ax.barh()</code> 用于绘制水平柱状图。适用于比较不同类别的数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">categories = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>]</span><br><span class="line">values = np.random.randint(<span class="number">10</span>, <span class="number">100</span>, <span class="built_in">len</span>(categories))</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.bar(categories, values, color=[<span class="string">&#x27;skyblue&#x27;</span>, <span class="string">&#x27;lightcoral&#x27;</span>, <span class="string">&#x27;lightgreen&#x27;</span>, <span class="string">&#x27;gold&#x27;</span>, <span class="string">&#x27;lightgray&#x27;</span>], edgecolor=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;Bar Chart of Categories&#x27;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Category&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Value&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="5-4-直方图-Histogram"><a href="#5-4-直方图-Histogram" class="headerlink" title="5.4 直方图 (Histogram)"></a>5.4 直方图 (Histogram)</h3><p><code>ax.hist()</code> 用于绘制直方图，显示数据分布。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">data = np.random.randn(<span class="number">1000</span>) <span class="comment"># 生成 1000 个标准正态分布的随机数</span></span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"><span class="comment"># bins=30 表示将数据分成 30 个区间</span></span><br><span class="line"><span class="comment"># alpha=0.7 设置透明度</span></span><br><span class="line"><span class="comment"># edgecolor=&#x27;black&#x27; 设置柱子边框颜色</span></span><br><span class="line">ax.hist(data, bins=<span class="number">30</span>, alpha=<span class="number">0.7</span>, color=<span class="string">&#x27;purple&#x27;</span>, edgecolor=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;Histogram of Random Data&#x27;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Value&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Frequency&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="5-5-饼图-Pie-Chart"><a href="#5-5-饼图-Pie-Chart" class="headerlink" title="5.5 饼图 (Pie Chart)"></a>5.5 饼图 (Pie Chart)</h3><p><code>ax.pie()</code> 用于绘制饼图，显示各部分占总体的比例。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sizes = [<span class="number">15</span>, <span class="number">30</span>, <span class="number">45</span>, <span class="number">10</span>]</span><br><span class="line">labels = [<span class="string">&#x27;Frogs&#x27;</span>, <span class="string">&#x27;Hogs&#x27;</span>, <span class="string">&#x27;Dogs&#x27;</span>, <span class="string">&#x27;Logs&#x27;</span>]</span><br><span class="line">colors = [<span class="string">&#x27;gold&#x27;</span>, <span class="string">&#x27;yellowgreen&#x27;</span>, <span class="string">&#x27;lightcoral&#x27;</span>, <span class="string">&#x27;lightskyblue&#x27;</span>]</span><br><span class="line">explode = (<span class="number">0</span>, <span class="number">0.1</span>, <span class="number">0</span>, <span class="number">0</span>) <span class="comment"># &#x27;Hogs&#x27; 分离出来</span></span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">6</span>, <span class="number">6</span>))</span><br><span class="line">ax.pie(sizes, explode=explode, labels=labels, colors=colors,</span><br><span class="line">       autopct=<span class="string">&#x27;%1.1f%%&#x27;</span>, shadow=<span class="literal">True</span>, startangle=<span class="number">140</span>)</span><br><span class="line">ax.axis(<span class="string">&#x27;equal&#x27;</span>) <span class="comment"># 确保饼图是圆的</span></span><br><span class="line">ax.set_title(<span class="string">&#x27;Pie Chart of Animal Distribution&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="5-6-多个子图-Subplots"><a href="#5-6-多个子图-Subplots" class="headerlink" title="5.6 多个子图 (Subplots)"></a>5.6 多个子图 (Subplots)</h3><p><code>plt.subplots()</code> 可以创建包含多个 <code>Axes</code> 的 Figure，方便在一个 Figure 中展示多个图表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">fig, axes = plt.subplots(nrows=<span class="number">2</span>, ncols=<span class="number">2</span>, figsize=(<span class="number">10</span>, <span class="number">8</span>)) <span class="comment"># 2行2列子图</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一个子图 (左上)</span></span><br><span class="line">axes[<span class="number">0</span>, <span class="number">0</span>].plot(x, y1, color=<span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line">axes[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">&#x27;Sine Wave&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二个子图 (右上)</span></span><br><span class="line">axes[<span class="number">0</span>, <span class="number">1</span>].scatter(x_scatter, y_scatter, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">axes[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">&#x27;Random Scatter&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三个子图 (左下)</span></span><br><span class="line">axes[<span class="number">1</span>, <span class="number">0</span>].bar(categories, values, color=<span class="string">&#x27;green&#x27;</span>)</span><br><span class="line">axes[<span class="number">1</span>, <span class="number">0</span>].set_title(<span class="string">&#x27;Category Values&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第四个子图 (右下)</span></span><br><span class="line">axes[<span class="number">1</span>, <span class="number">1</span>].hist(data, bins=<span class="number">20</span>, color=<span class="string">&#x27;orange&#x27;</span>)</span><br><span class="line">axes[<span class="number">1</span>, <span class="number">1</span>].set_title(<span class="string">&#x27;Data Histogram&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig.suptitle(<span class="string">&#x27;Multiple Subplots Example&#x27;</span>, fontsize=<span class="number">16</span>) <span class="comment"># Figure 的总标题</span></span><br><span class="line">plt.tight_layout(rect=[<span class="number">0</span>, <span class="number">0.03</span>, <span class="number">1</span>, <span class="number">0.95</span>]) <span class="comment"># 调整子图间距，防止重叠</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="5-7-3D-绘图-3D-Plotting"><a href="#5-7-3D-绘图-3D-Plotting" class="headerlink" title="5.7 3D 绘图 (3D Plotting)"></a>5.7 3D 绘图 (3D Plotting)</h3><p>Matplotlib 的 <code>mplot3d</code> 工具包支持三维绘图。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>, <span class="number">8</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>, projection=<span class="string">&#x27;3d&#x27;</span>) <span class="comment"># 创建一个3D子图</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备 3D 数据</span></span><br><span class="line">X = np.arange(-<span class="number">5</span>, <span class="number">5</span>, <span class="number">0.25</span>)</span><br><span class="line">Y = np.arange(-<span class="number">5</span>, <span class="number">5</span>, <span class="number">0.25</span>)</span><br><span class="line">X, Y = np.meshgrid(X, Y)</span><br><span class="line">R = np.sqrt(X**<span class="number">2</span> + Y**<span class="number">2</span>)</span><br><span class="line">Z = np.sin(R)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制 3D 曲面图</span></span><br><span class="line">ax.plot_surface(X, Y, Z, cmap=<span class="string">&#x27;viridis&#x27;</span>)</span><br><span class="line">ax.set_title(<span class="string">&#x27;3D Surface Plot&#x27;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;X-axis&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Y-axis&#x27;</span>)</span><br><span class="line">ax.set_zlabel(<span class="string">&#x27;Z-axis&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h2 id="六、Matplotlib-的优缺点与适用场景"><a href="#六、Matplotlib-的优缺点与适用场景" class="headerlink" title="六、Matplotlib 的优缺点与适用场景"></a>六、Matplotlib 的优缺点与适用场景</h2><h3 id="6-1-优点："><a href="#6-1-优点：" class="headerlink" title="6.1 优点："></a>6.1 优点：</h3><ol>
<li><strong>极度灵活和可定制</strong>：可以控制图表的每一个元素，实现各种复杂和专业级的可视化。</li>
<li><strong>功能全面</strong>：支持多种2D和3D图表类型，以及图像处理、动画等高级功能。</li>
<li><strong>出版质量</strong>：能够生成高分辨率的图表，满足学术论文和专业报告的要求。</li>
<li><strong>与科学栈集成</strong>：与 NumPy、Pandas 等 Python 科学计算库无缝集成，数据处理和可视化流程顺畅。</li>
<li><strong>多后端支持</strong>：可生成多种格式的静态图片，也可嵌入到各种 GUI 应用中。</li>
<li><strong>社区和生态</strong>：拥有庞大的用户群和丰富的资源，许多其他高级可视化库（如 Seaborn）也基于 Matplotlib 构建。</li>
</ol>
<h3 id="6-2-缺点："><a href="#6-2-缺点：" class="headerlink" title="6.2 缺点："></a>6.2 缺点：</h3><ol>
<li><strong>学习曲线陡峭</strong>：对于复杂的图表和精细的定制，需要深入理解其对象模型和大量 API，初学者可能会感到复杂。</li>
<li><strong>默认样式不够美观</strong>：相较于 Seaborn 或 Plotly 等库，Matplotlib 的默认图表样式可能不够现代和美观，需要手动调整。</li>
<li><strong>代码冗长</strong>：即使是简单的图表，也可能需要多行代码来设置标题、标签等，尤其是使用 OO 接口时。</li>
<li><strong>交互性有限</strong>：虽然支持基本的交互，但与专门的交互式可视化库（如 Plotly, Bokeh）相比，其交互能力较弱。</li>
</ol>
<h3 id="6-3-适用场景："><a href="#6-3-适用场景：" class="headerlink" title="6.3 适用场景："></a>6.3 适用场景：</h3><ul>
<li><strong>科学研究和工程绘图</strong>：需要生成高精度、可定制的学术图表。</li>
<li><strong>数据探索和原型设计</strong>：快速绘制各种图表以理解数据。</li>
<li><strong>自定义可视化需求</strong>：当其他库无法满足特定绘图需求时，Matplotlib 提供极致的灵活性。</li>
<li><strong>与其他 Python 库集成</strong>：作为数据分析流程中不可或缺的可视化组件。</li>
<li><strong>嵌入式图表</strong>：在桌面应用程序中嵌入动态或静态图表。</li>
</ul>
<h2 id="七、安全性考虑"><a href="#七、安全性考虑" class="headerlink" title="七、安全性考虑"></a>七、安全性考虑</h2><p>Matplotlib 本身是一个数据可视化库，其主要功能是绘制图表，因此其直接的安全风险相对较低。然而，在使用 Matplotlib 时，仍需注意以下几点：</p>
<ol>
<li><strong>数据源安全</strong>：确保输入 Matplotlib 的数据是可信的。如果数据来自不受信任的来源，恶意数据可能导致：<ul>
<li><strong>资源消耗</strong>：绘制极其庞大或复杂的图表可能会消耗大量内存和 CPU，导致拒绝服务 (DoS)。</li>
<li><strong>视觉欺骗</strong>：精心构造的数据和图表可能误导用户，传达错误信息。</li>
</ul>
</li>
<li><strong>文件操作安全</strong>：当使用 <code>plt.savefig()</code> 等函数保存图表到文件时：<ul>
<li><strong>路径验证</strong>：确保保存路径是安全的，防止路径遍历攻击，即避免用户通过输入 <code>../../malicious.png</code> 将文件保存到非预期位置。</li>
<li><strong>权限管理</strong>：应用程序写入文件的目录应具有适当的权限，防止无意中覆盖重要文件。</li>
</ul>
</li>
<li><strong>交互式后端安全</strong>：虽然不常见，但如果将 Matplotlib 嵌入到 Web 应用中并允许用户自定义绘图参数，理论上存在一些前端交互的风险（如 XSS），但这不是 Matplotlib 库本身的漏洞，而是应用设计的问题。</li>
<li><strong>依赖项安全</strong>：Matplotlib 依赖于其他库（如 NumPy）。始终保持这些依赖项更新到最新版本，以避免已知的安全漏洞。</li>
</ol>
<h2 id="八、总结"><a href="#八、总结" class="headerlink" title="八、总结"></a>八、总结</h2><p>Matplotlib 作为 Python 中最基础和最强大的数据可视化库，以其无与伦比的灵活性和控制力，成为了从数据探索到出版级绘图的行业标准。虽然其学习曲线相对陡峭，默认样式可能不够出彩，但一旦掌握，它能让开发者实现几乎任何能想象到的图表。对于任何需要高质量、高度定制化和与 Python 科学计算栈深度集成的可视化任务，Matplotlib 都是不可或缺的基石。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/109739b91598/">https://blog.tbf1211.xx.kg/109739b91598/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/2023/">2023</a><a class="post-meta__tags" href="/tags/Python/">Python</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/">数据处理</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-25.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/278168a5d5b8/" title="PHP 惰性求值与生成器 (Generators) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-16.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">PHP 惰性求值与生成器 (Generators) 详解</div></div><div class="info-2"><div class="info-item-1"> 惰性求值 (Lazy Evaluation) 是一种编程策略，它将表达式的计算延迟到真正需要其结果时才进行。在 PHP 中，实现惰性求值最主要的机制就是生成器 (Generators)。生成器允许开发者编写像迭代器一样遍历数据集合的函数，而无需将整个集合一次性加载到内存中。这对于处理大型数据集、无限序列或需要节省内存的场景至关重要。  核心思想：生成器通过 yield 关键字实现了惰性求值，它允许函数暂停执行并返回一个值，并在下次需要时从暂停的地方继续执行，从而按需生成数据，大幅减少内存占用。   一、理解惰性求值 (Lazy Evaluation)1.1 什么是惰性求值？传统的“饥饿求值 (Eager Evaluation)”或“及早求值”模式下，当一个函数或表达式被调用时，其所有参数都会在函数体执行前被完全计算。例如： 1234function sum(int $a, int $b): int &#123;    return $a + $b;&#125;$result = sum(expensiveCalculationA(), expensiveCalculationB...</div></div></div></a><a class="pagination-related" href="/dbdbe99385cd/" title="Python Pandas详解：数据处理与分析的瑞士军刀"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-13.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Python Pandas详解：数据处理与分析的瑞士军刀</div></div><div class="info-2"><div class="info-item-1"> Pandas 是 Python 中用于数据分析和处理的核心库。它提供了一套高性能、易于使用的数据结构，最主要的是 DataFrame（二维表格数据）和 Series（一维带标签数组），用于快速处理和分析结构化数据（如 CSV、Excel、数据库表格数据）。Pandas 以其直观的语法和强大的功能，成为数据科学家和数据工程师的首选工具。  核心思想：Pandas 将表格数据抽象为 DataFrame 和 Series 对象，提供类似 SQL 和 Excel 的操作，通过向量化和 C&#x2F;Cython 实现的底层优化，极大提升了数据处理效率。   一、为什么选择 Pandas？在数据驱动的时代，我们经常需要处理各种形式的表格数据。Python 原生的数据结构（如列表、字典）虽然灵活，但在处理大量、复杂、异构的表格数据时显得力不从心。Pandas 解决了这些痛点：  直观的数据结构：DataFrame 和 Series 提供了强大的标签索引功能，使得数据操作更加直观，无需关注底层实现。 高效的数据操作：底层基于 NumPy 优化，利用 C 和 Cython 实现，对于大规模数据...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/dbdbe99385cd/" title="Python Pandas详解：数据处理与分析的瑞士军刀"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-13.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-21</div><div class="info-item-2">Python Pandas详解：数据处理与分析的瑞士军刀</div></div><div class="info-2"><div class="info-item-1"> Pandas 是 Python 中用于数据分析和处理的核心库。它提供了一套高性能、易于使用的数据结构，最主要的是 DataFrame（二维表格数据）和 Series（一维带标签数组），用于快速处理和分析结构化数据（如 CSV、Excel、数据库表格数据）。Pandas 以其直观的语法和强大的功能，成为数据科学家和数据工程师的首选工具。  核心思想：Pandas 将表格数据抽象为 DataFrame 和 Series 对象，提供类似 SQL 和 Excel 的操作，通过向量化和 C&#x2F;Cython 实现的底层优化，极大提升了数据处理效率。   一、为什么选择 Pandas？在数据驱动的时代，我们经常需要处理各种形式的表格数据。Python 原生的数据结构（如列表、字典）虽然灵活，但在处理大量、复杂、异构的表格数据时显得力不从心。Pandas 解决了这些痛点：  直观的数据结构：DataFrame 和 Series 提供了强大的标签索引功能，使得数据操作更加直观，无需关注底层实现。 高效的数据操作：底层基于 NumPy 优化，利用 C 和 Cython 实现，对于大规模数据...</div></div></div></a><a class="pagination-related" href="/91353ff26772/" title="Peewee ORM 详解：接口使用与实践"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-24.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-11</div><div class="info-item-2">Peewee ORM 详解：接口使用与实践</div></div><div class="info-2"><div class="info-item-1"> Peewee 是一个小型、富有表现力、功能齐全的 Python ORM (Object-Relational Mapper)。它提供了一种简单且 Pythonic 的方式来与数据库进行交互，支持 SQLite、PostgreSQL 和 MySQL 等多种关系型数据库。Peewee 的设计理念是轻量级和易用性，使得开发者可以快速地构建应用程序，而无需编写大量的 SQL 语句。  核心思想：将数据库表映射为 Python 类，将表的行映射为类的实例，将表的列映射为类的属性。 通过 Python 对象和方法来操作数据库，从而抽象掉底层的 SQL 细节。   一、为什么选择 Peewee？在 Python 生态中，存在多种 ORM 解决方案，如 SQLAlchemy、Django ORM 等。Peewee 在其中脱颖而出，主要归因于以下特点：  轻量级与简洁性：Peewee 本身代码量较少，API 设计简洁直观，学习曲线平缓。 富有表现力：其查询 API 允许开发者使用类似 Python 原生语法的方式链式调用，构建复杂的查询。 兼容性强：支持 SQLite、PostgreSQL 和 ...</div></div></div></a><a class="pagination-related" href="/8ba79d4c7826/" title="Python SQLAlchemy 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-10.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-17</div><div class="info-item-2">Python SQLAlchemy 详解</div></div><div class="info-2"><div class="info-item-1"> SQLAlchemy 是一个强大的 Python SQL 工具包和 ORM (Object Relational Mapper)，它为应用程序和数据库之间提供了完整的抽象层。SQLAlchemy 旨在提供高效且灵活的数据库访问，支持多种数据库后端，并允许开发者在对象操作和原生 SQL 语句之间进行灵活切换。  核心思想：将数据库操作封装为 Python 对象，既提供高层次的 ORM 抽象，简化数据模型管理；又保留低层次的 SQL 表达式语言，允许执行复杂的 SQL 查询，兼顾开发效率与性能优化。   一、为什么需要 SQLAlchemy？在 Python 应用中与数据库交互时，通常会遇到以下挑战：  数据库类型差异：不同的数据库（MySQL, PostgreSQL, SQLite, Oracle 等）有不同的 SQL 语法和连接 API。直接使用原生驱动代码会导致代码难以跨数据库移植。 SQL 语句管理：手动编写和维护 SQL 字符串容易出错，尤其是在处理复杂查询、表连接和条件过滤时，且存在 SQL 注入风险。 数据与对象映射：将数据库行数据手动转换为 Python 对象，以及...</div></div></div></a><a class="pagination-related" href="/06bc4d655ced/" title="Python Beautiful Soup详解：高效网页数据抓取与解析利器"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-29.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-09</div><div class="info-item-2">Python Beautiful Soup详解：高效网页数据抓取与解析利器</div></div><div class="info-2"><div class="info-item-1"> Beautiful Soup 是一个 Python 库，用于从 HTML 或 XML 文件中提取数据。它通过解析文档并提供用于导航、搜索和修改解析树的 Pythonic 接口，将复杂的 HTML&#x2F;XML 文档转化为易于处理的数据结构。Beautiful Soup 与 requests 等 HTTP 库结合使用，是构建网络爬虫进行数据抓取的强大工具。  核心思想：Beautiful Soup 将杂乱的 HTML&#x2F;XML 文档“煲成一锅美味的汤”，让你能够轻松地在其中挑选出你需要的数据元素，如同在厨房里筛选食材一样简单。   一、为什么需要 Beautiful Soup？在网络上，大量有价值的信息以 HTML 页面的形式存在。如果我们需要从这些页面中获取结构化数据（例如，产品信息、新闻标题、评论内容），直接操作原始的 HTML 字符串是非常困难和脆弱的。传统的字符串查找和正则表达式虽然可行，但存在以下问题：  HTML 结构复杂：HTML 标签嵌套层级深，结构不规则，使用正则表达式难以精确匹配。 HTML 容错性：浏览器会自动纠正不规范的 HTML 结构，但正则...</div></div></div></a><a class="pagination-related" href="/f6307a80c973/" title="Python 防止循环依赖 (Circular Dependencies) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-04.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-07</div><div class="info-item-2">Python 防止循环依赖 (Circular Dependencies) 详解</div></div><div class="info-2"><div class="info-item-1"> 循环依赖 (Circular Dependency) 指的是两个或多个模块（在 Python 中通常是文件或包）之间相互直接或间接地导入对方。例如，moduleA.py 导入了 moduleB.py，而 moduleB.py 也导入了 moduleA.py。与 Golang 等语言在编译时直接报错不同，Python 在运行时才处理导入，因此循环依赖通常不会立即导致语法错误，但会在运行时触发 ImportError 或导致不可预测的行为，使代码难以理解、测试和维护。  核心思想：Python 允许在运行时灵活处理导入，但循环依赖是一个设计缺陷的信号，会导致运行时错误或维护噩梦。解决它的关键在于重构代码以建立单向依赖。   一、为什么循环依赖是一个问题？尽管 Python 不像 Go 那样在编译时严格禁止循环依赖，但它依然是需要极力避免的设计缺陷：  运行时 ImportError:这是最常见的直接问题。当 Python 解释器遇到循环导入时，某个模块在被完全初始化之前可能就被另一个模块尝试导入，导致模块中的对象、函数或类尚未定义而引发 ImportError。 示例：module...</div></div></div></a><a class="pagination-related" href="/a1d408b2ddbe/" title="Python多进程实现生产者-消费者模式详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-16.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-15</div><div class="info-item-2">Python多进程实现生产者-消费者模式详解</div></div><div class="info-2"><div class="info-item-1"> 生产者-消费者模式是并发编程中一个非常常见的设计模式，用于解决生产者和消费者之间由于生产和消费的速度不一致而导致的线程（或进程）同步问题。在 Python 中，可以使用 multiprocessing 模块实现多进程版的生产者-消费者模式，以充分利用多核 CPU 资源。  核心思想：利用共享队列作为缓冲，实现生产者与消费者解耦，并通过互斥锁和条件变量（或自带的线程安全队列）进行同步，避免数据不一致和资源竞争。   一、生产者-消费者模式概述模式构成：  生产者 (Producer)：负责生成数据，并将其放入共享的缓冲区（队列）中。 消费者 (Consumer)：负责从共享的缓冲区（队列）中取出数据进行处理。 缓冲区 (Buffer &#x2F; Queue)：一个共享的数据结构，通常是一个队列，用于存储生产者生产的数据和消费者消费的数据。它充当了生产者和消费者之间的桥梁。  解决的问题：  解耦：生产者和消费者可以独立运行，互不干扰，提高系统的灵活性。 并发：允许多个生产者和多个消费者同时存在，提高处理效率。 削峰填谷：当生产速度快于消费速度时，缓冲区可以存储多余的数据，防止数...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">544</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">230</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-Matplotlib%EF%BC%9F"><span class="toc-text">一、为什么需要 Matplotlib？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Matplotlib-%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">二、Matplotlib 的核心概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Matplotlib-%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">三、Matplotlib 架构与工作流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="toc-text">3.1 架构图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B-%E6%8E%A8%E8%8D%90%EF%BC%9AObject-Oriented-%E6%8E%A5%E5%8F%A3"><span class="toc-text">3.2 工作流程 (推荐：Object-Oriented 接口)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Matplotlib-%E5%85%A5%E9%97%A8%E4%B8%8E%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text">四、Matplotlib 入门与基本用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%AE%89%E8%A3%85"><span class="toc-text">4.1 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%8E%A5%E5%8F%A3%E9%A3%8E%E6%A0%BC"><span class="toc-text">4.2 接口风格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%9C%80%E5%B0%8F%E7%A4%BA%E4%BE%8B%EF%BC%9A%E7%AE%80%E5%8D%95%E7%9A%84%E7%BA%BF%E5%9B%BE"><span class="toc-text">4.3 最小示例：简单的线图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81Matplotlib-%E5%B8%B8%E7%94%A8-SQL-%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95-%E5%9B%BE%E8%A1%A8%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%AE%9A%E5%88%B6"><span class="toc-text">五、Matplotlib 常用 SQL 操作方法 (图表类型与定制)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E7%BA%BF%E5%9B%BE-Line-Plot"><span class="toc-text">5.1 线图 (Line Plot)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E6%95%A3%E7%82%B9%E5%9B%BE-Scatter-Plot"><span class="toc-text">5.2 散点图 (Scatter Plot)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%9F%B1%E7%8A%B6%E5%9B%BE-Bar-Chart"><span class="toc-text">5.3 柱状图 (Bar Chart)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E7%9B%B4%E6%96%B9%E5%9B%BE-Histogram"><span class="toc-text">5.4 直方图 (Histogram)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E9%A5%BC%E5%9B%BE-Pie-Chart"><span class="toc-text">5.5 饼图 (Pie Chart)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-%E5%A4%9A%E4%B8%AA%E5%AD%90%E5%9B%BE-Subplots"><span class="toc-text">5.6 多个子图 (Subplots)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-3D-%E7%BB%98%E5%9B%BE-3D-Plotting"><span class="toc-text">5.7 3D 绘图 (3D Plotting)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81Matplotlib-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%E4%B8%8E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">六、Matplotlib 的优缺点与适用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E4%BC%98%E7%82%B9%EF%BC%9A"><span class="toc-text">6.1 优点：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E7%BC%BA%E7%82%B9%EF%BC%9A"><span class="toc-text">6.2 缺点：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A"><span class="toc-text">6.3 适用场景：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%AE%89%E5%85%A8%E6%80%A7%E8%80%83%E8%99%91"><span class="toc-text">七、安全性考虑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">八、总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/10349b09ff78/" title="Signal Protocol 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-16.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Signal Protocol 详解"/></a><div class="content"><a class="title" href="/10349b09ff78/" title="Signal Protocol 详解">Signal Protocol 详解</a><time datetime="2026-02-03T22:24:00.000Z" title="发表于 2026-02-04 06:24:00">2026-02-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/f81355a662b8/" title="ECMAScript ShadowRealm 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-08.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ECMAScript ShadowRealm 详解"/></a><div class="content"><a class="title" href="/f81355a662b8/" title="ECMAScript ShadowRealm 详解">ECMAScript ShadowRealm 详解</a><time datetime="2026-02-01T22:24:00.000Z" title="发表于 2026-02-02 06:24:00">2026-02-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/88fea7b52158/" title="Gzip 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-17.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Gzip 详解"/></a><div class="content"><a class="title" href="/88fea7b52158/" title="Gzip 详解">Gzip 详解</a><time datetime="2026-01-29T22:24:00.000Z" title="发表于 2026-01-30 06:24:00">2026-01-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/8fc7e3e72510/" title="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解"/></a><div class="content"><a class="title" href="/8fc7e3e72510/" title="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解">前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解</a><time datetime="2026-01-27T22:24:00.000Z" title="发表于 2026-01-28 06:24:00">2026-01-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/5341a0037256/" title="CSS-in-JS 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSS-in-JS 详解"/></a><div class="content"><a class="title" href="/5341a0037256/" title="CSS-in-JS 详解">CSS-in-JS 详解</a><time datetime="2026-01-25T22:24:00.000Z" title="发表于 2026-01-26 06:24:00">2026-01-26</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-25.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/archives/2023/" target="_blank" title="🆕 2023">🆕 2023</a><a href="/archives/2024/" target="_blank" title="🆒 2024">🆒 2024</a><a href="/archives/2025/" target="_blank" title="👨‍👩‍👦 2025">👨‍👩‍👦 2025</a><a href="/archives/2026/" target="_blank" title="🆙 2026">🆙 2026</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="📁 分类">📁 分类</a><a href="/tags/" target="_blank" title="🔖 标签">🔖 标签</a><a href="/categories/" target="_blank" title="📽️ 时间线">📽️ 时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="💬 说说">💬 说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2026 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.9/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const parseViewBox = viewBox => {
    if (!viewBox) return null
    const parts = viewBox.trim().split(/[\s,]+/).map(n => Number(n))
    if (parts.length !== 4 || parts.some(n => Number.isNaN(n))) return null
    return parts
  }

  const getSvgViewBox = svg => {
    const attr = parseViewBox(svg.getAttribute('viewBox'))
    if (attr) return attr

    // Fallback: use bbox to build a viewBox
    try {
      const bbox = svg.getBBox()
      if (bbox && bbox.width && bbox.height) return [bbox.x, bbox.y, bbox.width, bbox.height]
    } catch (e) {
      // getBBox may fail on some edge cases; ignore
    }

    const w = Number(svg.getAttribute('width')) || 0
    const h = Number(svg.getAttribute('height')) || 0
    if (w > 0 && h > 0) return [0, 0, w, h]
    return [0, 0, 100, 100]
  }

  const setSvgViewBox = (svg, vb) => {
    svg.setAttribute('viewBox', `${vb[0]} ${vb[1]} ${vb[2]} ${vb[3]}`)
  }

  const clamp = (v, min, max) => Math.max(min, Math.min(max, v))

  const openSvgInNewTab = ({ source, initViewBox }) => {
    const getClonedSvg = () => {
      if (typeof source === 'string') {
        const template = document.createElement('template')
        template.innerHTML = source.trim()
        const svg = template.content.querySelector('svg')
        return svg ? svg.cloneNode(true) : null
      }
      if (source && typeof source.cloneNode === 'function') {
        return source.cloneNode(true)
      }
      return null
    }

    const clone = getClonedSvg()
    if (!clone) return
    if (initViewBox && initViewBox.length === 4) {
      clone.setAttribute('viewBox', initViewBox.join(' '))
    }
    if (!clone.getAttribute('xmlns')) clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg')
    if (!clone.getAttribute('xmlns:xlink') && clone.outerHTML.includes('xlink:')) {
      clone.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink')
    }
    // inject background to match current theme
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark'
    const bg = getComputedStyle(document.body).backgroundColor || (isDark ? '#1e1e1e' : '#ffffff')
    if (!clone.style.background) clone.style.background = bg

    const serializer = new XMLSerializer()
    const svgSource = serializer.serializeToString(clone)
    const htmlSource = `<!doctype html><html><head><meta charset="utf-8" />
      <style>
        html, body { width: 100%; height: 100%; margin: 0; display: flex; align-items: center; justify-content: center; background: ${bg}; }
        svg { max-width: 100%; max-height: 100%; height: auto; width: auto; }
      </style>
      </head><body>${svgSource}</body></html>`
    const blob = new Blob([htmlSource], { type: 'text/html;charset=utf-8' })
    const url = URL.createObjectURL(blob)
    window.open(url, '_blank', 'noopener')
    setTimeout(() => URL.revokeObjectURL(url), 30000)
  }

  const attachMermaidViewerButton = wrap => {
    let btn = wrap.querySelector('.mermaid-open-btn')
    if (!btn) {
      btn = document.createElement('button')
      btn.type = 'button'
      btn.className = 'mermaid-open-btn'
      wrap.appendChild(btn)
    }

    btn.innerHTML = '<i class="fa fa-search fa-fw" aria-hidden="true"></i>'

    if (!btn.__mermaidViewerBound) {
      btn.addEventListener('click', e => {
        e.preventDefault()
        e.stopPropagation()
        const svg = wrap.__mermaidOriginalSvg || wrap.querySelector('svg')
        if (!svg) return
        const initViewBox = wrap.__mermaidInitViewBox
        if (typeof svg === 'string') {
          openSvgInNewTab({ source: svg, initViewBox })
          return
        }
        openSvgInNewTab({ source: svg, initViewBox })
      })
      btn.__mermaidViewerBound = true
    }
  }

  // Zoom around a point (px, py) in the SVG viewport (in viewBox coordinates)
  const zoomAtPoint = (vb, factor, px, py) => {
    const w = vb[2] * factor
    const h = vb[3] * factor
    const nx = px - (px - vb[0]) * factor
    const ny = py - (py - vb[1]) * factor
    return [nx, ny, w, h]
  }

  const initMermaidGestures = wrap => {
    const svg = wrap.querySelector('svg')
    if (!svg) return

    // Ensure viewBox exists so gestures always work
    const initVb = getSvgViewBox(svg)
    wrap.__mermaidInitViewBox = initVb
    wrap.__mermaidCurViewBox = initVb.slice()
    setSvgViewBox(svg, initVb)

    // Avoid binding multiple times on themeChange/pjax
    if (wrap.__mermaidGestureBound) return
    wrap.__mermaidGestureBound = true

    // Helper: map client (viewport) coordinate -> viewBox coordinate
    const clientToViewBox = (clientX, clientY) => {
      const rect = svg.getBoundingClientRect()
      const vb = wrap.__mermaidCurViewBox || getSvgViewBox(svg)
      const x = vb[0] + (clientX - rect.left) * (vb[2] / rect.width)
      const y = vb[1] + (clientY - rect.top) * (vb[3] / rect.height)
      return { x, y, rect, vb }
    }

    const state = {
      pointers: new Map(),
      startVb: null,
      startDist: 0,
      startCenter: null
    }

    const clampVb = vb => {
      const init = wrap.__mermaidInitViewBox || vb
      const minW = init[2] * 0.1
      const maxW = init[2] * 10
      const minH = init[3] * 0.1
      const maxH = init[3] * 10
      vb[2] = clamp(vb[2], minW, maxW)
      vb[3] = clamp(vb[3], minH, maxH)
      return vb
    }

    const setCurVb = vb => {
      vb = clampVb(vb)
      wrap.__mermaidCurViewBox = vb
      setSvgViewBox(svg, vb)
    }

    const onPointerDown = e => {
      // Allow only primary button for mouse
      if (e.pointerType === 'mouse' && e.button !== 0) return
      svg.setPointerCapture(e.pointerId)
      state.pointers.set(e.pointerId, { x: e.clientX, y: e.clientY })

      if (state.pointers.size === 1) {
        state.startVb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
      } else if (state.pointers.size === 2) {
        const pts = [...state.pointers.values()]
        const dx = pts[0].x - pts[1].x
        const dy = pts[0].y - pts[1].y
        state.startDist = Math.hypot(dx, dy)
        state.startVb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
        state.startCenter = { x: (pts[0].x + pts[1].x) / 2, y: (pts[0].y + pts[1].y) / 2 }
      }
    }

    const onPointerMove = e => {
      if (!state.pointers.has(e.pointerId)) return
      state.pointers.set(e.pointerId, { x: e.clientX, y: e.clientY })

      // Pan with 1 pointer
      if (state.pointers.size === 1 && state.startVb) {
        const p = [...state.pointers.values()][0]
        const prev = { x: e.clientX - e.movementX, y: e.clientY - e.movementY }
        // movementX/Y unreliable on touch, compute from stored last position
        const last = wrap.__mermaidLastSinglePointer || p
        const dxClient = p.x - last.x
        const dyClient = p.y - last.y
        wrap.__mermaidLastSinglePointer = p

        const { rect } = clientToViewBox(p.x, p.y)
        const vb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
        const dx = dxClient * (vb[2] / rect.width)
        const dy = dyClient * (vb[3] / rect.height)
        setCurVb([vb[0] - dx, vb[1] - dy, vb[2], vb[3]])
        return
      }

      // Pinch zoom with 2 pointers
      if (state.pointers.size === 2 && state.startVb && state.startDist > 0) {
        const pts = [...state.pointers.values()]
        const dx = pts[0].x - pts[1].x
        const dy = pts[0].y - pts[1].y
        const dist = Math.hypot(dx, dy)
        if (!dist) return
        const factor = state.startDist / dist // dist bigger => zoom in (viewBox smaller)

        const cx = (pts[0].x + pts[1].x) / 2
        const cy = (pts[0].y + pts[1].y) / 2
        const centerClient = { x: cx, y: cy }

        const pxy = clientToViewBox(centerClient.x, centerClient.y)
        const cpx = pxy.x
        const cpy = pxy.y

        const vb = zoomAtPoint(state.startVb, factor, cpx, cpy)
        setCurVb(vb)
      }
    }

    const onPointerUpOrCancel = e => {
      state.pointers.delete(e.pointerId)
      if (state.pointers.size === 0) {
        state.startVb = null
        state.startDist = 0
        state.startCenter = null
        wrap.__mermaidLastSinglePointer = null
      } else if (state.pointers.size === 1) {
        // reset single pointer baseline to avoid jump
        wrap.__mermaidLastSinglePointer = [...state.pointers.values()][0]
      }
    }

    // Wheel zoom (mouse/trackpad)
    const onWheel = e => {
      // ctrlKey on mac trackpad pinch; we treat both as zoom
      e.preventDefault()
      const delta = e.deltaY
      const zoomFactor = delta > 0 ? 1.1 : 0.9
      const { x, y } = clientToViewBox(e.clientX, e.clientY)
      const vb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
      setCurVb(zoomAtPoint(vb, zoomFactor, x, y))
    }

    const onDblClick = () => {
      const init = wrap.__mermaidInitViewBox
      if (!init) return
      wrap.__mermaidCurViewBox = init.slice()
      setSvgViewBox(svg, init)
    }

    svg.addEventListener('pointerdown', onPointerDown)
    svg.addEventListener('pointermove', onPointerMove)
    svg.addEventListener('pointerup', onPointerUpOrCancel)
    svg.addEventListener('pointercancel', onPointerUpOrCancel)
    svg.addEventListener('wheel', onWheel, { passive: false })
    svg.addEventListener('dblclick', onDblClick)
  }

  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild

      // Clear old render (themeChange/pjax will rerun)
      const oldSvg = item.querySelector('svg')
      if (oldSvg) oldSvg.remove()
      item.__mermaidGestureBound = false

      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
        if (false) initMermaidGestures(item)
        item.__mermaidOriginalSvg = svg
        if (true) attachMermaidViewerButton(item)
      }


      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="ture"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      true
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div></body></html>