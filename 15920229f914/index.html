<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Supabase 深度解析 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Supabase 是一个开源的 Firebase 替代品，它提供了一整套后端即服务 (BaaS) 工具，旨在帮助开发者更快地构建应用。Its core philosophical difference from Firebase lies in its foundation: Supabase is built entirely around PostgreSQL作为其核心数据存储，并围绕 Po">
<meta property="og:type" content="article">
<meta property="og:title" content="Supabase 深度解析">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/15920229f914/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="Supabase 是一个开源的 Firebase 替代品，它提供了一整套后端即服务 (BaaS) 工具，旨在帮助开发者更快地构建应用。Its core philosophical difference from Firebase lies in its foundation: Supabase is built entirely around PostgreSQL作为其核心数据存储，并围绕 Po">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-29.jpg">
<meta property="article:published_time" content="2025-12-02T22:24:00.000Z">
<meta property="article:modified_time" content="2026-02-03T10:13:29.727Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="Serverless">
<meta property="article:tag" content="云服务">
<meta property="article:tag" content="2025">
<meta property="article:tag" content="BaaS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-29.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Supabase 深度解析",
  "url": "https://blog.tbf1211.xx.kg/15920229f914/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-29.jpg",
  "datePublished": "2025-12-02T22:24:00.000Z",
  "dateModified": "2026-02-03T10:13:29.727Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/15920229f914/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.9/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Supabase 深度解析',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">539</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">229</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-29.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">Supabase 深度解析</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Supabase 深度解析</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2025-12-02T22:24:00.000Z" title="发表于 2025-12-03 06:24:00">2025-12-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/%E4%BA%91%E6%9C%8D%E5%8A%A1/">云服务</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>13分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><strong>Supabase</strong> 是一个开源的 Firebase 替代品，它提供了一整套后端即服务 (BaaS) 工具，旨在帮助开发者更快地构建应用。Its core philosophical difference from Firebase lies in its foundation: <strong>Supabase is built entirely around PostgreSQL</strong>作为其核心数据存储，并围绕 PostgreSQL 提供了认证、实时订阅、存储和边缘函数等一系列服务。这使得开发者可以使用熟悉的 SQL 语言来管理数据和定义业务逻辑，同时享受现代化 BaaS 服务的便利。</p>
</blockquote>
<div class="note info flat"><p>核心思想：<br><strong>以强大的开源关系型数据库 PostgreSQL 为中心，提供一套集成且可扩展的 BaaS 服务，实现从数据库到 API、认证、实时功能的无缝连接。</strong></p>
</div>

<hr>
<h2 id="一、为什么需要-Supabase？"><a href="#一、为什么需要-Supabase？" class="headerlink" title="一、为什么需要 Supabase？"></a>一、为什么需要 Supabase？</h2><p>传统上，构建一个功能完善的应用程序需要开发者处理大量的后端基础设施工作，包括：</p>
<ol>
<li><strong>数据库管理</strong>：选择、设置、维护数据库，编写 CRUD API。</li>
<li><strong>用户认证和授权</strong>：实现用户注册、登录、密码重置、JWT 管理、权限控制。</li>
<li><strong>实时功能</strong>：处理 WebSocket 连接，响应数据库变更。</li>
<li><strong>文件存储</strong>：设置对象存储服务，管理文件上传下载。</li>
<li><strong>业务逻辑</strong>：编写和部署后端服务器代码。</li>
</ol>
<p>这些任务通常耗时耗力，且需要专业的运维知识。Supabase 的目标是通过将这些常用后端服务预先集成并提供开箱即用的解决方案，让开发者能够：</p>
<ul>
<li><strong>加速开发</strong>：快速启动项目，专注于前端和核心业务逻辑。</li>
<li><strong>降低复杂性</strong>：无需管理复杂的服务器和数据库基础设施。</li>
<li><strong>利用现有知识</strong>：通过 PostgreSQL 和 SQL，可以有效利用已有的数据库技能。</li>
<li><strong>保持灵活性</strong>：作为开源项目，支持自托管，避免供应商锁定。</li>
</ul>
<h2 id="二、Supabase-核心组件"><a href="#二、Supabase-核心组件" class="headerlink" title="二、Supabase 核心组件"></a>二、Supabase 核心组件</h2><p>Supabase 生态系统由一系列精心选择和集成的开源工具组成，它们协同工作，共同提供全面的 BaaS 功能。</p>
<div class="mermaid-wrap"><pre class="mermaid-src" data-config="{}" hidden>
    graph TD
    A[Client Application] -- HTTPS&#x2F;WSS --&gt; B(Supabase API Gateway)

    B --&gt; C(GoTrue: Auth API)
    B --&gt; D(PostgREST: RESTful API)
    B --&gt; E(Realtime: WebSocket API)
    B --&gt; F(Storage: Storage API &#x2F; Object Storage)
    B --&gt; H(Edge Functions: Deno)

    C --&gt; G(PostgreSQL Database)
    D --&gt; G
    E -- Monitors Changes --&gt; G
    F --&gt; G(Stores Metadata)
    H --&gt; G

    subgraph Core Components
        C
        D
        E
        F
        H
    end

  </pre></div>

<h3 id="2-1-PostgreSQL-数据库"><a href="#2-1-PostgreSQL-数据库" class="headerlink" title="2.1 PostgreSQL 数据库"></a>2.1 PostgreSQL 数据库</h3><ul>
<li><strong>定义</strong>：作为 Supabase 的核心，它是一个功能强大、高度可扩展且世界领先的开源关系型数据库。所有数据都存储在 PostgreSQL 中。</li>
<li><strong>特性</strong>：支持复杂查询、事务、视图、存储过程、触发器、JSONB 类型等。通过 PostgreSQL 的扩展能力，Supabase 还能集成额外功能。</li>
<li><strong>优势</strong>：开发者可以利用熟悉的 SQL 知识，并通过 SQL 直接管理数据、定义表结构、实现业务逻辑。</li>
</ul>
<h3 id="2-2-GoTrue-Authentication"><a href="#2-2-GoTrue-Authentication" class="headerlink" title="2.2 GoTrue (Authentication)"></a>2.2 GoTrue (Authentication)</h3><ul>
<li><strong>定义</strong>：一个基于 JWT (JSON Web Tokens) 的用户认证服务。它管理用户注册、登录、会话管理、密码重置等功能。</li>
<li><strong>特性</strong>：<ul>
<li>支持电子邮件&#x2F;密码认证。</li>
<li>支持数十种第三方 OAuth 提供商（如 Google, GitHub, Apple 等）。</li>
<li>自动生成 JWT 令牌，并与 PostgreSQL 的行级安全性 (Row Level Security, RLS) 无缝集成。</li>
<li>提供了易于使用的 API 和 SDK。</li>
</ul>
</li>
</ul>
<h3 id="2-3-PostgREST-RESTful-API"><a href="#2-3-PostgREST-RESTful-API" class="headerlink" title="2.3 PostgREST (RESTful API)"></a>2.3 PostgREST (RESTful API)</h3><ul>
<li><strong>定义</strong>：一个独立的 Web 服务器，可以将 PostgreSQL 数据库直接转换为高性能的 RESTful API。</li>
<li><strong>特性</strong>：<ul>
<li><strong>即时 API</strong>：无需编写任何后端代码，只需定义好数据库表和视图，PostgREST 就会自动生成对应的 RESTful API。</li>
<li><strong>单点真实数据源</strong>：API 直接与数据库交互，确保数据一致性。</li>
<li><strong>权限集成</strong>：与 PostgreSQL 的 RLS 机制和 GoTrue 生成的 JWT 令牌完美结合，实现细粒度的授权控制。</li>
</ul>
</li>
</ul>
<h3 id="2-4-Realtime-实时服务"><a href="#2-4-Realtime-实时服务" class="headerlink" title="2.4 Realtime (实时服务)"></a>2.4 Realtime (实时服务)</h3><ul>
<li><strong>定义</strong>：一个 WebSocket 服务器，用于监听 PostgreSQL 数据库的变更事件（插入、更新、删除）。</li>
<li><strong>特性</strong>：<ul>
<li><strong>数据库变更订阅</strong>：客户端可以通过 WebSocket 连接订阅特定表或视图的变更，实时获取数据更新通知。</li>
<li><strong>基于 PostgreSQL 的逻辑复制</strong>：底层利用 PostgreSQL 的逻辑复制 (Logical Replication) 功能捕获数据库变更。</li>
<li><strong>轻松实现实时功能</strong>：如聊天应用、实时仪表盘、协作工具等。</li>
</ul>
</li>
</ul>
<h3 id="2-5-Storage-对象存储"><a href="#2-5-Storage-对象存储" class="headerlink" title="2.5 Storage (对象存储)"></a>2.5 Storage (对象存储)</h3><ul>
<li><strong>定义</strong>：一个 S3 兼容的对象存储服务，用于存储非结构化数据，如图片、视频、文档等。</li>
<li><strong>特性</strong>：<ul>
<li><strong>文件上传下载</strong>：通过 API 轻松管理文件的上传和下载。</li>
<li><strong>访问控制</strong>：与 GoTrue 和 RLS 集成，实现细粒度的文件访问权限控制。</li>
<li><strong>私有&#x2F;公共存储桶</strong>：支持创建不同访问权限的存储桶。</li>
</ul>
</li>
</ul>
<h3 id="2-6-Edge-Functions-边缘函数"><a href="#2-6-Edge-Functions-边缘函数" class="headerlink" title="2.6 Edge Functions (边缘函数)"></a>2.6 Edge Functions (边缘函数)</h3><ul>
<li><strong>定义</strong>：基于 Deno Runtime 构建的 Serverless 无服务器函数服务，可以在全球边缘网络部署，提供低延迟的计算能力。</li>
<li><strong>特性</strong>：<ul>
<li><strong>自定义后端逻辑</strong>：用于实现复杂的业务逻辑、数据转换、与第三方服务集成等。</li>
<li><strong>TypeScript&#x2F;JavaScript 支持</strong>：利用 Deno 的原生 TypeScript 支持。</li>
<li><strong>快速部署和执行</strong>：在靠近用户的地方执行代码，减少延迟。</li>
</ul>
</li>
</ul>
<h3 id="2-7-Dashboard-控制面板"><a href="#2-7-Dashboard-控制面板" class="headerlink" title="2.7 Dashboard (控制面板)"></a>2.7 Dashboard (控制面板)</h3><ul>
<li><strong>定义</strong>：Supabase 提供的一个直观的 Web UI，用于管理项目、数据库、认证用户、存储文件、函数等所有服务。</li>
<li><strong>特性</strong>：<ul>
<li><strong>数据库浏览器</strong>：直观地查看和编辑表数据。</li>
<li><strong>SQL 编辑器</strong>：直接在浏览器中执行 SQL 查询。</li>
<li><strong>认证用户管理</strong>：管理用户、会话、OAuth 配置。</li>
<li><strong>存储文件浏览器</strong>：管理上传的文件。</li>
<li><strong>API 文档</strong>：自动生成 API 文档。</li>
</ul>
</li>
</ul>
<h2 id="三、Supabase-主要特性"><a href="#三、Supabase-主要特性" class="headerlink" title="三、Supabase 主要特性"></a>三、Supabase 主要特性</h2><ol>
<li><strong>开源与自托管选项</strong>：所有核心组件都是开源的，允许开发者完全控制和自托管，避免供应商绑定。</li>
<li><strong>PostgreSQL-Centric</strong>：充分利用 PostgreSQL 的强大功能和生态，包括其丰富的扩展（如 <code>PostGIS</code> 用于地理空间数据，<code>pg_cron</code> 用于调度任务）。</li>
<li><strong>即时 RESTful API</strong>：通过 PostgREST 自动从数据库模式生成 API，极大地简化了后端开发。</li>
<li><strong>实时订阅 (Realtime Subscriptions)</strong>：通过 WebSocket 监听数据库的实时变更，轻松构建动态应用。</li>
<li><strong>强大且细粒度的安全控制</strong>：<ul>
<li><strong>行级安全性 (Row Level Security, RLS)</strong>：PostgreSQL 的内置功能，允许在数据库层面定义哪些用户可以访问或修改哪些数据行，与 JWT 无缝集成。</li>
<li><strong>GoTrue (Auth)</strong>：提供全面的用户认证解决方案。</li>
</ul>
</li>
<li><strong>文件存储能力</strong>：S3 兼容的对象存储，结合认证和 RLS 实现安全的文件管理。</li>
<li><strong>边缘函数 (Edge Functions)</strong>：提供高性能的无服务器函数，用于自定义后端逻辑。</li>
<li><strong>数据库迁移 (Database Migrations)</strong>：SQL-优先的迁移管理方案，方便版本控制和团队协作。</li>
</ol>
<h2 id="四、Supabase-的优缺点"><a href="#四、Supabase-的优缺点" class="headerlink" title="四、Supabase 的优缺点"></a>四、Supabase 的优缺点</h2><h3 id="4-1-优点"><a href="#4-1-优点" class="headerlink" title="4.1 优点"></a>4.1 优点</h3><ol>
<li><strong>开发效率高</strong>：通过即时 API 和预置服务，大大缩短了开发周期，特别适合快速原型开发和 MVP。</li>
<li><strong>降低运维成本</strong>：托管服务免去了数据库、服务器、认证服务等基础设施的部署和维护工作。</li>
<li><strong>强大的 PostgreSQL 后盾</strong>：受益于 PostgreSQL 的数据完整性、事务支持和丰富的扩展，提供了坚实的数据基础。</li>
<li><strong>高度可定制和可扩展</strong>：由于是开源项目，且基于 PostgreSQL，开发者可以通过 SQL 或自定义函数进行深度定制。</li>
<li><strong>良好的安全性</strong>：RLS 结合 JWT 提供了企业级的细粒度授权控制。</li>
<li><strong>活跃的社区与文档</strong>：拥有庞大的开发者社区和详尽的官方文档。</li>
</ol>
<h3 id="4-2-缺点"><a href="#4-2-缺点" class="headerlink" title="4.2 缺点"></a>4.2 缺点</h3><ol>
<li><strong>潜在的供应商锁定</strong>：虽然是开源，但深度依赖其托管服务可能会导致迁移成本。</li>
<li><strong>性能考量</strong>：对于极高并发或特定优化的场景，可能不如完全自定义的后端服务灵活。PostgREST 的通用性在某些复杂查询上可能没有手写 API 效率高。</li>
<li><strong>学习曲线</strong>：对于不熟悉 PostgreSQL 或 RLS 的开发者，需要一定的学习成本。</li>
<li><strong>功能限制</strong>：与 Firebase 相比，某些特定功能（如 Firestore 或 Cloud Functions 的某些高级特性）可能需要通过 Edge Functions 自行实现或寻找替代方案。</li>
<li><strong>数据中心地域选择</strong>：托管服务的数据中心选择可能受限，影响延迟和合规性。</li>
</ol>
<h2 id="五、适用场景"><a href="#五、适用场景" class="headerlink" title="五、适用场景"></a>五、适用场景</h2><p>Supabase 适用于各种需要快速开发和部署后端服务的场景：</p>
<ul>
<li><strong>全栈 Web&#x2F;移动应用</strong>：作为任何使用前端框架 (React, Vue, Angular, Svelte) 或移动应用 (React Native, Flutter, Swift, Kotlin) 的后端。</li>
<li><strong>快速原型 (Rapid Prototyping)</strong>：用于验证产品想法或进行概念验证 (PoC)。</li>
<li><strong>最小可行产品 (MVP) 开发</strong>：在短时间内构建和发布核心功能。</li>
<li><strong>内部工具和仪表盘</strong>：快速搭建管理界面或数据可视化应用。</li>
<li><strong>数据密集型应用</strong>：受益于 PostgreSQL 的强大查询能力和数据完整性。</li>
<li><strong>支持实时协作的应用</strong>：如聊天应用、在线文档编辑器等。</li>
<li><strong>需要细粒度权限控制的应用</strong>：通过 RLS 轻松实现复杂权限模型。</li>
</ul>
<h2 id="六、Go-语言客户端交互示例-概念性"><a href="#六、Go-语言客户端交互示例-概念性" class="headerlink" title="六、Go 语言客户端交互示例 (概念性)"></a>六、Go 语言客户端交互示例 (概念性)</h2><p>虽然 Supabase 提供了 Go 语言的 SDK，但这里的示例将侧重于使用 Go 语言通过 HTTP (模拟客户端 SDK) 与 Supabase 的 RESTful API 进行交互，展示其API的核心概念。</p>
<p>假设我们有一个名为 <code>users</code> 的表，包含 <code>id</code>, <code>name</code>, <code>email</code> 字段。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bytes&quot;</span></span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// User represents a user in the database</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	ID    <span class="type">int</span>    <span class="string">`json:&quot;id,omitempty&quot;`</span></span><br><span class="line">	Name  <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">	Email <span class="type">string</span> <span class="string">`json:&quot;email&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 从环境变量获取 Supabase 配置</span></span><br><span class="line">	supabaseURL := os.Getenv(<span class="string">&quot;SUPABASE_URL&quot;</span>)</span><br><span class="line">	supabaseKey := os.Getenv(<span class="string">&quot;SUPABASE_ANON_KEY&quot;</span>) <span class="comment">// 通常用于公共读写或通过RLS控制</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> supabaseURL == <span class="string">&quot;&quot;</span> || supabaseKey == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Error: SUPABASE_URL and SUPABASE_ANON_KEY environment variables must be set.&quot;</span>)</span><br><span class="line">		os.Exit(<span class="number">1</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 1. 获取所有用户 (假设RLS允许匿名读取)</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;--- Fetching all users ---&quot;</span>)</span><br><span class="line">	getUsersURL := fmt.Sprintf(<span class="string">&quot;%s/rest/v1/users&quot;</span>, supabaseURL)</span><br><span class="line">	req, err := http.NewRequest(<span class="string">&quot;GET&quot;</span>, getUsersURL, <span class="literal">nil</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error creating request: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	req.Header.Add(<span class="string">&quot;apikey&quot;</span>, supabaseKey)</span><br><span class="line">	req.Header.Add(<span class="string">&quot;Authorization&quot;</span>, fmt.Sprintf(<span class="string">&quot;Bearer %s&quot;</span>, supabaseKey)) <span class="comment">// 匿名密钥也可以作为Bearer Token</span></span><br><span class="line"></span><br><span class="line">	client := &amp;http.Client&#123;&#125;</span><br><span class="line">	resp, err := client.Do(req)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error sending request: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"></span><br><span class="line">	body, err := ioutil.ReadAll(resp.Body)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error reading response body: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> resp.StatusCode != http.StatusOK &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Failed to fetch users: %s, Status: %d\n&quot;</span>, <span class="type">string</span>(body), resp.StatusCode)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> users []User</span><br><span class="line">	<span class="keyword">if</span> err := json.Unmarshal(body, &amp;users); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error unmarshaling users: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Fetched users: %+v\n&quot;</span>, users)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 2. 插入一个新用户 (假设RLS允许匿名插入)</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;\n--- Inserting a new user ---&quot;</span>)</span><br><span class="line">	newUser := User&#123;Name: <span class="string">&quot;Alice&quot;</span>, Email: <span class="string">&quot;alice@example.com&quot;</span>&#125;</span><br><span class="line">	jsonUser, _ := json.Marshal(newUser)</span><br><span class="line"></span><br><span class="line">	postUserURL := fmt.Sprintf(<span class="string">&quot;%s/rest/v1/users&quot;</span>, supabaseURL)</span><br><span class="line">	req, err = http.NewRequest(<span class="string">&quot;POST&quot;</span>, postUserURL, bytes.NewBuffer(jsonUser))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error creating POST request: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	req.Header.Add(<span class="string">&quot;apikey&quot;</span>, supabaseKey)</span><br><span class="line">	req.Header.Add(<span class="string">&quot;Authorization&quot;</span>, fmt.Sprintf(<span class="string">&quot;Bearer %s&quot;</span>, supabaseKey))</span><br><span class="line">	req.Header.Add(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>)</span><br><span class="line">    req.Header.Add(<span class="string">&quot;Prefer&quot;</span>, <span class="string">&quot;return=representation&quot;</span>) <span class="comment">// 请求返回新创建的记录</span></span><br><span class="line"></span><br><span class="line">	resp, err = client.Do(req)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error sending POST request: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"></span><br><span class="line">	body, err = ioutil.ReadAll(resp.Body)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error reading POST response body: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> resp.StatusCode != http.StatusCreated &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Failed to insert user: %s, Status: %d\n&quot;</span>, <span class="type">string</span>(body), resp.StatusCode)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> createdUsers []User <span class="comment">// 插入成功会返回一个数组</span></span><br><span class="line">	<span class="keyword">if</span> err := json.Unmarshal(body, &amp;createdUsers); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error unmarshaling created users: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Inserted user: %+v\n&quot;</span>, createdUsers[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 3. 使用过滤器查询用户 (例如按 email)</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;\n--- Querying user by email ---&quot;</span>)</span><br><span class="line">	queryUserURL := fmt.Sprintf(<span class="string">&quot;%s/rest/v1/users?email=eq.alice@example.com&quot;</span>, supabaseURL) <span class="comment">// eq.表示等于</span></span><br><span class="line">	req, err = http.NewRequest(<span class="string">&quot;GET&quot;</span>, queryUserURL, <span class="literal">nil</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error creating query request: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	req.Header.Add(<span class="string">&quot;apikey&quot;</span>, supabaseKey)</span><br><span class="line">	req.Header.Add(<span class="string">&quot;Authorization&quot;</span>, fmt.Sprintf(<span class="string">&quot;Bearer %s&quot;</span>, supabaseKey))</span><br><span class="line"></span><br><span class="line">	resp, err = client.Do(req)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error sending query request: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"></span><br><span class="line">	body, err = ioutil.ReadAll(resp.Body)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error reading query response body: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> resp.StatusCode != http.StatusOK &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Failed to query user: %s, Status: %d\n&quot;</span>, <span class="type">string</span>(body), resp.StatusCode)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> queriedUsers []User</span><br><span class="line">	<span class="keyword">if</span> err := json.Unmarshal(body, &amp;queriedUsers); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;Error unmarshaling queried users: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Queried user: %+v\n&quot;</span>, queriedUsers)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>运行此示例前，请确保：</strong></p>
<ol>
<li>你有一个正在运行的 Supabase 项目。</li>
<li>在你的 Supabase 控制台的 “Project Settings -&gt; API” 中找到 <code>Project URL</code> 和 <code>anon public</code> Key。</li>
<li>在你的环境中设置 <code>SUPABASE_URL</code> 和 <code>SUPABASE_ANON_KEY</code> 环境变量。</li>
<li>在你的 <code>public</code> schema 中有一个名为 <code>users</code> 的表，结构类似 <code>id INT PRIMARY KEY, name TEXT, email TEXT UNIQUE</code>。</li>
<li>确保 <code>public.users</code> 表的 RLS 策略允许匿名用户进行 SELECT 和 INSERT 操作，例如：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 启用RLS</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> public.users ENABLE <span class="type">ROW</span> LEVEL SECURITY;</span><br><span class="line"><span class="comment">-- 允许匿名用户选择</span></span><br><span class="line"><span class="keyword">CREATE</span> POLICY &quot;Allow anon select&quot; <span class="keyword">ON</span> public.users <span class="keyword">FOR</span> <span class="keyword">SELECT</span> <span class="keyword">TO</span> anon <span class="keyword">USING</span> (<span class="literal">TRUE</span>);</span><br><span class="line"><span class="comment">-- 允许匿名用户插入</span></span><br><span class="line"><span class="keyword">CREATE</span> POLICY &quot;Allow anon insert&quot; <span class="keyword">ON</span> public.users <span class="keyword">FOR</span> <span class="keyword">INSERT</span> <span class="keyword">TO</span> anon <span class="keyword">WITH</span> <span class="keyword">CHECK</span> (<span class="literal">TRUE</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h2><p>Supabase 通过将强大的 PostgreSQL 数据库与一系列集成且开箱即用的后端服务相结合，为开发者提供了一个极具吸引力的 BaaS 平台。它不仅显著提高了开发效率，降低了运维门槛，还通过其开源特性和 PostgreSQL 的灵活性，提供了超越传统 BaaS 产品的可定制性和控制能力。无论是快速启动新项目、构建复杂的数据驱动应用，还是寻求 Firebase 的开源替代品，Supabase 都是一个值得深入探索和考虑的优秀选择。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/15920229f914/">https://blog.tbf1211.xx.kg/15920229f914/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Serverless/">Serverless</a><a class="post-meta__tags" href="/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1/">云服务</a><a class="post-meta__tags" href="/tags/2025/">2025</a><a class="post-meta__tags" href="/tags/BaaS/">BaaS</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-29.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/bcbe0f78ef1d/" title="Go Jaeger 深度解析：分布式追踪实践"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-32.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Go Jaeger 深度解析：分布式追踪实践</div></div><div class="info-2"><div class="info-item-1"> Jaeger 是一个开源的分布式追踪系统，由 Uber Technologies 开发并捐赠给 Cloud Native Computing Foundation (CNCF)。它用于监控和排除基于微服务架构的复杂分布式系统中的故障。通过收集、存储和可视化请求在各个服务之间的调用链，Jaeger 帮助开发者理解请求流、识别性能瓶颈和诊断错误。  核心思想：Jaeger 实现了 OpenTracing API（现已融合到 OpenTelemetry 中），通过在请求流经每个服务时生成和传递独特的追踪上下文 (Trace Context)，并在每个服务中记录操作信息 (Span)，将分散的日志和指标关联起来，形成完整的请求链路视图。   一、为什么需要分布式追踪？在单体应用时代，通过日志和 APM (Application Performance Monitoring) 工具可以相对容易地定位问题。然而，随着服务架构向微服务演进，一个用户请求可能涉及数十甚至上百个独立服务的协同处理。这带来了新的挑战：  请求链路复杂性：难以追踪一个请求从前端到后端，再穿越多个微服务的完整路径。 性...</div></div></div></a><a class="pagination-related" href="/ac609e6566a8/" title="DAST (Dynamic Application Security Testing) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-21.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">DAST (Dynamic Application Security Testing) 详解</div></div><div class="info-2"><div class="info-item-1"> DAST (Dynamic Application Security Testing)，中文译为动态应用程序安全测试，是一种黑盒安全测试方法。它通过模拟恶意攻击者的行为，在不接触应用程序源代码的情况下，对正在运行的应用程序（包括Web应用、API和服务）进行测试，以发现运行时存在的安全漏洞。 DAST 工具会向应用程序发送各种恶意输入和请求，然后分析应用程序的响应，以识别潜在的漏洞，例如 SQL 注入、跨站脚本 (XSS)、不安全的直接对象引用等。  核心思想：DAST 从外部视角模拟真实世界的攻击，测试应用程序在实际运行环境中的安全性。它关注的是应用程序在被部署和运行时可能暴露出的漏洞，而非代码本身的缺陷。   一、为什么需要 DAST？在软件开发生命周期 (SDLC) 中，确保应用程序安全至关重要。虽然静态应用程序安全测试 (SAST) 可以从代码层面发现漏洞，但 DAST 弥补了 SAST 的不足：  真实运行环境：DAST 在应用程序部署后运行，测试的是实际的配置、部署环境和第三方组件交互，能够发现只在运行时暴露的漏洞（例如，不正确的服务器配置、环境变量泄露、跨域资源共...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/320c0615580a/" title="云服务模型详解：SaaS、PaaS、IaaS、BaaS、FaaS"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-24.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-05</div><div class="info-item-2">云服务模型详解：SaaS、PaaS、IaaS、BaaS、FaaS</div></div><div class="info-2"><div class="info-item-1"> 随着云计算技术的飞速发展，传统的本地部署 (On-Premise) 模式正逐步被各种 “即服务” (as-a-Service, XaaS) 模型所取代。这些模型为企业和开发者提供了不同层次的抽象和管理便利性，从而降低了运营成本、提高了部署效率和系统弹性。本文将深入解析 IaaS (基础设施即服务)、PaaS (平台即服务)、SaaS (软件即服务) 这三大核心模型，并进一步探讨 BaaS (后端即服务) 和 FaaS (函数即服务) 这些更为专业化的云服务模式。  一、引言：XaaS 模型的演进与核心理念“即服务” (as-a-Service, XaaS) 是一个涵盖广泛的云计算术语，它描述了通过互联网按需提供 IT 资源的服务模式。其核心理念是将 IT 基础设施、平台或软件作为一种服务交付给用户，用户无需购买、安装、维护底层硬件和软件，只需根据使用量付费。 XaaS 模型的主要目标是：  降低成本：减少前期硬件投资和长期运维费用。 提高灵活性：根据业务需求快速扩展或缩减资源。 聚焦核心业务：将 IT 运营的复杂性转移给服务提供商，企业可以更专注于自身的业务创新。 增强可用性与...</div></div></div></a><a class="pagination-related" href="/ffb632aa27a9/" title="Cloudflare Workers 代码编写详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-14.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-27</div><div class="info-item-2">Cloudflare Workers 代码编写详解</div></div><div class="info-2"><div class="info-item-1"> Cloudflare Workers 是一项基于 V8 引擎的 Serverless 平台，允许开发者在 Cloudflare 的全球网络边缘部署和运行 JavaScript、TypeScript 或 WebAssembly 代码。它将计算逻辑尽可能地靠近用户，从而极大地减少延迟，提高应用响应速度。Workers 的特点是超低延迟、高并发、易于部署和扩展，是构建现代无服务器应用的强大工具。  核心思想：Cloudflare Workers 允许开发者在 Cloudflare 的全球边缘网络上运行轻量级、高性能的无服务器函数。核心开发模式是编写符合 Service Worker API 或 ES Modules 规范的 JavaScript&#x2F;TypeScript 代码，响应 HTTP 请求、与 KV 存储交互、执行自定义逻辑，并通过 Wrangler CLI 进行部署和管理。   一、Cloudflare Workers 基础概念 边缘计算 (Edge Computing)：Workers 代码运行在全球 275+ 个 Cloudflare 数据中心中的任何一个，靠近最...</div></div></div></a><a class="pagination-related" href="/1cdd169d9683/" title="Cloudflare免费服务详解：守护与加速你的在线资产"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-02.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-26</div><div class="info-item-2">Cloudflare免费服务详解：守护与加速你的在线资产</div></div><div class="info-2"><div class="info-item-1"> 在今天的互联网世界，网站和应用程序的性能、安全性和可用性至关重要。对于许多个人站长、小型企业和开发者而言，昂贵的基础设施和安全解决方案往往是难以承受的负担。而这正是 Cloudflare 的价值所在。Cloudflare 以其强大的全球网络和创新的技术，提供了一系列业界领先的免费服务，旨在让任何在线资产都能轻松享受到企业级的性能、安全和可靠性。  “Cloudflare 的免费套餐，不仅仅是‘入门级’，它为数百万网站提供了生产环境级别的保护和加速。对于个人站长和中小企业来说，它是构建和维护在线业务不可或缺的免费‘瑞士军刀’。”   一、Cloudflare 免费服务概述Cloudflare 成立于 2009 年，目标是“构建更好的互联网”。它通过在全球部署大量的边缘节点 (Edge Network)，将 CDN、DNS、DDoS 保护、WAF (Web Application Firewall, Web应用防火墙)、SSL&#x2F;TLS 加密等功能集成在一个平台中。其免费服务涵盖了网站运营的多个核心方面：  DNS 管理：全球最快的 DNS 解析服务。 CDN 加速：内容分...</div></div></div></a><a class="pagination-related" href="/eb28471ad368/" title="Cloudflare Argo Tunnel 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-30.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-30</div><div class="info-item-2">Cloudflare Argo Tunnel 详解</div></div><div class="info-2"><div class="info-item-1"> Cloudflare Argo Tunnel 是一种安全连接服务，它允许用户通过 Cloudflare 全球网络，以仅出站 (outbound-only) 的方式将私有服务（如Web服务器、SSH、数据库等）安全地暴露给互联网，而无需在源服务器上打开任何入站防火墙端口。这有效地将源服务器隐藏在 Cloudflare 网络之后，从而保护其免受直接攻击和IP泄露。  核心思想：消除传统防火墙入站端口的需求，通过建立从源服务器到 Cloudflare 边缘网络的持久性、加密的出站连接，实现服务暴露。   一、为什么需要 Argo Tunnel？传统的将内部服务暴露给互联网的方式通常涉及：  开放防火墙端口：在服务器的防火墙或路由器上配置端口转发，允许外部流量直接进入。这增加了攻击面，要求持续监控和维护安全组规则。 公网 IP 地址：源服务器需要一个公网 IP 地址，使其直接暴露在互联网上，容易成为DDoS攻击、端口扫描、漏洞探测的目标。 VPN 或堡垒机：对于内部访问，可能需要复杂的 VPN 设置或维护堡垒机，增加了运维复杂性。  Argo Tunnel 旨在解决这些问题，提供一种更...</div></div></div></a><a class="pagination-related" href="/e4825d97fe27/" title="Netlify介绍"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-15.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-17</div><div class="info-item-2">Netlify介绍</div></div><div class="info-2"><div class="info-item-1"> Netlify 是一个领先的自动化平台，用于部署和托管现代 Web 项目。它将持续集成&#x2F;持续部署 (CI&#x2F;CD)、全球内容分发网络 (CDN)、Serverless Functions 和边缘计算等功能整合到一个统一的工作流中。Netlify 广受欢迎，尤其是在 Jamstack 生态系统中，它简化了 Web 应用程序的构建、部署和扩展过程，让开发者能够专注于代码，而无需管理复杂的服务器基础设施。  核心思想：Netlify 提供了一个一站式的“前端云”平台，它将 Git 仓库连接、自动化构建、全球 CDN 部署、Serverless 后端和附加服务无缝集成，旨在为开发者提供最快速、最简便的现代化 Web 应用部署体验。   一、为什么选择 Netlify？传统的 Web 部署通常涉及配置服务器、管理 CDN、设置 CI&#x2F;CD 管道等复杂任务。Netlify 应运而生，解决了这些痛点，提供了一套高效的解决方案：  极简部署：只需连接 Git 仓库，每次代码提交都会自动构建和部署。 Jamstack 优化：完美支持静态站点生成器 (SSG) 和单页应...</div></div></div></a><a class="pagination-related" href="/487df70cf615/" title="Vercel Serverless Functions 深度详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-07.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-14</div><div class="info-item-2">Vercel Serverless Functions 深度详解</div></div><div class="info-2"><div class="info-item-1"> Vercel Serverless Functions 是 Vercel 平台的核心服务之一，它允许开发者部署并运行后端代码，而无需管理任何服务器基础设施。这些函数是轻量级的、按需执行的计算单元，能够根据流量自动扩缩容，并天然集成到 Vercel 的全球 CDN 和部署工作流中。Vercel Functions 不仅为 Next.js 提供了强大的 API 路由支持，还允许开发者使用多种编程语言（如 Node.js, Python, Go, Ruby 等）构建独立的后端服务。  核心思想：Vercel Serverless Functions 提供了一种高效、自动扩缩容的无状态计算环境，使开发者能够将后端逻辑作为独立的函数部署到 Vercel 的全球边缘网络。其核心优势在于与前端框架的无缝集成、多语言支持、自动管理基础设施，并通过 Git 驱动的部署流程，极大地简化了全栈应用的开发和运维。   一、Vercel Serverless Functions 概览1.1 核心概念 无服务器 (Serverless)：你无需预置或管理任何服务器。Vercel 负责所有基础设施的配置、维...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">539</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">229</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-Supabase%EF%BC%9F"><span class="toc-text">一、为什么需要 Supabase？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Supabase-%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6"><span class="toc-text">二、Supabase 核心组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-PostgreSQL-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2.1 PostgreSQL 数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-GoTrue-Authentication"><span class="toc-text">2.2 GoTrue (Authentication)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-PostgREST-RESTful-API"><span class="toc-text">2.3 PostgREST (RESTful API)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-Realtime-%E5%AE%9E%E6%97%B6%E6%9C%8D%E5%8A%A1"><span class="toc-text">2.4 Realtime (实时服务)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-Storage-%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8"><span class="toc-text">2.5 Storage (对象存储)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-Edge-Functions-%E8%BE%B9%E7%BC%98%E5%87%BD%E6%95%B0"><span class="toc-text">2.6 Edge Functions (边缘函数)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-Dashboard-%E6%8E%A7%E5%88%B6%E9%9D%A2%E6%9D%BF"><span class="toc-text">2.7 Dashboard (控制面板)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Supabase-%E4%B8%BB%E8%A6%81%E7%89%B9%E6%80%A7"><span class="toc-text">三、Supabase 主要特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Supabase-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-text">四、Supabase 的优缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%BC%98%E7%82%B9"><span class="toc-text">4.1 优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E7%BC%BA%E7%82%B9"><span class="toc-text">4.2 缺点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">五、适用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81Go-%E8%AF%AD%E8%A8%80%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BA%A4%E4%BA%92%E7%A4%BA%E4%BE%8B-%E6%A6%82%E5%BF%B5%E6%80%A7"><span class="toc-text">六、Go 语言客户端交互示例 (概念性)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">七、总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/f81355a662b8/" title="ECMAScript ShadowRealm 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-08.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ECMAScript ShadowRealm 详解"/></a><div class="content"><a class="title" href="/f81355a662b8/" title="ECMAScript ShadowRealm 详解">ECMAScript ShadowRealm 详解</a><time datetime="2026-02-01T22:24:00.000Z" title="发表于 2026-02-02 06:24:00">2026-02-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/88fea7b52158/" title="Gzip 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-07.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Gzip 详解"/></a><div class="content"><a class="title" href="/88fea7b52158/" title="Gzip 详解">Gzip 详解</a><time datetime="2026-01-29T22:24:00.000Z" title="发表于 2026-01-30 06:24:00">2026-01-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/8fc7e3e72510/" title="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解"/></a><div class="content"><a class="title" href="/8fc7e3e72510/" title="前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解">前端渲染模式：CSR, SSR, SSG, ISR, DPR 详解</a><time datetime="2026-01-27T22:24:00.000Z" title="发表于 2026-01-28 06:24:00">2026-01-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/5341a0037256/" title="CSS-in-JS 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-01.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSS-in-JS 详解"/></a><div class="content"><a class="title" href="/5341a0037256/" title="CSS-in-JS 详解">CSS-in-JS 详解</a><time datetime="2026-01-25T22:24:00.000Z" title="发表于 2026-01-26 06:24:00">2026-01-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/0b52cb819619/" title="Git 核心对象：Commit, Tree, Blob 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-17.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git 核心对象：Commit, Tree, Blob 详解"/></a><div class="content"><a class="title" href="/0b52cb819619/" title="Git 核心对象：Commit, Tree, Blob 详解">Git 核心对象：Commit, Tree, Blob 详解</a><time datetime="2026-01-21T22:24:00.000Z" title="发表于 2026-01-22 06:24:00">2026-01-22</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-29.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/archives/2023/" target="_blank" title="🆕 2023">🆕 2023</a><a href="/archives/2024/" target="_blank" title="🆒 2024">🆒 2024</a><a href="/archives/2025/" target="_blank" title="👨‍👩‍👦 2025">👨‍👩‍👦 2025</a><a href="/archives/2026/" target="_blank" title="🆙 2026">🆙 2026</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="📁 分类">📁 分类</a><a href="/tags/" target="_blank" title="🔖 标签">🔖 标签</a><a href="/categories/" target="_blank" title="📽️ 时间线">📽️ 时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="💬 说说">💬 说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2026 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.9/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const parseViewBox = viewBox => {
    if (!viewBox) return null
    const parts = viewBox.trim().split(/[\s,]+/).map(n => Number(n))
    if (parts.length !== 4 || parts.some(n => Number.isNaN(n))) return null
    return parts
  }

  const getSvgViewBox = svg => {
    const attr = parseViewBox(svg.getAttribute('viewBox'))
    if (attr) return attr

    // Fallback: use bbox to build a viewBox
    try {
      const bbox = svg.getBBox()
      if (bbox && bbox.width && bbox.height) return [bbox.x, bbox.y, bbox.width, bbox.height]
    } catch (e) {
      // getBBox may fail on some edge cases; ignore
    }

    const w = Number(svg.getAttribute('width')) || 0
    const h = Number(svg.getAttribute('height')) || 0
    if (w > 0 && h > 0) return [0, 0, w, h]
    return [0, 0, 100, 100]
  }

  const setSvgViewBox = (svg, vb) => {
    svg.setAttribute('viewBox', `${vb[0]} ${vb[1]} ${vb[2]} ${vb[3]}`)
  }

  const clamp = (v, min, max) => Math.max(min, Math.min(max, v))

  const openSvgInNewTab = ({ source, initViewBox }) => {
    const getClonedSvg = () => {
      if (typeof source === 'string') {
        const template = document.createElement('template')
        template.innerHTML = source.trim()
        const svg = template.content.querySelector('svg')
        return svg ? svg.cloneNode(true) : null
      }
      if (source && typeof source.cloneNode === 'function') {
        return source.cloneNode(true)
      }
      return null
    }

    const clone = getClonedSvg()
    if (!clone) return
    if (initViewBox && initViewBox.length === 4) {
      clone.setAttribute('viewBox', initViewBox.join(' '))
    }
    if (!clone.getAttribute('xmlns')) clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg')
    if (!clone.getAttribute('xmlns:xlink') && clone.outerHTML.includes('xlink:')) {
      clone.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink')
    }
    // inject background to match current theme
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark'
    const bg = getComputedStyle(document.body).backgroundColor || (isDark ? '#1e1e1e' : '#ffffff')
    if (!clone.style.background) clone.style.background = bg

    const serializer = new XMLSerializer()
    const svgSource = serializer.serializeToString(clone)
    const htmlSource = `<!doctype html><html><head><meta charset="utf-8" />
      <style>
        html, body { width: 100%; height: 100%; margin: 0; display: flex; align-items: center; justify-content: center; background: ${bg}; }
        svg { max-width: 100%; max-height: 100%; height: auto; width: auto; }
      </style>
      </head><body>${svgSource}</body></html>`
    const blob = new Blob([htmlSource], { type: 'text/html;charset=utf-8' })
    const url = URL.createObjectURL(blob)
    window.open(url, '_blank', 'noopener')
    setTimeout(() => URL.revokeObjectURL(url), 30000)
  }

  const attachMermaidViewerButton = wrap => {
    let btn = wrap.querySelector('.mermaid-open-btn')
    if (!btn) {
      btn = document.createElement('button')
      btn.type = 'button'
      btn.className = 'mermaid-open-btn'
      wrap.appendChild(btn)
    }

    btn.innerHTML = '<i class="fa fa-search fa-fw" aria-hidden="true"></i>'

    if (!btn.__mermaidViewerBound) {
      btn.addEventListener('click', e => {
        e.preventDefault()
        e.stopPropagation()
        const svg = wrap.__mermaidOriginalSvg || wrap.querySelector('svg')
        if (!svg) return
        const initViewBox = wrap.__mermaidInitViewBox
        if (typeof svg === 'string') {
          openSvgInNewTab({ source: svg, initViewBox })
          return
        }
        openSvgInNewTab({ source: svg, initViewBox })
      })
      btn.__mermaidViewerBound = true
    }
  }

  // Zoom around a point (px, py) in the SVG viewport (in viewBox coordinates)
  const zoomAtPoint = (vb, factor, px, py) => {
    const w = vb[2] * factor
    const h = vb[3] * factor
    const nx = px - (px - vb[0]) * factor
    const ny = py - (py - vb[1]) * factor
    return [nx, ny, w, h]
  }

  const initMermaidGestures = wrap => {
    const svg = wrap.querySelector('svg')
    if (!svg) return

    // Ensure viewBox exists so gestures always work
    const initVb = getSvgViewBox(svg)
    wrap.__mermaidInitViewBox = initVb
    wrap.__mermaidCurViewBox = initVb.slice()
    setSvgViewBox(svg, initVb)

    // Avoid binding multiple times on themeChange/pjax
    if (wrap.__mermaidGestureBound) return
    wrap.__mermaidGestureBound = true

    // Helper: map client (viewport) coordinate -> viewBox coordinate
    const clientToViewBox = (clientX, clientY) => {
      const rect = svg.getBoundingClientRect()
      const vb = wrap.__mermaidCurViewBox || getSvgViewBox(svg)
      const x = vb[0] + (clientX - rect.left) * (vb[2] / rect.width)
      const y = vb[1] + (clientY - rect.top) * (vb[3] / rect.height)
      return { x, y, rect, vb }
    }

    const state = {
      pointers: new Map(),
      startVb: null,
      startDist: 0,
      startCenter: null
    }

    const clampVb = vb => {
      const init = wrap.__mermaidInitViewBox || vb
      const minW = init[2] * 0.1
      const maxW = init[2] * 10
      const minH = init[3] * 0.1
      const maxH = init[3] * 10
      vb[2] = clamp(vb[2], minW, maxW)
      vb[3] = clamp(vb[3], minH, maxH)
      return vb
    }

    const setCurVb = vb => {
      vb = clampVb(vb)
      wrap.__mermaidCurViewBox = vb
      setSvgViewBox(svg, vb)
    }

    const onPointerDown = e => {
      // Allow only primary button for mouse
      if (e.pointerType === 'mouse' && e.button !== 0) return
      svg.setPointerCapture(e.pointerId)
      state.pointers.set(e.pointerId, { x: e.clientX, y: e.clientY })

      if (state.pointers.size === 1) {
        state.startVb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
      } else if (state.pointers.size === 2) {
        const pts = [...state.pointers.values()]
        const dx = pts[0].x - pts[1].x
        const dy = pts[0].y - pts[1].y
        state.startDist = Math.hypot(dx, dy)
        state.startVb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
        state.startCenter = { x: (pts[0].x + pts[1].x) / 2, y: (pts[0].y + pts[1].y) / 2 }
      }
    }

    const onPointerMove = e => {
      if (!state.pointers.has(e.pointerId)) return
      state.pointers.set(e.pointerId, { x: e.clientX, y: e.clientY })

      // Pan with 1 pointer
      if (state.pointers.size === 1 && state.startVb) {
        const p = [...state.pointers.values()][0]
        const prev = { x: e.clientX - e.movementX, y: e.clientY - e.movementY }
        // movementX/Y unreliable on touch, compute from stored last position
        const last = wrap.__mermaidLastSinglePointer || p
        const dxClient = p.x - last.x
        const dyClient = p.y - last.y
        wrap.__mermaidLastSinglePointer = p

        const { rect } = clientToViewBox(p.x, p.y)
        const vb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
        const dx = dxClient * (vb[2] / rect.width)
        const dy = dyClient * (vb[3] / rect.height)
        setCurVb([vb[0] - dx, vb[1] - dy, vb[2], vb[3]])
        return
      }

      // Pinch zoom with 2 pointers
      if (state.pointers.size === 2 && state.startVb && state.startDist > 0) {
        const pts = [...state.pointers.values()]
        const dx = pts[0].x - pts[1].x
        const dy = pts[0].y - pts[1].y
        const dist = Math.hypot(dx, dy)
        if (!dist) return
        const factor = state.startDist / dist // dist bigger => zoom in (viewBox smaller)

        const cx = (pts[0].x + pts[1].x) / 2
        const cy = (pts[0].y + pts[1].y) / 2
        const centerClient = { x: cx, y: cy }

        const pxy = clientToViewBox(centerClient.x, centerClient.y)
        const cpx = pxy.x
        const cpy = pxy.y

        const vb = zoomAtPoint(state.startVb, factor, cpx, cpy)
        setCurVb(vb)
      }
    }

    const onPointerUpOrCancel = e => {
      state.pointers.delete(e.pointerId)
      if (state.pointers.size === 0) {
        state.startVb = null
        state.startDist = 0
        state.startCenter = null
        wrap.__mermaidLastSinglePointer = null
      } else if (state.pointers.size === 1) {
        // reset single pointer baseline to avoid jump
        wrap.__mermaidLastSinglePointer = [...state.pointers.values()][0]
      }
    }

    // Wheel zoom (mouse/trackpad)
    const onWheel = e => {
      // ctrlKey on mac trackpad pinch; we treat both as zoom
      e.preventDefault()
      const delta = e.deltaY
      const zoomFactor = delta > 0 ? 1.1 : 0.9
      const { x, y } = clientToViewBox(e.clientX, e.clientY)
      const vb = (wrap.__mermaidCurViewBox || getSvgViewBox(svg)).slice()
      setCurVb(zoomAtPoint(vb, zoomFactor, x, y))
    }

    const onDblClick = () => {
      const init = wrap.__mermaidInitViewBox
      if (!init) return
      wrap.__mermaidCurViewBox = init.slice()
      setSvgViewBox(svg, init)
    }

    svg.addEventListener('pointerdown', onPointerDown)
    svg.addEventListener('pointermove', onPointerMove)
    svg.addEventListener('pointerup', onPointerUpOrCancel)
    svg.addEventListener('pointercancel', onPointerUpOrCancel)
    svg.addEventListener('wheel', onWheel, { passive: false })
    svg.addEventListener('dblclick', onDblClick)
  }

  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild

      // Clear old render (themeChange/pjax will rerun)
      const oldSvg = item.querySelector('svg')
      if (oldSvg) oldSvg.remove()
      item.__mermaidGestureBound = false

      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
        if (false) initMermaidGestures(item)
        item.__mermaidOriginalSvg = svg
        if (true) attachMermaidViewerButton(item)
      }


      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="ture"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      true
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div></body></html>