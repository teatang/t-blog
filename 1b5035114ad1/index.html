<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Python Requests库详解：HTTP请求的艺术 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="requests 库 是 Python 生态系统中最流行、最强大、也是最优雅的 HTTP 客户端库之一。它简化了复杂的 HTTP 请求操作，让开发者能够以极少量的代码发送各种类型的 HTTP 请求，并轻松处理响应。与 Python 内置的 urllib 模块相比，requests 提供了更友好、更直观的 API，被誉为“面向人类的 HTTP 服务”。  核心思想：requests 封装了底层 H">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Requests库详解：HTTP请求的艺术">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/1b5035114ad1/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="requests 库 是 Python 生态系统中最流行、最强大、也是最优雅的 HTTP 客户端库之一。它简化了复杂的 HTTP 请求操作，让开发者能够以极少量的代码发送各种类型的 HTTP 请求，并轻松处理响应。与 Python 内置的 urllib 模块相比，requests 提供了更友好、更直观的 API，被誉为“面向人类的 HTTP 服务”。  核心思想：requests 封装了底层 H">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-16.jpg">
<meta property="article:published_time" content="2023-02-27T22:24:00.000Z">
<meta property="article:modified_time" content="2026-01-16T10:25:31.934Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="2023">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="Requests">
<meta property="article:tag" content="HTTP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-16.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Python Requests库详解：HTTP请求的艺术",
  "url": "https://blog.tbf1211.xx.kg/1b5035114ad1/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-16.jpg",
  "datePublished": "2023-02-27T22:24:00.000Z",
  "dateModified": "2026-01-16T10:25:31.934Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/1b5035114ad1/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Python Requests库详解：HTTP请求的艺术',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">497</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">226</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-16.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">Python Requests库详解：HTTP请求的艺术</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Python Requests库详解：HTTP请求的艺术</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2023-02-27T22:24:00.000Z" title="发表于 2023-02-28 06:24:00">2023-02-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/%E5%BA%93/">库</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>12分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><strong><code>requests</code> 库</strong> 是 Python 生态系统中最流行、最强大、也是最优雅的 HTTP 客户端库之一。它简化了复杂的 HTTP 请求操作，让开发者能够以极少量的代码发送各种类型的 HTTP 请求，并轻松处理响应。与 Python 内置的 <code>urllib</code> 模块相比，<code>requests</code> 提供了更友好、更直观的 API，被誉为“面向人类的 HTTP 服务”。</p>
</blockquote>
<div class="note info flat"><p>核心思想：<code>requests</code> 封装了底层 HTTP 协议的复杂性，提供简洁的 API，让开发者专注于业务逻辑而非网络通信的细节。</p>
</div>
<hr>
<h2 id="一、为什么选择-Requests？"><a href="#一、为什么选择-Requests？" class="headerlink" title="一、为什么选择 Requests？"></a>一、为什么选择 Requests？</h2><p>在 Python 中进行 HTTP 请求有多种方式，例如内置的 <code>urllib</code> 模块。但 <code>requests</code> 库之所以广受欢迎，主要得益于以下优势：</p>
<ol>
<li><strong>友好的 API</strong>：设计直观，易学易用，代码可读性高。</li>
<li><strong>功能强大</strong>：支持几乎所有 HTTP 功能，包括 GET, POST, PUT, DELETE 等方法，以及请求头、数据、文件上传、Cookie、身份认证、代理、SSL 验证等。</li>
<li><strong>自动处理</strong>：自动处理 URL 编码、重定向、会话管理等常见任务。</li>
<li><strong>JSON 支持</strong>：内置 JSON 编解码功能，方便与 RESTful API 交互。</li>
<li><strong>优秀的文档</strong>：官方文档清晰明了，社区活跃，问题解决方便。</li>
</ol>
<h2 id="二、安装-Requests"><a href="#二、安装-Requests" class="headerlink" title="二、安装 Requests"></a>二、安装 Requests</h2><p><code>requests</code> 并非 Python 的内置库，需要通过 <code>pip</code> 安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure>

<p>安装完成后，就可以在 Python 代码中导入并使用了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br></pre></td></tr></table></figure>

<h2 id="三、基本用法：发送各种请求"><a href="#三、基本用法：发送各种请求" class="headerlink" title="三、基本用法：发送各种请求"></a>三、基本用法：发送各种请求</h2><p><code>requests</code> 库提供了与 HTTP 动词同名的函数来发送请求，例如 <code>requests.get()</code>、<code>requests.post()</code> 等。</p>
<h3 id="3-1-GET-请求"><a href="#3-1-GET-请求" class="headerlink" title="3.1 GET 请求"></a>3.1 GET 请求</h3><p>GET 请求是最常见的请求类型，用于从服务器获取资源。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 基本 GET 请求</span></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;状态码: <span class="subst">&#123;response.status_code&#125;</span>&quot;</span>) <span class="comment"># 200 表示成功</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;字符编码: <span class="subst">&#123;response.encoding&#125;</span>&quot;</span>)  <span class="comment"># 自动猜测编码</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;响应文本长度: <span class="subst">&#123;<span class="built_in">len</span>(response.text)&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 带参数的 GET 请求 (Query Parameters)</span></span><br><span class="line"><span class="comment"># 方式一：直接拼接在 URL 中 (不推荐，容易出错且不安全)</span></span><br><span class="line"><span class="comment"># response = requests.get(&#x27;http://httpbin.org/get?param1=value1&amp;param2=value2&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式二：使用 params 字典 (推荐)</span></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;北京&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.get(<span class="string">&#x27;http://httpbin.org/get&#x27;</span>, params=params)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;带参数 GET 请求的 URL: <span class="subst">&#123;response.url&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;响应的 JSON 数据: <span class="subst">&#123;response.json()&#125;</span>&quot;</span>) <span class="comment"># 如果响应是 JSON 格式，可以直接解析</span></span><br></pre></td></tr></table></figure>

<p><strong>响应对象 (Response Object)</strong>：<code>requests.get()</code> 返回一个 <code>Response</code> 对象，它包含了服务器响应的所有信息：</p>
<ul>
<li><code>response.status_code</code>：HTTP 状态码（如 200, 404, 500）。</li>
<li><code>response.text</code>：响应体的文本内容，<code>requests</code> 会根据响应头猜测编码。</li>
<li><code>response.content</code>：响应体的原始字节内容，适用于非文本数据（如图片、文件）。</li>
<li><code>response.json()</code>：如果响应是 JSON 格式，此方法会将其解析为 Python 字典或列表。</li>
<li><code>response.headers</code>：响应头信息，字典类型。</li>
<li><code>response.url</code>：请求的最终 URL（处理完重定向后的）。</li>
<li><code>response.encoding</code>：<code>requests</code> 猜测的响应编码。</li>
</ul>
<h3 id="3-2-POST-请求"><a href="#3-2-POST-请求" class="headerlink" title="3.2 POST 请求"></a>3.2 POST 请求</h3><p>POST 请求用于向服务器提交数据，通常用于创建新资源或发送表单数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 提交表单数据 (POST with form data)</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;username&#x27;</span>: <span class="string">&#x27;testuser&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;testpassword&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.post(<span class="string">&#x27;http://httpbin.org/post&#x27;</span>, data=data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;表单 POST 响应: <span class="subst">&#123;response.json()&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># 在 httpbin.org/post 的响应中，data 字段会显示提交的表单数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 提交 JSON 数据 (POST with JSON data)</span></span><br><span class="line">json_data = &#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;details&#x27;</span>: &#123;<span class="string">&#x27;hobby&#x27;</span>: <span class="string">&#x27;programming&#x27;</span>, <span class="string">&#x27;language&#x27;</span>: <span class="string">&#x27;python&#x27;</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line">response = requests.post(<span class="string">&#x27;http://httpbin.org/post&#x27;</span>, json=json_data)</span><br><span class="line"><span class="comment"># requests 会自动设置 Content-Type 为 application/json</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;JSON POST 响应: <span class="subst">&#123;response.json()&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># 在 httpbin.org/post 的响应中，json 字段会显示提交的 JSON 数据</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-其他-HTTP-方法"><a href="#3-3-其他-HTTP-方法" class="headerlink" title="3.3 其他 HTTP 方法"></a>3.3 其他 HTTP 方法</h3><p><code>requests</code> 也支持 PUT、DELETE、HEAD、OPTIONS 方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PUT 请求 (通常用于更新资源)</span></span><br><span class="line">response = requests.put(<span class="string">&#x27;http://httpbin.org/put&#x27;</span>, data=&#123;<span class="string">&#x27;field&#x27;</span>: <span class="string">&#x27;value&#x27;</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;PUT 响应: <span class="subst">&#123;response.json()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># DELETE 请求 (通常用于删除资源)</span></span><br><span class="line">response = requests.delete(<span class="string">&#x27;http://httpbin.org/delete&#x27;</span>, params=&#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">123</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;DELETE 响应: <span class="subst">&#123;response.json()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># HEAD 请求 (只获取响应头，不获取响应体)</span></span><br><span class="line">response = requests.head(<span class="string">&#x27;http://httpbin.org/get&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;HEAD 响应头: <span class="subst">&#123;response.headers&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># OPTIONS 请求 (获取服务器支持的通信选项)</span></span><br><span class="line">response = requests.options(<span class="string">&#x27;http://httpbin.org/get&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;OPTIONS 响应头: <span class="subst">&#123;response.headers&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="四、高级用法"><a href="#四、高级用法" class="headerlink" title="四、高级用法"></a>四、高级用法</h2><h3 id="4-1-请求头-Headers"><a href="#4-1-请求头-Headers" class="headerlink" title="4.1 请求头 (Headers)"></a>4.1 请求头 (Headers)</h3><p>通过 <code>headers</code> 参数可以添加自定义请求头，这在爬虫中模拟浏览器行为（如 User-Agent）、API 认证等方面非常有用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json, text/plain, */*&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://www.some-website.com/&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">&#x27;http://httpbin.org/headers&#x27;</span>, headers=headers)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;自定义请求头响应: <span class="subst">&#123;response.json()[<span class="string">&#x27;headers&#x27;</span>]&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-2-文件上传-File-Uploads"><a href="#4-2-文件上传-File-Uploads" class="headerlink" title="4.2 文件上传 (File Uploads)"></a>4.2 文件上传 (File Uploads)</h3><p>通过 <code>files</code> 参数可以方便地上传文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设要上传一个名为 &#x27;my_file.txt&#x27; 的文件</span></span><br><span class="line"><span class="comment"># with open(&#x27;my_file.txt&#x27;, &#x27;w&#x27;) as f:</span></span><br><span class="line"><span class="comment">#     f.write(&quot;This is a test file for upload.&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># files 参数可以是一个字典，键是表单字段名，值是文件对象或元组</span></span><br><span class="line"><span class="comment"># (文件名, 文件内容, 文件类型, 自定义请求头)</span></span><br><span class="line">files = &#123;</span><br><span class="line">    <span class="string">&#x27;file&#x27;</span>: (<span class="string">&#x27;my_file.txt&#x27;</span>, <span class="built_in">open</span>(<span class="string">&#x27;my_file.txt&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>), <span class="string">&#x27;text/plain&#x27;</span>, &#123;<span class="string">&#x27;Expires&#x27;</span>: <span class="string">&#x27;0&#x27;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以直接传递文件对象</span></span><br><span class="line"><span class="comment"># files = &#123;&#x27;file&#x27;: open(&#x27;my_file.txt&#x27;, &#x27;rb&#x27;)&#125;</span></span><br><span class="line"></span><br><span class="line">response = requests.post(<span class="string">&#x27;http://httpbin.org/post&#x27;</span>, files=files)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;文件上传响应: <span class="subst">&#123;response.json()&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-3-Cookie-处理"><a href="#4-3-Cookie-处理" class="headerlink" title="4.3 Cookie 处理"></a>4.3 Cookie 处理</h3><p><code>requests</code> 在会话 (Session) 中会自动管理 Cookie。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 获取服务器设置的 Cookie</span></span><br><span class="line">response = requests.get(<span class="string">&#x27;http://httpbin.org/cookies/set/mycookie/myvalue&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;服务器设置的 Cookie: <span class="subst">&#123;response.cookies&#125;</span>&quot;</span>) <span class="comment"># requests.cookies.RequestsCookieJar 对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 发送自定义 Cookie</span></span><br><span class="line">cookies = &#123;<span class="string">&#x27;session_id&#x27;</span>: <span class="string">&#x27;abc123xyz&#x27;</span>, <span class="string">&#x27;theme&#x27;</span>: <span class="string">&#x27;dark&#x27;</span>&#125;</span><br><span class="line">response = requests.get(<span class="string">&#x27;http://httpbin.org/cookies&#x27;</span>, cookies=cookies)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;发送自定义 Cookie 响应: <span class="subst">&#123;response.json()&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-4-会话-Session-对象"><a href="#4-4-会话-Session-对象" class="headerlink" title="4.4 会话 (Session) 对象"></a>4.4 会话 (Session) 对象</h3><p><code>requests.Session()</code> 对象允许跨请求保持某些参数，例如 Cookie、请求头、身份认证等。这在需要多次与同一服务交互时非常有用，可以避免重复设置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个 Session 对象</span></span><br><span class="line">session = requests.Session()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Session 会自动保存 Cookie</span></span><br><span class="line">session.get(<span class="string">&#x27;http://httpbin.org/cookies/set/sessioncookie/sessionvalue&#x27;</span>)</span><br><span class="line">response = session.get(<span class="string">&#x27;http://httpbin.org/cookies&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Session 自动携带的 Cookie: <span class="subst">&#123;response.json()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Session 也可以保留自定义的请求头</span></span><br><span class="line">session.headers.update(&#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;MyCustomSessionAgent/1.0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X-Custom-Header&#x27;</span>: <span class="string">&#x27;SessionValue&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">response = session.get(<span class="string">&#x27;http://httpbin.org/headers&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Session 自定义请求头: <span class="subst">&#123;response.json()[<span class="string">&#x27;headers&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 Session 进行其他请求</span></span><br><span class="line">response = session.post(<span class="string">&#x27;http://httpbin.org/post&#x27;</span>, data=&#123;<span class="string">&#x27;payload&#x27;</span>: <span class="string">&#x27;session data&#x27;</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Session POST 请求: <span class="subst">&#123;response.json()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">session.close() <span class="comment"># 使用完毕后关闭 Session</span></span><br></pre></td></tr></table></figure>

<h3 id="4-5-身份认证-Authentication"><a href="#4-5-身份认证-Authentication" class="headerlink" title="4.5 身份认证 (Authentication)"></a>4.5 身份认证 (Authentication)</h3><p><code>requests</code> 支持多种身份认证方式。</p>
<ul>
<li><p><strong>HTTP 基本认证 (Basic Auth)</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> requests.auth <span class="keyword">import</span> HTTPBasicAuth</span><br><span class="line">response = requests.get(<span class="string">&#x27;http://httpbin.org/basic-auth/user/passwd&#x27;</span>, auth=HTTPBasicAuth(<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;passwd&#x27;</span>))</span><br><span class="line"><span class="comment"># 或者更简洁的写法</span></span><br><span class="line"><span class="comment"># response = requests.get(&#x27;http://httpbin.org/basic-auth/user/passwd&#x27;, auth=(&#x27;user&#x27;, &#x27;passwd&#x27;))</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Basic Auth 响应状态: <span class="subst">&#123;response.status_code&#125;</span>, 认证结果: <span class="subst">&#123;response.json()&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>其他认证</strong>：<code>requests</code> 也支持摘要认证 (Digest Auth) 和 OAuth 等，但通常需要安装额外的库。</p>
</li>
</ul>
<h3 id="4-6-代理-Proxies"><a href="#4-6-代理-Proxies" class="headerlink" title="4.6 代理 (Proxies)"></a>4.6 代理 (Proxies)</h3><p>在网络爬虫中，使用代理是常见的反抓取机制。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">proxies = &#123;</span><br><span class="line">    <span class="string">&#x27;http&#x27;</span>: <span class="string">&#x27;http://127.0.0.1:8080&#x27;</span>,  <span class="comment"># HTTP 代理</span></span><br><span class="line">    <span class="string">&#x27;https&#x27;</span>: <span class="string">&#x27;http://127.0.0.1:8080&#x27;</span>, <span class="comment"># HTTPS 代理</span></span><br><span class="line">    <span class="comment"># &#x27;https&#x27;: &#x27;https://user:password@proxy.example.com:8080&#x27; # 带认证的代理</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    response = requests.get(<span class="string">&#x27;http://ipecho.net/plain&#x27;</span>, proxies=proxies, timeout=<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;通过代理请求后的 IP: <span class="subst">&#123;response.text&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> requests.exceptions.Timeout:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求超时&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> requests.exceptions.ConnectionError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;代理连接失败&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-7-SSL-证书验证"><a href="#4-7-SSL-证书验证" class="headerlink" title="4.7 SSL 证书验证"></a>4.7 SSL 证书验证</h3><p>默认情况下，<code>requests</code> 会验证 SSL 证书。如果遇到自签名证书或本地开发环境，可能需要关闭验证（<strong>不推荐生产环境使用</strong>）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认开启 SSL 验证</span></span><br><span class="line"><span class="comment"># response = requests.get(&#x27;https://example.com&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭 SSL 验证 (不安全，仅用于开发或测试)</span></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://example.com&#x27;</span>, verify=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-8-超时设置-Timeout"><a href="#4-8-超时设置-Timeout" class="headerlink" title="4.8 超时设置 (Timeout)"></a>4.8 超时设置 (Timeout)</h3><p>设置超时时间可以防止请求长时间挂起。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requests.exceptions <span class="keyword">import</span> Timeout, ConnectionError</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 设置连接超时为 1 秒，读取超时为 30 秒</span></span><br><span class="line">    response = requests.get(<span class="string">&#x27;http://httpbin.org/delay/5&#x27;</span>, timeout=(<span class="number">1</span>, <span class="number">30</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;请求成功: <span class="subst">&#123;response.status_code&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Timeout:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求超时 (连接或读取数据时间过长)&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ConnectionError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;连接错误 (无法访问服务器)&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;发生其他错误: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 只设置总超时时间</span></span><br><span class="line">    response = requests.get(<span class="string">&#x27;http://httpbin.org/delay/2&#x27;</span>, timeout=<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;请求成功: <span class="subst">&#123;response.status_code&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Timeout:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求超时 (总时间超过1秒)&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-9-错误与异常处理"><a href="#4-9-错误与异常处理" class="headerlink" title="4.9 错误与异常处理"></a>4.9 错误与异常处理</h3><p><code>requests</code> 会抛出特定的异常来表示网络请求过程中可能遇到的问题。</p>
<ul>
<li><code>requests.exceptions.RequestException</code>：所有 <code>requests</code> 异常的基类。</li>
<li><code>requests.exceptions.ConnectionError</code>：网络连接问题（如 DNS 解析失败，拒绝连接）。</li>
<li><code>requests.exceptions.HTTPError</code>：HTTP 状态码错误 (4XX 或 5XX)，只有调用 <code>response.raise_for_status()</code> 时才会抛出。</li>
<li><code>requests.exceptions.Timeout</code>：请求超时。</li>
<li><code>requests.exceptions.TooManyRedirects</code>：重定向次数过多。</li>
</ul>
<p><strong>最佳实践：</strong> 总是使用 <code>try...except</code> 语句来处理可能发生的网络异常。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requests.exceptions <span class="keyword">import</span> RequestException, HTTPError</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    response = requests.get(<span class="string">&#x27;https://api.github.com/nonexistent_url&#x27;</span>)</span><br><span class="line">    <span class="comment"># 检查 HTTP 状态码，如果不是 2xx，则抛出 requests.exceptions.HTTPError</span></span><br><span class="line">    response.raise_for_status()</span><br><span class="line">    <span class="built_in">print</span>(response.json())</span><br><span class="line"><span class="keyword">except</span> HTTPError <span class="keyword">as</span> http_err:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;HTTP 错误发生: <span class="subst">&#123;http_err&#125;</span> - <span class="subst">&#123;response.status_code&#125;</span> <span class="subst">&#123;response.reason&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;响应内容: <span class="subst">&#123;response.text&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> RequestException <span class="keyword">as</span> req_err:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;请求发生错误: <span class="subst">&#123;req_err&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;发生未知错误: <span class="subst">&#123;err&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="五、总结与最佳实践"><a href="#五、总结与最佳实践" class="headerlink" title="五、总结与最佳实践"></a>五、总结与最佳实践</h2><p><code>requests</code> 库以其简洁、强大和优雅的 API，成为 Python 进行 HTTP 请求的首选工具。掌握其基本用法和高级功能，能够大大提升开发效率。</p>
<p><strong>最佳实践提醒：</strong></p>
<ul>
<li><strong>使用 Session</strong>：对于需要进行多次请求（尤其是需要保持 Cookie 或自定义请求头）的场景，始终使用 <code>requests.Session()</code> 对象。</li>
<li><strong>处理异常</strong>：总是使用 <code>try...except</code> 块来捕获和处理 <code>requests</code> 可能抛出的异常，特别是 <code>ConnectionError</code> 和 <code>Timeout</code>。</li>
<li><strong>检查状态码</strong>：在处理响应前，检查 <code>response.status_code</code> 或调用 <code>response.raise_for_status()</code> 来确保请求成功。</li>
<li><strong>设置超时</strong>：为所有网络请求设置 <code>timeout</code> 参数，避免程序长时间挂起。</li>
<li><strong>谨慎对待 <code>verify=False</code></strong>：在生产环境中，尽量避免关闭 SSL 证书验证。</li>
<li><strong>模拟浏览器行为</strong>：在爬虫场景中，适当地设置 <code>User-Agent</code> 等请求头，可以减少被网站识别和屏蔽的风险。</li>
<li><strong>明确数据类型</strong>：<code>data</code> 用于表单数据，<code>json</code> 用于 JSON 数据。</li>
<li><strong>注意编码</strong>：<code>requests</code> 会自动猜测响应编码，但如果出现乱码，可以手动设置 <code>response.encoding</code>。</li>
</ul>
<p>通过上述详解和示例，希望你能更好地理解和运用 <code>requests</code> 库，在网络编程和数据抓取等任务中得心应手。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/1b5035114ad1/">https://blog.tbf1211.xx.kg/1b5035114ad1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/2023/">2023</a><a class="post-meta__tags" href="/tags/Python/">Python</a><a class="post-meta__tags" href="/tags/Requests/">Requests</a><a class="post-meta__tags" href="/tags/HTTP/">HTTP</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-16.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/c86d0a022c83/" title="React入门教程：快速构建交互式用户界面"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-31.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">React入门教程：快速构建交互式用户界面</div></div><div class="info-2"><div class="info-item-1"> React (通常称为 React.js 或 ReactJS) 是一个用于构建用户界面的 JavaScript 库，由 Facebook (现为 Meta) 创建和维护。它允许开发者声明式地创建复杂的、交互式的 UI，其核心思想是组件化和响应式更新。React 专注于视图层，与传统 MVC 模式中的 V (View) 相对应。  核心思想：“声明式地”构建组件化的 UI。开发者描述 UI 在给定状态下的样子，React 负责高效地更新 DOM 以匹配该状态。    重要提示: React 主要使用 TypeScript 或 JavaScript (JSX) 进行开发。本文档中的所有代码示例都将使用 TypeScript (TSX) 语言，以满足类型安全的需求。  一、为什么需要 React？在现代 Web 开发中，构建复杂的用户界面面临诸多挑战：  DOM 操作的复杂性与性能瓶颈：直接操作 DOM 繁琐且容易出错，尤其是在数据频繁变化时，手动优化 DOM 更新的性能极其困难。 代码组织与复用性：随着应用规模的增长，UI 代码变得难以管理，组件之间的逻辑耦合高，复用性差。 状态管...</div></div></div></a><a class="pagination-related" href="/402798405a2e/" title="如何从 HTTP 请求中获取用户 IP 地址详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-28.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">如何从 HTTP 请求中获取用户 IP 地址详解</div></div><div class="info-2"><div class="info-item-1"> 用户 IP 地址 (Internet Protocol Address) 是互联网上设备的唯一标识符，对于网络服务而言，获取用户 IP 地址是常见需求。它在诸多场景中扮演着关键角色，如日志记录、地理位置定位、安全分析、流量统计、反欺诈和访问控制等。然而，由于现代网络架构中广泛使用代理服务器、负载均衡器和 CDN (内容分发网络)，直接获取用户的真实 IP 地址并非总是直截了当。本文将详细探讨如何从 HTTP 请求中正确、安全地获取用户 IP 地址，并提供 Go 语言示例。  核心思想：获取用户 IP 地址的关键在于理解 HTTP 请求的 RemoteAddr (直接连接客户端的 IP) 和一系列 X-Forwarded-For, X-Real-IP 等非标准但广泛使用的 HTTP 头。正确解析这些信息需要结合部署环境（是否存在代理、CDN）及安全考量。   一、IP 地址及其获取的重要性1.1 什么是 IP 地址？IP 地址是分配给连接到计算机网络的设备的数字标签，用于在网络中标识和定位设备。它分为 IPv4（如 192.168.1.1）和 IPv6（如 2001:0db8:8...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/06bc4d655ced/" title="Python Beautiful Soup详解：高效网页数据抓取与解析利器"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-12.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-09</div><div class="info-item-2">Python Beautiful Soup详解：高效网页数据抓取与解析利器</div></div><div class="info-2"><div class="info-item-1"> Beautiful Soup 是一个 Python 库，用于从 HTML 或 XML 文件中提取数据。它通过解析文档并提供用于导航、搜索和修改解析树的 Pythonic 接口，将复杂的 HTML&#x2F;XML 文档转化为易于处理的数据结构。Beautiful Soup 与 requests 等 HTTP 库结合使用，是构建网络爬虫进行数据抓取的强大工具。  核心思想：Beautiful Soup 将杂乱的 HTML&#x2F;XML 文档“煲成一锅美味的汤”，让你能够轻松地在其中挑选出你需要的数据元素，如同在厨房里筛选食材一样简单。   一、为什么需要 Beautiful Soup？在网络上，大量有价值的信息以 HTML 页面的形式存在。如果我们需要从这些页面中获取结构化数据（例如，产品信息、新闻标题、评论内容），直接操作原始的 HTML 字符串是非常困难和脆弱的。传统的字符串查找和正则表达式虽然可行，但存在以下问题：  HTML 结构复杂：HTML 标签嵌套层级深，结构不规则，使用正则表达式难以精确匹配。 HTML 容错性：浏览器会自动纠正不规范的 HTML 结构，但正则...</div></div></div></a><a class="pagination-related" href="/cb923ba84dd9/" title="Python NumPy详解：科学计算的基石"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-12.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-15</div><div class="info-item-2">Python NumPy详解：科学计算的基石</div></div><div class="info-2"><div class="info-item-1"> NumPy (Numerical Python) 是 Python 中用于科学计算的核心库。它提供了一个高性能的多维数组对象 ndarray，以及用于处理这些数组的工具。NumPy 是 Python 数据科学和机器学习生态系统的基石，许多其他库（如 SciPy, Pandas, Matplotlib, Scikit-learn）都建立在 NumPy 数组之上。  核心思想：NumPy 引入了高效的 ndarray 数据结构，通过向量化操作显著提升了 Python 处理数值数据的性能。   一、为什么选择 NumPy？Python 语言本身处理列表等数据结构时效率较高，但对于大规模数值计算而言，原生的 Python 列表效率低下。NumPy 通过以下方式解决了这个问题：  高性能 ndarray 对象：ndarray 存储同类型数据，在内存中连续存储，相比 Python 列表，占用的内存更少，访问速度更快。 向量化操作：NumPy 允许对整个数组进行操作，而无需编写显式的循环。这些操作通常在 C 或 Fortran 中实现，执行速度远超 Python 循环。 广播 (Broadc...</div></div></div></a><a class="pagination-related" href="/97dc2f650f49/" title="Jinja2 深度解析"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-07.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-12</div><div class="info-item-2">Jinja2 深度解析</div></div><div class="info-2"><div class="info-item-1"> Jinja2 是一个功能强大、灵活且广泛使用的 Python 模板引擎。它由 Armin Ronacher 创建，是 Flask Web 框架默认的模板引擎，但也常用于其他 Python 项目，如静态网站生成、自动化配置管理（例如 Ansible）等。Jinja2 的设计灵感来源于 Django 模板语言，但提供了更多高级功能和更易用的 API。 本文将深入探讨 Jinja2 的核心特性，并着重介绍一系列高效使用技巧，帮助开发者更优雅、更高效地构建动态内容。  核心思想：Jinja2 旨在将应用的逻辑（Python 代码）与展示逻辑（HTML&#x2F;文本）清晰地分离。它提供了一种简洁的语法，允许开发者在模板中嵌入变量、控制结构（如循环、条件判断）和自定义过滤器，从而动态生成文本内容。高效利用 Jinja2 的高级功能和最佳实践，可以显著提升开发效率和模板的可维护性。   一、为什么需要模板引擎？在 Web 开发或其他需要生成动态文本内容的场景中，我们经常需要将程序数据（如从数据库获取的数据、用户输入等）与预定义的结构化文本（如 HTML 页面、配置文件、邮件内容）结合起来。...</div></div></div></a><a class="pagination-related" href="/109739b91598/" title="Python Matplotlib 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-08.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-22</div><div class="info-item-2">Python Matplotlib 详解</div></div><div class="info-2"><div class="info-item-1"> Matplotlib 是一个用于创建静态、动态和交互式可视化在 Python 中的综合库。它提供了强大的工具集，用于生成各种出版质量级别的图表，从简单的线图、散点图到复杂的3D图表和动画。它是 Python 科学计算生态系统（如 NumPy, SciPy, Pandas）中不可或缺的一部分。  核心思想：提供一个灵活、可高度定制的绘图框架，让开发者能够精确控制图表的每一个细节，以满足从数据探索到学术出版的各种可视化需求。   一、为什么需要 Matplotlib？在数据分析、科学研究、工程计算等领域，数据可视化是理解数据、发现模式和传达洞察的关键。然而，手动绘制图表或使用通用工具往往效率低下且难以定制。Matplotlib 旨在解决以下问题：  数据理解：海量数据以表格形式呈现时难以理解，通过图表能够直观展示数据的分布、趋势和关系。 报告与演示：需要高质量、专业级的图表用于学术论文、商业报告或演示文稿。 定制化需求：通用绘图工具可能无法满足特定的可视化需求，需要能够对图表的每个元素（颜色、字体、线条、布局等）进行精确控制。 编程集成：希望在 Python 程序中直接生成和操作图...</div></div></div></a><a class="pagination-related" href="/91353ff26772/" title="Peewee ORM 详解：接口使用与实践"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-23.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-11</div><div class="info-item-2">Peewee ORM 详解：接口使用与实践</div></div><div class="info-2"><div class="info-item-1"> Peewee 是一个小型、富有表现力、功能齐全的 Python ORM (Object-Relational Mapper)。它提供了一种简单且 Pythonic 的方式来与数据库进行交互，支持 SQLite、PostgreSQL 和 MySQL 等多种关系型数据库。Peewee 的设计理念是轻量级和易用性，使得开发者可以快速地构建应用程序，而无需编写大量的 SQL 语句。  核心思想：将数据库表映射为 Python 类，将表的行映射为类的实例，将表的列映射为类的属性。 通过 Python 对象和方法来操作数据库，从而抽象掉底层的 SQL 细节。   一、为什么选择 Peewee？在 Python 生态中，存在多种 ORM 解决方案，如 SQLAlchemy、Django ORM 等。Peewee 在其中脱颖而出，主要归因于以下特点：  轻量级与简洁性：Peewee 本身代码量较少，API 设计简洁直观，学习曲线平缓。 富有表现力：其查询 API 允许开发者使用类似 Python 原生语法的方式链式调用，构建复杂的查询。 兼容性强：支持 SQLite、PostgreSQL 和 ...</div></div></div></a><a class="pagination-related" href="/f52f9b242f1c/" title="Python装饰器详解：从基础到高级应用"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-04.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-15</div><div class="info-item-2">Python装饰器详解：从基础到高级应用</div></div><div class="info-2"><div class="info-item-1"> Python 装饰器 (Decorators) 是一种高级的 Python 语法糖，它允许你在不修改原始函数定义的情况下，增强或修改函数的功能。装饰器本质上是一个 Python 函数，它接收一个函数作为参数，并返回一个修改后或增强后的新函数。它们是实现“开闭原则”（对扩展开放，对修改关闭）的重要工具，常用于日志记录、性能测试、事务处理、权限验证等场景，属于面向切面编程 (AOP) 的范畴。  核心思想：装饰器是“函数套函数”的语法糖，通过闭包的特性，在不改变被装饰函数代码的情况下，为其添加预处理、后处理或其他功能。    一、理解装饰器前的预备知识要真正理解装饰器，我们需要先掌握几个 Python 核心概念： 1.1 函数是第一类对象 (First-Class Objects)在 Python 中，函数与其他数据类型（如整数、字符串）一样，是第一类对象。这意味着你可以：  将函数赋值给变量 将函数作为参数传递给其他函数 将函数作为另一个函数的返回值 在数据结构中存储函数  示例： 123456789101112131415161718192021def greet(name):...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">497</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">226</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-Requests%EF%BC%9F"><span class="toc-text">一、为什么选择 Requests？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85-Requests"><span class="toc-text">二、安装 Requests</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%EF%BC%9A%E5%8F%91%E9%80%81%E5%90%84%E7%A7%8D%E8%AF%B7%E6%B1%82"><span class="toc-text">三、基本用法：发送各种请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-GET-%E8%AF%B7%E6%B1%82"><span class="toc-text">3.1 GET 请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-POST-%E8%AF%B7%E6%B1%82"><span class="toc-text">3.2 POST 请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%85%B6%E4%BB%96-HTTP-%E6%96%B9%E6%B3%95"><span class="toc-text">3.3 其他 HTTP 方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95"><span class="toc-text">四、高级用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E8%AF%B7%E6%B1%82%E5%A4%B4-Headers"><span class="toc-text">4.1 请求头 (Headers)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-File-Uploads"><span class="toc-text">4.2 文件上传 (File Uploads)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Cookie-%E5%A4%84%E7%90%86"><span class="toc-text">4.3 Cookie 处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E4%BC%9A%E8%AF%9D-Session-%E5%AF%B9%E8%B1%A1"><span class="toc-text">4.4 会话 (Session) 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81-Authentication"><span class="toc-text">4.5 身份认证 (Authentication)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E4%BB%A3%E7%90%86-Proxies"><span class="toc-text">4.6 代理 (Proxies)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-SSL-%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81"><span class="toc-text">4.7 SSL 证书验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-%E8%B6%85%E6%97%B6%E8%AE%BE%E7%BD%AE-Timeout"><span class="toc-text">4.8 超时设置 (Timeout)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-%E9%94%99%E8%AF%AF%E4%B8%8E%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">4.9 错误与异常处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%80%BB%E7%BB%93%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">五、总结与最佳实践</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/e62a1e8acade/" title="AI 辅助编程的关键要点与代码幻觉防范"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-02.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI 辅助编程的关键要点与代码幻觉防范"/></a><div class="content"><a class="title" href="/e62a1e8acade/" title="AI 辅助编程的关键要点与代码幻觉防范">AI 辅助编程的关键要点与代码幻觉防范</a><time datetime="2026-01-15T22:24:00.000Z" title="发表于 2026-01-16 06:24:00">2026-01-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/fa3d796f3333/" title="MessagePack 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-26.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MessagePack 详解"/></a><div class="content"><a class="title" href="/fa3d796f3333/" title="MessagePack 详解">MessagePack 详解</a><time datetime="2026-01-08T22:24:00.000Z" title="发表于 2026-01-09 06:24:00">2026-01-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/82bf00e3828f/" title="传统命令行工具的现代补强与替代方案详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-11.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="传统命令行工具的现代补强与替代方案详解"/></a><div class="content"><a class="title" href="/82bf00e3828f/" title="传统命令行工具的现代补强与替代方案详解">传统命令行工具的现代补强与替代方案详解</a><time datetime="2026-01-06T22:24:00.000Z" title="发表于 2026-01-07 06:24:00">2026-01-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cecf96486ef4/" title="IPC (Inter-Process Communication) 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IPC (Inter-Process Communication) 详解"/></a><div class="content"><a class="title" href="/cecf96486ef4/" title="IPC (Inter-Process Communication) 详解">IPC (Inter-Process Communication) 详解</a><time datetime="2026-01-04T22:24:00.000Z" title="发表于 2026-01-05 06:24:00">2026-01-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/3059cdc5f529/" title="Golang sqlc 框架详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Golang sqlc 框架详解"/></a><div class="content"><a class="title" href="/3059cdc5f529/" title="Golang sqlc 框架详解">Golang sqlc 框架详解</a><time datetime="2026-01-01T22:24:00.000Z" title="发表于 2026-01-02 06:24:00">2026-01-02</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-16.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/archives/2023/" target="_blank" title="🆕 2023">🆕 2023</a><a href="/archives/2024/" target="_blank" title="🆒 2024">🆒 2024</a><a href="/archives/2025/" target="_blank" title="👨‍👩‍👦 2025">👨‍👩‍👦 2025</a><a href="/archives/2026/" target="_blank" title="🆙 2026">🆙 2026</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="📁 分类">📁 分类</a><a href="/tags/" target="_blank" title="🔖 标签">🔖 标签</a><a href="/categories/" target="_blank" title="📽️ 时间线">📽️ 时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="💬 说说">💬 说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2026 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="ture"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      true
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.3"></script></div></div></body></html>