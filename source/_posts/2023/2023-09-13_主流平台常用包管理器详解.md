---
title: 主流平台常用包管理器详解
date: 2023-09-13 06:24:00
tags:
  - 2023
  - 包管理
categories:
  - 编程技巧
---

> **包管理器 (Package Manager)** 是一种自动化工具，用于简化软件的安装、升级、配置和卸载过程。它维护一个软件包数据库，跟踪已安装的软件包及其依赖关系，确保系统上的所有软件都处于一致和可用的状态。无论是操作系统层面还是编程语言层面，包管理器都是现代软件开发和系统管理不可或缺的工具。

{% note info %}
**核心思想：** 包管理器旨在**自动化依赖管理**，提供**中心化的软件包仓库**，确保**软件的完整性和可重复性**，从而提高开发效率和系统稳定性。
{% endnote %}
------

## 一、操作系统级包管理器

操作系统级包管理器负责管理操作系统及其核心组件以及用户应用程序。它们通常与操作系统的发行版紧密集成。

### 1.1 Linux：APT (Debian/Ubuntu)

*   **全称**：Advanced Package Tool
*   **适用系统**：Debian、Ubuntu 及其衍生版。
*   **特点**：
    *   **`.deb` 格式**：使用 `.deb` 软件包文件。
    *   **依赖解决**：强大的依赖管理能力，会自动下载并安装所有必需的依赖项。
    *   **仓库**：通过 `sources.list` 文件配置软件源。
    *   **命令行工具**：`apt` (新一代命令，推荐使用)、`apt-get` (老一代，但功能依然强大)、`apt-cache`。
*   **常用命令**：
    *   `sudo apt update`：更新可用软件包列表。
    *   `sudo apt upgrade`：升级所有已安装的软件包。
    *   `sudo apt install <package_name>`：安装软件包。
    *   `sudo apt remove <package_name>`：卸载软件包（保留配置文件）。
    *   `sudo apt purge <package_name>`：完全卸载软件包（包括配置文件）。
    *   `apt search <keyword>`：搜索软件包。
    *   `apt show <package_name>`：显示软件包详细信息。

### 1.2 Linux：Yum / DNF (RHEL/CentOS/Fedora)

*   **全称**：
    *   Yum (Yellowdog Updater, Modified)
    *   DNF (Dandified Yum)
*   **适用系统**：Red Hat Enterprise Linux (RHEL)、CentOS、Fedora、openSUSE (部分)、Oracle Linux。
*   **特点**：
    *   **`.rpm` 格式**：使用 `.rpm` 软件包文件。
    *   **Yum**：RHEL/CentOS 6/7 的标准包管理器。
    *   **DNF**：Fedora 22+ 和 RHEL/CentOS 8+ 的默认包管理器，旨在改进 Yum 的性能、内存使用和依赖解析算法。
    *   **仓库**：通过 `.repo` 文件配置软件源。
*   **常用命令 (Yum)**：
    *   `sudo yum update`：更新所有已安装的软件包。
    *   `sudo yum install <package_name>`：安装软件包。
    *   `sudo yum remove <package_name>`：卸载软件包。
    *   `sudo yum search <keyword>`：搜索软件包。
*   **常用命令 (DNF)**：DNF 的命令与 Yum 非常相似，但通常更推荐使用 DNF。
    *   `sudo dnf update`：更新所有已安装的软件包。
    *   `sudo dnf install <package_name>`：安装软件包。
    *   `sudo dnf remove <package_name>`：卸载软件包。
    *   `sudo dnf search <keyword>`：搜索软件包。

### 1.3 macOS：Homebrew

*   **全称**：通常直接称为 Homebrew。
*   **适用系统**：macOS (也支持 Linux，称为 Linuxbrew 或 Homebrew on Linux)。
*   **特点**：
    *   **“缺失的 macOS 包管理器”**：非 Apple 官方，但被广泛接受和使用。
    *   **Cask**：除了命令行工具 (formulae)，还支持安装 GUI 应用程序 (casks)，如 Chrome、VS Code。
    *   **Git 管理**：所有软件包定义 (formulae) 都存储在 Git 仓库中，易于贡献和更新。
    *   **安装目录**：默认安装在 `/usr/local` (Intel) 或 `/opt/homebrew` (Apple Silicon)。
*   **常用命令**：
    *   `brew update`：更新 Homebrew 及其软件包定义。
    *   `brew upgrade`：升级所有已安装的软件包。
    *   `brew install <package_name>`：安装软件包。
    *   `brew uninstall <package_name>`：卸载软件包。
    *   `brew search <keyword>`：搜索软件包。
    *   `brew doctor`：检查 Homebrew 环境是否存在问题。
    *   `brew install --cask <app_name>`：安装 GUI 应用程序。

### 1.4 Windows：Chocolatey

*   **全称**：通常直接称为 Chocolatey。
*   **适用系统**：Windows。
*   **特点**：
    *   **命令行安装**：将 Linux 风格的命令行包管理带到 Windows。
    *   **`NuGet` 基础**：基于 `.NET` 和 `NuGet` 包管理。
    *   **安装目录**：通常安装到 `C:\ProgramData\chocolatey`。
    *   **高度集成**：可以安装 `.exe`、`.msi`、zip 包等多种形式的软件。
*   **常用命令**：
    *   `choco install <package_name>`：安装软件包。
    *   `choco upgrade <package_name>`：升级软件包。
    *   `choco uninstall <package_name>`：卸载软件包。
    *   `choco search <keyword>`：搜索软件包。
    *   `choco outdated`：列出需要升级的软件包。

### 1.5 Windows：Winget (Windows Package Manager)

*   **全称**：Windows Package Manager
*   **适用系统**：Windows 10 (1709+) 和 Windows 11。
*   **特点**：
    *   **微软官方**：由微软开发和维护。
    *   **CLI 工具**：提供 `winget` 命令行接口。
    *   **Manifest 文件**：软件包信息通过 YAML 格式的 manifest 文件定义。
    *   **集成 Store**：未来可能与 Microsoft Store 深度集成。
*   **常用命令**：
    *   `winget install <package_name>`：安装软件包。
    *   `winget upgrade <package_name>`：升级软件包。
    *   `winget uninstall <package_name>`：卸载软件包。
    *   `winget search <keyword>`：搜索软件包。
    *   `winget list`：列出已安装的软件包。

## 二、编程语言级包管理器

编程语言级包管理器专注于管理特定编程语言的库、框架和模块。它们解决了在项目中共享和重用代码的挑战。

### 2.1 JavaScript / Node.js：npm / Yarn / pnpm

*   **全称**：
    *   npm (Node Package Manager)
    *   Yarn (Yet Another Resource Negotiator)
    *   pnpm (Performant npm)
*   **适用语言**：JavaScript / TypeScript (Node.js 生态系统)。
*   **特点**：
    *   **`package.json`**：项目配置文件，定义了项目的元数据和依赖。
    *   **`node_modules`**：默认安装目录，存放所有依赖。
    *   **npm**：Node.js 的默认包管理器，拥有最大的生态系统。
    *   **Yarn**：Facebook 开发，旨在解决 npm v3 之前的一些性能和安全问题，引入了 `yarn.lock` 保证依赖一致性。
    *   **pnpm**：通过**内容可寻址存储** (Content-Addressable Store) 和**符号链接** (symlinks) 优化了磁盘空间占用和安装速度，解决了 `node_modules` 深度嵌套的问题。
*   **常用命令 (通用)**：
    *   `npm install` / `yarn install` / `pnpm install`：安装项目所有依赖。
    *   `npm install <package>` / `yarn add <package>` / `pnpm add <package>`：安装新包。
    *   `npm uninstall <package>` / `yarn remove <package>` / `pnpm remove <package>`：卸载包。
    *   `npm update` / `yarn upgrade` / `pnpm update`：更新包。
    *   `npm run <script>` / `yarn <script>` / `pnpm <script>`：运行 `package.json` 中定义的脚本。

### 2.2 Python：pip / Poetry / pipenv

*   **全称**：
    *   pip (Pip Installs Packages)
    *   Poetry
    *   pipenv
*   **适用语言**：Python。
*   **特点**：
    *   **`PyPI` (Python Package Index)**：官方的 Python 包仓库。
    *   **`requirements.txt`**：通过 `pip freeze > requirements.txt` 生成，用于记录项目依赖。
    *   **虚拟环境 (Virtual Environments)**：Python 最佳实践，通过 `venv` 或 `virtualenv` 创建隔离的开发环境，避免依赖冲突。
    *   **pip**：Python 的标准包安装工具，简单易用。
    *   **pipenv**：旨在结合 pip 和 virtualenv 的功能，提供更高级的依赖管理和虚拟环境集成。使用 `Pipfile` 和 `Pipfile.lock`。
    *   **Poetry**：提供完整的依赖管理和项目打包解决方案，使用 `pyproject.toml`。
*   **常用命令 (pip)**：
    *   `pip install <package_name>`：安装包。
    *   `pip install -r requirements.txt`：安装 `requirements.txt` 中的所有包。
    *   `pip uninstall <package_name>`：卸载包。
    *   `pip list`：列出已安装的包。
*   **常用命令 (Poetry)**：
    *   `poetry install`：安装项目所有依赖。
    *   `poetry add <package>`：安装新包。
    *   `poetry remove <package>`：卸载包。
    *   `poetry update`：更新包。
    *   `poetry run <command>`：在虚拟环境中运行命令。

### 2.3 Go：Go Modules

*   **全称**：Go Modules。
*   **适用语言**：Go。
*   **特点**：
    *   **官方依赖管理方案**：Go 1.11+ 版本引入，解决了之前 `GOPATH` 模式的痛点。
    *   **`go.mod` 文件**：记录模块路径、Go 版本和直接依赖。
    *   **`go.sum` 文件**：记录所有依赖的校验和，保证依赖的完整性和安全性。
    *   **版本语义化 (Semantic Versioning)**：通过模块路径和版本号管理依赖。
    *   **去中心化**：不依赖单个中央仓库，可以直接从 Git 仓库拉取模块。
*   **常用命令**：
    *   `go mod init <module_path>`：初始化新模块。
    *   `go mod tidy`：清理和同步 `go.mod` 和 `go.sum` 文件，添加缺失的依赖，移除不再使用的依赖。
    *   `go get <package_path>`：下载并安装包，并更新 `go.mod`。
    *   `go mod download`：下载模块依赖。
    *   `go mod graph`：打印模块依赖图。
    *   `go mod vendor`：将依赖复制到 `vendor` 目录（可选）。

### 2.4 Java：Maven / Gradle

*   **全称**：
    *   Maven (Apache Maven)
    *   Gradle
*   **适用语言**：Java (也支持 Groovy, Scala, Kotlin 等 JVM 语言)。
*   **特点**：
    *   **`Maven Central`**：最大的 Java 生态系统仓库。
    *   **Maven**：
        *   **`pom.xml`**：基于 XML 的项目对象模型文件，定义了项目的结构、依赖、插件等。
        *   **约定优于配置**：提供了标准的项目结构和生命周期。
        *   **强大的插件生态**：支持各种构建任务。
    *   **Gradle**：
        *   **`build.gradle`**：基于 Groovy 或 Kotlin DSL (Domain Specific Language) 配置构建脚本。
        *   **灵活性**：比 Maven 更灵活，可以编写复杂的自定义构建逻辑。
        *   **性能**：利用增量构建和任务缓存提高构建速度。
*   **常用命令 (Maven)**：
    *   `mvn clean`：清理项目。
    *   `mvn compile`：编译源代码。
    *   `mvn package`：打包项目（如生成 `.jar` 或 `.war`）。
    *   `mvn install`：将包安装到本地 Maven 仓库。
    *   `mvn deploy`：将包部署到远程仓库。
    *   `mvn test`：运行测试。
*   **常用命令 (Gradle)**：
    *   `gradle clean`：清理项目。
    *   `gradle build`：构建项目。
    *   `gradle run`：运行项目。
    *   `gradle test`：运行测试。

### 2.5 Rust：Cargo

*   **全称**：Cargo。
*   **适用语言**：Rust。
*   **特点**：
    *   **Rust 的官方包管理器和构建系统**：集成了依赖管理、代码编译、测试和文档生成。
    *   **`crates.io`**：Rust 社区的中央包仓库。
    *   **`Cargo.toml`**：TOML 格式的项目配置文件，定义了项目的元数据和依赖。
    *   **`Cargo.lock`**：记录了所有依赖的具体版本，确保构建的可复现性。
*   **常用命令**：
    *   `cargo new <project_name>`：创建新项目。
    *   `cargo build`：编译项目。
    *   `cargo run`：编译并运行项目。
    *   `cargo test`：运行测试。
    *   `cargo add <crate_name>`：添加依赖。
    *   `cargo update`：更新依赖。
    *   `cargo publish`：发布包到 `crates.io`。

## 三、总结

包管理器是现代软件开发不可或缺的基石。它们解决了复杂的依赖管理问题，提供了一个中心化的软件分发和更新机制，极大地提高了开发效率和系统的稳定性。无论是管理操作系统的底层组件，还是处理编程语言的第三方库，理解并熟练使用这些包管理器都是每个开发者和系统管理员的基本功。选择合适的包管理器，并遵循其最佳实践，能够让我们的开发工作更加顺畅和高效。