---
title: React入门教程：快速构建交互式用户界面
date: 2023-03-01 06:24:00
tags:
  - 2023
  - TypeScript
  - JavaScript
  - React
  - 前端技术
categories:
  - 前端技术
  - React
---

> **React (通常称为 React.js 或 ReactJS)** 是一个由 Facebook 开发并维护的**用于构建用户界面 (UI) 的 JavaScript 库**。它以其**组件化**、**声明式**的编程范式和高效的 **虚拟 DOM (Virtual DOM)** 机制而闻名。本入门教程将带你领略 React 的核心概念，并指导你搭建第一个 React 应用，让你快速掌握构建交互式前端应用的基础。

{% note info %}
“React 并不是一个完整的框架，而是一个专注于 UI 层面的库。它鼓励你将 UI 拆分成独立、可复用的小块（组件），从而让代码更易于管理、开发和测试。学习 React，就是学习如何思考和构建组件。”
{% endnote %}

## 一、React 的核心理念

### 1.1 组件化 (Component-Based)

React 的核心是**组件 (Component)**。你可以将复杂的 UI 拆分为独立的、可复用的、封装性良好的小组件。每个组件都有自己的逻辑和外观，它们可以组合起来形成更复杂的 UI。

*   **示例**：一个电商网站可以分解为：`Header` 组件、`ProductList` 组件、`ProductCard` 组件、`Button` 组件、`ShoppingCart` 组件等。

### 1.2 声明式编程 (Declarative)

与命令式编程（如直接操作 DOM）不同，React 采用声明式编程。你只需要描述 UI 应该**看起来是什么样子**，而不是描述**如何一步步地改变它**。React 会负责高效地更新 DOM 以匹配你的声明。

*   **优点**：代码更易读、易预测、易调试。你只需关心数据状态，React 会自动处理 UI 的同步。

### 1.3 虚拟 DOM (Virtual DOM)

React 在内存中维护一个轻量级的实际 DOM 的表示，称为**虚拟 DOM**。当组件状态发生变化时，React 首先会用新的状态重新渲染虚拟 DOM，然后将新的虚拟 DOM 与旧的虚拟 DOM 进行高效的“**diffing (比较)**”。最后，React 只会将必要的最少更改应用到实际的浏览器 DOM 上。

*   **优点**：显著提高了性能，因为直接操作真实 DOM 是非常昂贵的。

## 二、环境搭建 (Create React App)

学习 React 最方便的方式是使用官方提供的 **Create React App (CRA)** 工具。它帮你配置好了一个完整的 React 开发环境，包括 Webpack、Babel 等，让你无需关心繁琐的配置，直接专注于代码编写。

### 2.1 安装 Node.js

React 开发需要 Node.js 环境。请确保你的电脑上安装了 Node.js (推荐 LTS 版本) 和 npm (或 yarn)。
你可以在终端输入以下命令检查版本：

```bash
node -v
npm -v
```

如果未安装，请访问 [Node.js 官网](https://nodejs.org/) 下载安装。

### 2.2 创建 React 项目

打开终端，运行以下命令创建一个新的 React 项目：

```bash
npx create-react-app my-first-react-app
cd my-first-react-app
npm start
```

*   `npx create-react-app my-first-react-app`：`npx` 是 `npm` 附带的工具，用于执行包而无需先安装。这里的命令会创建一个名为 `my-first-react-app` 的新目录，并在其中设置好所有 React 项目文件。
*   `cd my-first-react-app`：进入项目目录。
*   `npm start`：启动开发服务器。这会在浏览器中自动打开 `http://localhost:3000`，显示你的第一个 React 应用。

## 三、JSX 语法

React 使用 **JSX (JavaScript XML)** 来描述 UI。JSX 是一种 JavaScript 的语法扩展，它允许你在 JavaScript 代码中编写类似 HTML 的结构。

```jsx
// 这是一个 JSX 表达式
const element = <h1>Hello, React!</h1>;
```

**JSX 规则**：

1.  **返回单个根元素**：组件的 JSX 最终必须只返回一个根元素。如果你需要返回多个兄弟元素，可以使用一个 `<div>` 包裹它们，或使用 `Fragment` (即 `<>...</>`)。
    ```jsx
    // 错误
    // return <h1>Hello</h1><p>World</p>;

    // 正确 (使用 div)
    return (
      <div>
        <h1>Hello</h1>
        <p>World</p>
      </div>
    );

    // 正确 (使用 Fragment)
    return (
      <>
        <h1>Hello</h1>
        <p>World</p>
      </>
    );
    ```
2.  **驼峰命名法**：HTML 属性在 JSX 中使用驼峰命名法，例如 `className` 代替 `class`，`htmlFor` 代替 `for`。
    ```jsx
    <div className="app">Hello</div>
    <label htmlFor="name">Name:</label>
    ```
3.  **大括号 `{}` 插入 JavaScript 表达式**：你可以在 JSX 中使用大括号来嵌入任何有效的 JavaScript 表达式。
    ```jsx
    const name = 'Alice';
    const num1 = 10;
    const num2 = 20;

    const element = (
      <div>
        Hello, {name}!
        <p>Sum is: {num1 + num2}</p>
      </div>
    );
    ```

## 四、组件 (Components)

组件是 React 应用的基石。它们可以是**函数组件 (Functional Components)** 或**类组件 (Class Components)**。在现代 React 中，**函数组件和 Hooks 是推荐的写法**。

### 4.1 函数组件

函数组件是简单的 JavaScript 函数，它们接收一个 `props` (properties) 对象作为参数，并返回 JSX。

```jsx
// src/App.js (Create React App 的默认组件)
import React from 'react';
import './App.css'; // 导入样式

function App() { // 这是一个函数组件
  const welcomeMessage = "欢迎来到我的 React 应用！";

  return ( // 返回 JSX
    <div className="App">
      <header className="App-header">
        <h1>{welcomeMessage}</h1>
        <p>这是一个简单的 React 页面。</p>
        <MyButton /> {/* 嵌入自定义组件 */}
      </header>
    </div>
  );
}

// 定义一个更简单的函数组件
function MyButton() {
  return <button>点击我！</button>;
}

export default App; // 导出 App 组件
```

**理解 `props`**：
`props` 是组件之间传递数据的方式。它是只读的，意味着组件不能修改自己的 `props`。

```jsx
function Welcome(props) {
  return <h1>Hello, {props.name}!</h1>;
}

// 使用 Welcome 组件
function App() {
  return (
    <div>
      <Welcome name="Sara" />
      <Welcome name="Cahal" />
    </div>
  );
}
```

### 4.2 类组件 (了解即可，Hooks 出现后较少使用)

类组件是 ES6 的类，继承自 `React.Component`。它们有一个 `render()` 方法，用于返回 JSX。

```jsx
import React from 'react';

class WelcomeClass extends React.Component {
  render() {
    return <h1>Hello, {this.props.name}!</h1>;
  }
}

// 使用 WelcomeClass 组件
function App() {
  return (
    <div>
      <WelcomeClass name="Class User" />
    </div>
  );
}
```
**注意**：在 React 的发展中，函数组件配合 Hooks 已经成为主流和推荐的写法，能够实现类组件的所有功能，并且代码更简洁、可读性更好。

## 五、状态 (State) 与生命周期 (Life Cycle) - Hooks

组件的**状态 (State)** 是指组件内部可变的数据。当状态改变时，组件会重新渲染。
在 React 16.8 之后，**Hooks** 是函数组件中管理状态和生命周期的标准方式。

### 5.1 `useState` Hook

`useState` 允许函数组件拥有状态。

```jsx
import React, { useState } from 'react';

function Counter() {
  // 声明一个名为 'count' 的 state 变量，并初始化为 0
  // 'setCount' 是一个函数，用于更新 'count' 的值
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>你点击了 {count} 次</p>
      <button onClick={() => setCount(count + 1)}>
        点击我
      </button>
    </div>
  );
}

export default Counter;
```

**解释**：
*   `useState(0)`：调用 `useState` 会创建一个新的状态变量，并将其初始值设置为 0。
*   它返回一个数组，包含两个元素：
    *   **当前状态值** (`count`)。
    *   **更新状态的函数** (`setCount`)。
*   `onClick={() => setCount(count + 1)}`：当按钮被点击时，调用 `setCount` 函数来更新 `count`。React 会检测到状态变化，并重新渲染 `Counter` 组件。

### 5.2 `useEffect` Hook

`useEffect` 允许函数组件执行“副作用”操作，例如数据获取、订阅或手动更改 DOM。它会在组件渲染后执行。

```jsx
import React, { useState, useEffect } from 'react';

function Timer() {
  const [count, setCount] = useState(0);

  // 相当于 componentDidMount 和 componentDidUpdate
  useEffect(() => {
    // 设置一个定时器，每秒更新 count
    const interval = setInterval(() => {
      setCount(prevCount => prevCount + 1); // 使用函数式更新，避免闭包问题
    }, 1000);

    // 清理函数：相当于 componentWillUnmount
    return () => {
      clearInterval(interval);
    };
  }, []); // 依赖项数组为空，表示只在组件挂载和卸载时执行

  return (
    <p>计数： {count} 秒</p>
  );
}

export default Timer;
```

**`useEffect` 的依赖项数组 `[]`**：
*   **空数组 `[]`**：表示 effect 只在组件**挂载 (mount)** 时运行一次，并在**卸载 (unmount)** 时执行清理函数。这类似于类组件的 `componentDidMount` 和 `componentWillUnmount`。
*   **有依赖项的数组 `[dep1, dep2]`**：表示 effect 会在挂载时运行一次，并在 `dep1` 或 `dep2` 发生变化时再次运行。
*   **不传依赖项数组**：表示 effect 会在每次组件渲染后都运行。

## 六、条件渲染与列表渲染

### 6.1 条件渲染 (Conditional Rendering)

在 React 中，你可以根据条件来渲染不同的组件或元素。

*   **`if` 语句**：
    ```jsx
    function Greeting(props) {
      const isLoggedIn = props.isLoggedIn;
      if (isLoggedIn) {
        return <h1>欢迎回来！</h1>;
      }
      return <h1>请登录。</h1>;
    }
    ```
*   **三元运算符**：
    ```jsx
    function Greeting(props) {
      const isLoggedIn = props.isLoggedIn;
      return (
        <h1>
          {isLoggedIn ? '欢迎回来！' : '请登录。'}
        </h1>
      );
    }
    ```
*   **逻辑与 `&&` 运算符**：
    ```jsx
    function Mailbox(props) {
      const unreadMessages = props.unreadMessages;
      return (
        <div>
          <h1>Hello!</h1>
          {unreadMessages.length > 0 &&
            <h2>你有 {unreadMessages.length} 条未读消息。</h2>
          }
        </div>
      );
    }
    ```

### 6.2 列表渲染 (List Rendering)

渲染一个列表元素时，通常使用 JavaScript 的 `map()` 方法。

```jsx
function NumberList(props) {
  const numbers = props.numbers;
  const listItems = numbers.map((number) =>
    // 列表项需要一个唯一的 "key" prop
    <li key={number.toString()}>{number}</li>
  );
  return (
    <ul>{listItems}</ul>
  );
}

function App() {
  const myNumbers = [1, 2, 3, 4, 5];
  return <NumberList numbers={myNumbers} />;
}
```

**`key` 的重要性**：
在渲染列表时，React 要求每个列表项都有一个唯一的 `key` 属性。`key` 帮助 React 识别哪些项被添加、修改或删除。它应该是一个在同级元素中唯一的字符串。通常，可以使用数据项的 ID。**不要使用 `index` 作为 `key`，除非你的列表项是静态的且不会重新排序或增删。**

## 七、事件处理

React 的事件处理与 DOM 事件类似，但有一些不同。

*   **驼峰命名**：事件名称使用驼峰命名（如 `onClick` 而非 `onclick`）。
*   **传入函数**：你传入一个函数作为事件处理器的值，而不是一个字符串。
*   **阻止默认行为**：在 React 中，你不能通过返回 `false` 来阻止事件，你必须显式调用 `event.preventDefault()`。

```jsx
function MyButton() {
  function handleClick(event) {
    event.preventDefault(); // 阻止表单提交等默认行为
    console.log('按钮被点击了！');
  }

  return (
    <button onClick={handleClick}>点击我</button>
  );
}

function LinkButton() {
  function handleAnchorClick(e) {
    e.preventDefault(); // 阻止页面跳转
    console.log('链接被点击了，但页面没有跳转！');
  }

  return <a href="https://example.com" onClick={handleAnchorClick}>阻止跳转的链接</a>;
}
```

## 八、下一步学习路径

恭喜你，你已经掌握了 React 的核心基础知识！接下来你可以深入学习：

*   **更多 Hooks**：`useContext` (上下文管理), `useReducer` (复杂状态管理), `useRef` (访问 DOM 元素), `useCallback`, `useMemo` (性能优化)。
*   **路由**：React Router (用于构建单页应用)。
*   **状态管理**：Redux, Zustand, Recoil, Jotai (管理复杂的全局状态)。
*   **数据获取**：Axios, React Query, SWR。
*   **样式**：CSS Modules, Styled Components, Emotion, Tailwind CSS。
*   **测试**：Jest, React Testing Library。
*   **TypeScript**：为 React 项目添加类型安全。
*   **性能优化**：`React.memo()`, `useCallback()`, `useMemo()` 等。

## 九、总结

React 以其组件化、声明式的特性以及高效的虚拟 DOM 机制，极大地简化了复杂用户界面的构建。通过本教程，你已经了解了 React 的核心概念：组件、JSX、Props、State 和 Hooks。现在，你已经具备了构建自己的第一个 React 应用的能力。持续实践，不断探索，你将能够开发出强大且富有吸引力的前端应用。祝你在 React 的学习之旅中一切顺利！