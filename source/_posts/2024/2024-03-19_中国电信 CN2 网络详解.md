---
title: 中国电信 CN2 网络详解
date: 2024-03-19 06:24:00
tags:
  - 2024
  - CN2
  - 计算机网络
  - 网络技术
categories:
  - 计算机网络
  - 网络技术
---

> **CN2 (ChinaNet Next Generation Carrying Network)**，即**中国电信下一代承载网络**，是中国电信于 2005 年推出的新一代骨干网络。它旨在提供高质量、高可靠、低延迟的网络服务，主要面向政府、企业和高端个人用户。CN2 与传统的 ChinaNet (AS4134，163骨干网) 在架构和技术上都有显著区别，以提供更优质的国际互联体验。

{% note info %}
核心思想：**将互联网流量分为“优质”和“普通”两类通道，CN2 提供优质通道，通过更少的跳数、更小的丢包率和更低的延迟，显著提升国际互联的稳定性和速度。**
{% endnote %}

## 一、为什么需要 CN2？

### 1.1 ChinaNet (163骨干网) 的局限性

传统的中国电信互联网骨干网，通常被称为 163 网（因其 AS 号为 4134，而 163 是其常用接入号），是国内用户最广泛使用的网络。然而，163 网在国际互联方面存在一些固有的问题：

1.  **链路拥堵**：作为最常用的骨干网，163 网承载了大量流量，尤其在国际出口处容易出现拥堵，导致延迟高、丢包率大。
2.  **路由跳数多**：在国际互联时，163 网的路由路径通常较长，经过的中间节点和运营商较多，进一步增加了延迟和不稳定性。
3.  **负载均衡策略**：为了分担流量，163 网可能会动态调整路由，导致部分时段网络质量波动较大。
4.  **优先级低**：对于非核心业务流量，其优先级可能相对较低，无法保证高质量传输。

在这样的背景下，中国电信推出了 CN2 网络，以解决 163 网在高端业务和国际互联方面的不足。

### 1.2 CN2 的目标

CN2 网络的核心目标是：

*   **提升国际互联质量**：提供更稳定、更快速的国际网络访问。
*   **满足高端业务需求**：为对网络质量有严格要求的企业级应用、跨国VPN等提供支持。
*   **差异化服务**：将网络流量分层，为不同需求的用户提供不同的网络服务级别。

## 二、CN2 网络的架构与技术特点

CN2 网络采用了多项先进技术和全新的网络架构，使其能够提供更优质的服务。

### 2.1 基础架构：三层网络结构

CN2 在逻辑上是一个扁平化的 IP 骨干网，但从物理和功能上可以看作是三层网络：

1.  **核心层 (Core Layer)**：
    *   全网核心设备互联，主要负责高速转发流量。
    *   部署在全国主要城市，形成环状或网状拓扑。
    *   具有极高的带宽和冗余能力。
2.  **汇聚层 (Aggregation Layer)**：
    *   将接入层流量汇聚到核心层，同时提供路由聚合、策略控制等功能。
    *   通常在省级骨干网络节点设置。
3.  **接入层 (Access Layer)**：
    *   直接连接用户，提供多种接入方式（如光纤、专线等）。
    *   将用户流量连接到汇聚层。

这种分层设计有助于实现流量的优化管理和故障的快速定位。

### 2.2 关键技术

1.  **MPLS (Multiprotocol Label Switching)**：
    *   CN2 网络的核心技术之一。MPLS 是在 IP 路由基础上进行标签交换的技术，可以实现：
        *   **快速转发**：通过标签交换，减少了路由器查找路由表的开销。
        *   **流量工程 (Traffic Engineering)**：可以根据业务需求，规划流量路径，绕开拥堵区域，提供 QoS (Quality of Service) 保障。
        *   **VPN 支持**：为企业用户提供高可靠的 VPN 服务。
2.  **DiffServ (Differentiated Services)**：
    *   通过对 IP 数据包进行标记，实现不同业务流量的优先级划分。
    *   高优先级流量（如语音、视频会议）可以获得更好的服务质量保障。
3.  **QoS (Quality of Service) 保障**：
    *   结合 MPLS 和 DiffServ，CN2 能够为不同级别的业务提供端到端的 QoS 保障，包括带宽、延迟、抖动和丢包率。
4.  **路由优化**：
    *   CN2 内部维护更优的路由，避免不必要的路由跳数。
    *   在国际互联方面，CN2 与全球主要运营商建立了直连通道，减少了中间路由器的介入。

### 2.3 CN2 的 AS 号

CN2 网络的 AS (Autonomous System) 号是 **4809**。通过路由追踪工具（如 `traceroute`），可以观察到流量是否经过 `AS4809` 来判断是否使用了 CN2 线路。

## 三、CN2 线路类型

根据接入点和回国方式，CN2 线路通常分为以下两种：

### 3.1 CN2 GT (Global Transit)

*   **特性**：
    *   **半程 CN2 (或非全程 CN2)**：在出境时流量通常会经过 CN2 骨干网的部分节点，但在国际出口可能与其他运营商共享，或者回国时再次混合 163 线路。它的优先级相对 163 网更高，但低于 CN2 GIA。
    *   **价格适中**：价格介于 163 网和 CN2 GIA 之间，是性价比相对较高的选择。
    *   **带宽共享**：国际出口带宽与其他用户共享，在高峰期依然可能出现拥堵。
    *   **部分地区优化**：在某些省级骨干网接入点可能与 CN2 设备直连，提供较好的体验。
*   **路由表现**：去程通常能看到少量 AS4809 节点，回程可能会在国际出口处或回国后转回 AS4134 (163 网) 或其他运营商网络。
*   **优势**：相较于纯 163 体验有明显提升，尤其是在非高峰期。
*   **缺点**：在国际互联高峰期，仍可能出现丢包和延迟波动，无法提供“全程”的高质量保障。

### 3.2 CN2 GIA (Global Internet Access)

*   **特性**：
    *   **全程 CN2**：所有流量在国际回城和去程都强制走 CN2 线路，并享有最高优先级。
    *   **独立带宽**：提供更高的带宽保障，确保流量的优先级，并有良好的QoS策略。
    *   **价格昂贵**：由于资源稀缺和高质量保障，价格远高于 CN2 GT 和 163 网。
    *   **最高 QoS 优先级**：享受最高级别的 QoS 保障，确保极低的延迟和丢包率。
*   **路由表现**：去程和回程都能清晰地看到流量全程走 AS4809 节点，且国际出口通常是 CN2 自有的直连节点。
*   **优势**：
    *   **极低延迟**：路由跳数最少，传输路径最优，尤其是国际互联延迟极低。
    *   **极低丢包率**：在国际互联中表现最稳定，抗拥堵能力最强。
    *   **高可靠性**：适合对网络质量有极高要求的业务，如金融、游戏、视频会议等。
*   **缺点**：成本是其主要限制因素，通常面向企业级用户或高端个人用户。

### 3.3 路由示意图

CN2 GT 和 CN2 GIA 的大致路由路径可以用以下图表示：

{% mermaid %}
graph LR
    subgraph 用户端
        A[国内用户]
    end

    subgraph 中国电信网络 AS4134 / AS4809
        B["中国电信 163 骨干网 (AS4134)"]
        C["中国电信 CN2 骨干网 (AS4809)"]
        D["中国电信国际出口 (163)"]
        E["中国电信国际出口 (CN2)"]
    end

    subgraph 国际网络
        F[国际运营商骨干网]
        G[海外服务器/数据中心]
    end

    A --> B
    B --> D
    D --> F
    F --> G

    A --> C
    C --> E
    E --> F
    F --> G

    style B fill:#f9f,stroke:#333,stroke-width:2px;
    style C fill:#9ff,stroke:#333,stroke-width:2px;

    linkStyle 0 stroke:red,stroke-width:2px,fill:none;
    linkStyle 1 stroke:blue,stroke-width:2px,fill:none;

    subgraph CN2 GT 路径
        AGTG1[国内用户] --> AGTG2["中国电信 CN2 接入 (部分 AS4809)"]
        AGTG2 --> AGTG3["中国电信国际出口 (CN2/163 混合)"]
        AGTG3 --> AGTG4[国际网络]
        AGTG4 --> AGTG5[海外服务器]
    end

    subgraph CN2 GIA 路径
        AGIAG1[国内用户] --> AGIAG2["中国电信 CN2 全程 (AS4809)"]
        AGIAG2 --> AGIAG3["中国电信国际出口 (专属 CN2)"]
        AGIAG3 --> AGIAG4[国际网络]
        AGIAG4 --> AGIAG5[海外服务器]
    end

    linkStyle 7 stroke:lightgray,stroke-width:2px,fill:none,stroke-dasharray: 5 5;
    linkStyle 8 stroke:red,stroke-width:2px,fill:none;
    linkStyle 9 stroke:red,stroke-width:2px,fill:none;
    linkStyle 10 stroke:lightgray,stroke-width:2px,fill:none,stroke-dasharray: 5 5;
    linkStyle 11 stroke:blue,stroke-width:2px,fill:none;
    linkStyle 12 stroke:blue,stroke-width:2px,fill:none;
    linkStyle 13 stroke:blue,stroke-width:2px,fill:none;

{% endmermaid %}

**图例说明：**
*   **红色虚线路径**：代表 163 骨干网的典型路由，可能经过多个中间节点和拥堵点。
*   **蓝色实线路径**：代表 CN2 GIA 的典型路由，路径短，质量高。
*   **CN2 GT 路径**：可能混合蓝色和红色路径的特性，部分路段走 CN2，部分路段走普通线路。

## 四、如何判断是否是 CN2 线路？

1.  **路由追踪 (Traceroute)**：
    使用 `traceroute` 或 `mtr` 工具，从国内或服务器端追踪到目标地址，观察路由路径中是否出现大量 `AS4809` 的节点。
    *   **CN2 GIA**：去程和回程（如果从海外服务器追踪回国）都应大量看到 `AS4809` 节点。
    *   **CN2 GT**：去程可能看到部分 `AS4809` 节点，回程则可能不经过，或者只经过少量。
    *   **163 网**：主要会看到 `AS4134` 节点。

    **示例 (Go 语言执行 `traceroute`):**
    ```go
    package main

    import (
    	"fmt"
    	"os/exec"
    	"runtime"
    )

    func main() {
    	targetHost := "google.com" // 替换为你要测试的目标IP或域名

    	var cmd *exec.Cmd
    	if runtime.GOOS == "windows" {
    		cmd = exec.Command("tracert", targetHost)
    	} else {
    		cmd = exec.Command("traceroute", targetHost)
    	}

    	output, err := cmd.Output()
    	if err != nil {
    		fmt.Printf("执行 traceroute 失败: %v\n", err)
    		return
    	}
    	fmt.Println(string(output))
    }
    ```
    执行后，仔细查看输出结果中的 AS 号信息。

2.  **网络测试工具**：
    利用在线的 Ping/Traceroute 工具，从全球各地（特别是中国大陆）对你的服务器进行测试，观察平均延迟、丢包率等数据。CN2 线路在这些指标上通常表现优异。

## 五、CN2 的优缺点与适用场景

### 5.1 优点：

1.  **低延迟**：相比 163 网，国际互联的路由跳数更少，延迟更低。
2.  **低丢包率**：流量工程和QoS保障使得网络传输更为稳定，尤其在高峰期表现出色。
3.  **高可靠性**：多路由冗余和智能路由选择，提升了网络的稳定性。
4.  **优先级高**：CN2 GIA 线路的流量在骨干网中具有最高优先级，不易受拥堵影响。

### 5.2 缺点：

1.  **成本高昂**：尤其是 CN2 GIA 线路，由于构建成本和运维成本高，价格不菲。
2.  **资源稀缺**：CN2 带宽资源有限，尤其是在国际出口带宽方面。

### 5.3 适用场景：

*   **对网络延迟和稳定性有极高要求的业务**：例如在线游戏服务器、金融交易平台、视频会议、VoIP 等。
*   **企业级应用**：跨国企业 VPN 专线、数据传输、远程办公等。
*   **自建服务**：需要提供稳定、快速的中国大陆用户访问体验的网站、应用服务器。
*   **内容分发网络 (CDN)**：作为 CDN 的回源链路，提升大陆用户的访问体验。

## 六、总结

中国电信的 CN2 网络是中国大陆连接国际互联网的优质通道，通过先进的技术和独立的网络架构，显著提升了国际互联的稳定性、速度和可靠性。根据业务需求和预算，可以选择 CN2 GT 或 CN2 GIA。对于追求极致网络体验和有严格 SLA (服务等级协议) 要求的用户，CN2 GIA 无疑是最佳选择，而 CN2 GT 则提供了一个成本与性能之间的良好平衡。理解 CN2 的特性及其与传统 163 网的区别，有助于用户根据实际需求选择最合适的网络服务。