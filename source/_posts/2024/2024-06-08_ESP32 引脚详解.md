---
title: ESP32 å¼•è„šè¯¦è§£
date: 2024-06-08 06:24:00
tags:
  - 2024
  - ESP32å•ç‰‡æœº
  - åµŒå…¥å¼ç³»ç»Ÿ
  - ç¡¬ä»¶ç¼–ç¨‹
categories:
  - åµŒå…¥å¼ç³»ç»Ÿ
  - ESP32å•ç‰‡æœº
---

> **ESP32 å¼•è„š** (GPIO - General Purpose Input/Output) æ˜¯ ESP32 èŠ¯ç‰‡ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„ç‰©ç†æ¥å£ã€‚ç†è§£æ¯ä¸ªå¼•è„šçš„åŠŸèƒ½ã€ç‰¹æ€§åŠå…¶é™åˆ¶ï¼Œå¯¹äºæˆåŠŸå¼€å‘ ESP32 é¡¹ç›®è‡³å…³é‡è¦ã€‚ESP32 æ‹¥æœ‰ä¸°å¯Œçš„å¼•è„šèµ„æºï¼Œæ”¯æŒå¤šç§åŠŸèƒ½å¤ç”¨ï¼Œå¦‚æ•°å­— I/Oã€æ¨¡æ‹Ÿ I/Oã€PWMã€ä¸²è¡Œé€šä¿¡ã€è§¦æ‘¸ä¼ æ„Ÿå™¨ç­‰ï¼Œä½¿å…¶èƒ½å¤Ÿè¿æ¥å„ç§ä¼ æ„Ÿå™¨ã€æ‰§è¡Œå™¨å’Œå¤–éƒ¨æ¨¡å—ã€‚

{% note info %}
æ ¸å¿ƒæ€æƒ³ï¼š**å¹¶éæ‰€æœ‰æ ‡å·çš„å¼•è„šéƒ½å¯ç”¨ä½œé€šç”¨ GPIOï¼Œéƒ¨åˆ†å¼•è„šæœ‰ç‰¹å®šçš„å¯åŠ¨è¡Œä¸ºæˆ–å†…éƒ¨è¿æ¥ï¼Œéœ€è¦éµå¾ªç‰¹å®šçš„ä½¿ç”¨è§„åˆ™ä»¥é¿å…é—®é¢˜ã€‚** ç²¾å¿ƒè®¾è®¡å¼•è„šåˆ†é…æ˜¯ç¨³å®š ESP32 åº”ç”¨çš„å…³é”®ã€‚
{% endnote %}
------

## ä¸€ã€ESP32 å¼•è„šæ¦‚è¿°

ESP32 (ä»¥ ESP32-WROOM-32 ç³»åˆ—æ¨¡ç»„ä¸ºä¾‹) é€šå¸¸ä¼šå¼•å‡º 30-38 ä¸ªå¼•è„šã€‚è¿™äº›å¼•è„šä¸­çš„å¤§éƒ¨åˆ†æ˜¯å¯ç”¨äºé€šç”¨è¾“å…¥è¾“å‡º (GPIO) çš„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å¼•è„šå…·æœ‰ç‰¹æ®ŠåŠŸèƒ½æˆ–åœ¨å¯åŠ¨æ—¶æœ‰ç‰¹å®šçŠ¶æ€ã€‚

**é‡è¦æ¦‚å¿µï¼š**

*   **GPIO å·**ï¼šå¯¹åº”äºèŠ¯ç‰‡å†…éƒ¨çš„å¼•è„šç¼–å· (å¦‚ GPIO0, GPIO1, ..., GPIO39)ã€‚
*   **å¼€å‘æ¿ä¸å°**ï¼šå¼€å‘æ¿ä¸Šå°åˆ·çš„å¼•è„šåç§°ï¼Œé€šå¸¸ä¼šæ˜¯ GPIO å·ï¼Œä½†æœ‰æ—¶ä¹Ÿä¼šæ˜¯åŠŸèƒ½æˆ–ç®€åŒ–åç§°ï¼ˆå¦‚ `TX0`, `RX0`, `SDA`, `SCL`, `VP`, `VN`ï¼‰ã€‚
*   **åŠŸèƒ½å¤ç”¨ (Pin Multiplexing)**ï¼šä¸€ä¸ªç‰©ç†å¼•è„šå¯ä»¥æ ¹æ®é…ç½®å®ç°å¤šç§åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼ŒGPIO16 æ—¢å¯ä»¥æ˜¯æ™®é€šçš„æ•°å­—è¾“å‡ºï¼Œä¹Ÿå¯ä»¥æ˜¯ UART2 çš„ RX å¼•è„šï¼‰ã€‚

## äºŒã€ESP32 å¼•è„šåˆ†ç±»ä¸å…³é”®ç‰¹æ€§

æˆ‘ä»¬å¯ä»¥å°† ESP32 çš„å¼•è„šå¤§è‡´åˆ†ä¸ºå‡ ç±»ï¼Œå¹¶äº†è§£å®ƒä»¬çš„é‡è¦ç‰¹æ€§ã€‚

### 2.1 é€šç”¨æ•°å­— I/O å¼•è„š (GPIO)

ESP32 æ‹¥æœ‰å¤šè¾¾ 34 ä¸ªå¯ç”¨ GPIO å¼•è„š (å…·ä½“æ•°ç›®å› èŠ¯ç‰‡å°è£…è€Œå¼‚)ã€‚å®ƒä»¬å¯ä»¥é…ç½®ä¸ºè¾“å…¥æˆ–è¾“å‡ºï¼Œå¹¶æ”¯æŒå†…éƒ¨ä¸Šæ‹‰ (Pull-up) æˆ–ä¸‹æ‹‰ (Pull-down) ç”µé˜»ã€‚

*   **è¾“å‡ºæ¨¡å¼**ï¼šå¯ç”¨äºæ§åˆ¶ LEDã€ç»§ç”µå™¨ã€ç”µæœºé©±åŠ¨ç­‰ã€‚
*   **è¾“å…¥æ¨¡å¼**ï¼šå¯ç”¨äºè¯»å–æŒ‰é”®ã€å¼€å…³ã€æ•°å­—ä¼ æ„Ÿå™¨è¾“å‡ºç­‰ã€‚
*   **å†…éƒ¨ä¸Šæ‹‰/ä¸‹æ‹‰**ï¼šè½¯ä»¶å¯é…ç½®ï¼Œæ–¹ä¾¿æ¥ç¼æŒ‰é”®ç­‰æ— éœ€å¤–æ¥ç”µé˜»çš„åœºæ™¯ã€‚

**å¯ç”¨çš„é€šç”¨ GPIO (å…¸å‹)ï¼š**

*   **GPIO0 - GPIO39** (éƒ¨åˆ†ç¼–å·ä¸å¯ç”¨æˆ–æœ‰ç‰¹æ®Šç”¨é€”)
*   **æ¨èä½œä¸ºé€šç”¨ I/O çš„å¼•è„š**ï¼š
    *   **GPIO1-3, 5, 12-19, 21-23, 25-27, 32-39**

### 2.2 æ¨¡æ‹Ÿè¾“å…¥å¼•è„š (ADC - Analog-to-Digital Converter)

ESP32 é›†æˆäº† 2 ä¸ª 12 ä½ SAR (Successive Approximation Register) ADCï¼Œæ€»å…±æä¾› 18 ä¸ªç‹¬ç«‹çš„æ¨¡æ‹Ÿè¾“å…¥é€šé“ã€‚

*   **ç²¾åº¦**ï¼š12 ä½æ„å‘³ç€å¯ä»¥å°†æ¨¡æ‹Ÿç”µå‹ä¿¡å·è½¬æ¢ä¸º 0-4095 çš„æ•°å­—å€¼ã€‚
*   **ç”µå‹èŒƒå›´**ï¼šé€šå¸¸ä¸º 0V åˆ° VDD (é€šå¸¸ 3.3V)ã€‚ä½† ESP32 çš„ ADC åœ¨é«˜è¾“å…¥ç”µå‹ä¸‹å¯èƒ½å­˜åœ¨éçº¿æ€§é—®é¢˜ï¼Œéœ€è¦æ ¡å‡†æˆ–ä½¿ç”¨åˆ†å‹ç”µè·¯ã€‚
*   **ADC1 å’Œ ADC2 æ§åˆ¶å™¨**ï¼š
    *   **ADC1 (8 ä¸ªé€šé“)**ï¼šå¯åœ¨ Wi-Fi/è“ç‰™æ´»åŠ¨æ—¶ä½¿ç”¨ã€‚
    *   **ADC2 (10 ä¸ªé€šé“)**ï¼š**åœ¨ Wi-Fi ä½¿ç”¨æ—¶ä¸å¯ç”¨**ï¼Œå› ä¸º ADC2 è¢« Wi-Fi é©±åŠ¨å ç”¨ã€‚å¦‚æœæ‚¨çš„åº”ç”¨éœ€è¦åŒæ—¶ä½¿ç”¨ Wi-Fi å’Œå¤§é‡æ¨¡æ‹Ÿè¾“å…¥ï¼Œè¯·ä¼˜å…ˆä½¿ç”¨ ADC1 çš„å¼•è„šã€‚
*   **GPIO ç¼–ç ä¸ ADC é€šé“**ï¼š
    *   ADC1_CH0 -> GPIO36 (VP)
    *   ADC1_CH1 -> GPIO37
    *   ADC1_CH2 -> GPIO38
    *   ADC1_CH3 -> GPIO39 (VN)
    *   ADC1_CH4 -> GPIO32
    *   ADC1_CH5 -> GPIO33
    *   ADC1_CH6 -> GPIO34
    *   ADC1_CH7 -> GPIO35
    *   ADC2_CH0 -> GPIO4
    *   ADC2_CH1 -> GPIO0
    *   ... (å…¶ä»– ADC2 é€šé“)

### 2.3 æ¨¡æ‹Ÿè¾“å‡ºå¼•è„š (DAC - Digital-to-Analog Converter)

ESP32 é›†æˆäº† 2 ä¸ª 8 ä½ DACï¼Œå¯ç”¨äºç”Ÿæˆæ¨¡æ‹Ÿç”µå‹ä¿¡å·ã€‚

*   **ç²¾åº¦**ï¼š8 ä½æ„å‘³ç€å¯ä»¥è¾“å‡º 0-255 ä¸ªä¸åŒçš„ç”µå‹ç­‰çº§ã€‚
*   **ç”µå‹èŒƒå›´**ï¼š0V åˆ° VDD (3.3V)ã€‚
*   **å¼•è„š**ï¼š
    *   **DAC1 -> GPIO25**
    *   **DAC2 -> GPIO26**

### 2.4 è§¦æ‘¸ä¼ æ„Ÿå™¨å¼•è„š (Touch Sensors)

ESP32 å†…ç½® 10 ä¸ªç”µå®¹å¼è§¦æ‘¸ä¼ æ„Ÿå™¨ï¼Œå¯ç”¨äºæ£€æµ‹äººä½“çš„è§¦æ‘¸ã€‚

*   **åŸç†**ï¼šé€šè¿‡æµ‹é‡å¼•è„šä¸Šçš„ç”µå®¹å˜åŒ–æ¥æ£€æµ‹è§¦æ‘¸ã€‚
*   **å¼•è„š**ï¼š
    *   **T0 -> GPIO4**
    *   **T1 -> GPIO2**
    *   **T2 -> GPIO15**
    *   **T3 -> GPIO13**
    *   **T4 -> GPIO12**
    *   **T5 -> GPIO14**
    *   **T6 -> GPIO27**
    *   **T7 -> GPIO33**
    *   **T8 -> GPIO32**
    *   **T9 -> GPIO3** (âš ï¸ GPIO3 é€šå¸¸ç”¨äº UART0 RX)

### 2.5 PWM (è„‰å†²å®½åº¦è°ƒåˆ¶) å¼•è„š

ESP32 çš„ LEDC (LED Controller) å¤–è®¾æ”¯æŒ 16 ä¸ªç‹¬ç«‹çš„ PWM é€šé“ï¼Œå¯ä»¥æ˜ å°„åˆ°å‡ ä¹ä»»ä½• GPIO å¼•è„šã€‚

*   **åŠŸèƒ½**ï¼šç”¨äºç”µæœºè°ƒé€Ÿã€LED äº®åº¦è°ƒèŠ‚ã€æ¨¡æ‹Ÿä¿¡å·ç”Ÿæˆç­‰ã€‚
*   **ç‹¬ç«‹é€šé“**ï¼šæ¯ä¸ªé€šé“å¯ä»¥ç‹¬ç«‹è®¾ç½®é¢‘ç‡ã€åˆ†è¾¨ç‡å’Œå ç©ºæ¯”ã€‚

### 2.6 é€šä¿¡æ¥å£å¼•è„š

ESP32 æ‹¥æœ‰å¤šä¸ªç¡¬ä»¶é€šä¿¡æ¥å£ï¼Œå¯ä»¥å¤ç”¨åˆ°ä¸åŒçš„ GPIO ä¸Šã€‚

*   **UART (é€šç”¨å¼‚æ­¥æ”¶å‘ä¼ è¾“å™¨)**ï¼š
    *   **UART0**ï¼šé€šå¸¸ç”¨äºç¨‹åºçƒ§å½•å’Œè°ƒè¯•è¾“å‡º (TX0: GPIO1, RX0: GPIO3)ã€‚**ä¸å»ºè®®ä½œä¸ºé€šç”¨ I/O ä½¿ç”¨**ã€‚
    *   **UART1**ï¼šTX1: GPIO10, RX1: GPIO9ã€‚
    *   **UART2**ï¼šTX2: GPIO17, RX2: GPIO16ã€‚
*   **SPI (ä¸²è¡Œå¤–è®¾æ¥å£)**ï¼š
    *   **SPI0/SPI1**ï¼šå†…éƒ¨ç”¨äºè¿æ¥ Flashã€‚
    *   **SPI2 (HSPI)**ï¼šå¯ä»¥ä½œä¸ºé€šç”¨ SPIï¼Œå¼•è„šå¯é…ç½® (ä¾‹å¦‚ MOSI: GPIO13, MISO: GPIO12, SCK: GPIO14, CS: GPIO15)ã€‚
    *   **SPI3 (VSPI)**ï¼šå¯ä»¥ä½œä¸ºé€šç”¨ SPIï¼Œå¼•è„šå¯é…ç½® (ä¾‹å¦‚ MOSI: GPIO23, MISO: GPIO19, SCK: GPIO18, CS: GPIO5)ã€‚
*   **I2C (é›†æˆç”µè·¯äº’è”)**ï¼š
    *   ESP32 æœ‰ 2 ä¸ª I2C æ§åˆ¶å™¨ï¼ŒSDA å’Œ SCL å¼•è„šå¯ä»¥ä»»æ„é…ç½®åˆ°ä»»ä½•å¯ç”¨çš„ GPIO (æ¨èä½¿ç”¨ GPIO21 å’Œ GPIO22 ä½œä¸ºé»˜è®¤ I2C å¼•è„š)ã€‚
*   **I2S (é›†æˆç”µè·¯é—´å£°é¢‘æ€»çº¿)**ï¼š2 ä¸ª I2S æ¥å£ï¼Œç”¨äºéŸ³é¢‘è¾“å…¥/è¾“å‡ºã€‚å¼•è„šå¯é…ç½®ã€‚

### 2.7 å…³é”®åŠŸèƒ½å¼•è„šä¸æ³¨æ„äº‹é¡¹

æœ‰äº›å¼•è„šåœ¨èŠ¯ç‰‡å¯åŠ¨ã€çƒ§å½•æˆ–è¿æ¥å¤–éƒ¨ Flash æ—¶æœ‰ç‰¹æ®Šä½œç”¨ï¼Œå®ƒä»¬çš„è¡Œä¸ºéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š

#### 2.7.1 å¯åŠ¨æ¨¡å¼ç›¸å…³å¼•è„š ğŸ™ **éå¸¸é‡è¦ï¼**

 estos GPIO son crÃ­ticos para el modo de arranque del ESP32.

*   **GPIO2**ï¼š
    *   **å¯åŠ¨æ—¶**ï¼š**èŠ¯ç‰‡ä¸Šç”µæˆ–å¤ä½æ—¶ï¼Œå¦‚æœ GPIO2 ä¸ºä½ç”µå¹³ï¼Œåˆ™è¿›å…¥ UART ä¸‹è½½æ¨¡å¼ (Boot mode)**ã€‚
    *   **å› æ­¤ï¼Œåœ¨æ­£å¸¸è¿è¡Œæ¨¡å¼ä¸‹ï¼ŒGPIO2 åœ¨ä¸Šç”µæ—¶åº”é¿å…æ‹‰ä½ã€‚** è®¸å¤šå¼€å‘æ¿å°†å†…ç½® LED æ¥åˆ° GPIO2ï¼Œé€šè¿‡ä¸Šæ‹‰ç”µé˜»ä½¿å…¶é»˜è®¤é«˜ç”µå¹³ã€‚
    *   åŒæ—¶ä¹Ÿæ˜¯ ADC2_CH2 å’Œ T1 è§¦æ‘¸å¼•è„šã€‚
*   **GPIO0**ï¼š
    *   **å¯åŠ¨æ—¶**ï¼š**å¦‚æœ GPIO0 ä¸ºä½ç”µå¹³ï¼Œåˆ™è¿›å…¥ UART ä¸‹è½½æ¨¡å¼ (Boot mode)**ã€‚
    *   **å› æ­¤ï¼Œåœ¨æ­£å¸¸è¿è¡Œæ¨¡å¼ä¸‹ï¼ŒGPIO0 åœ¨ä¸Šç”µæ—¶åº”ä¸ºé«˜ç”µå¹³ã€‚** æŒ‰ä¸‹ Boot é”®é€šå¸¸æ˜¯çŸ­æ¥ GPIO0 åˆ°åœ°ã€‚
    *   åŒæ—¶ä¹Ÿæ˜¯ ADC2_CH9 å’Œ T0 è§¦æ‘¸å¼•è„šã€‚
*   **GPIO4** (æ–°ç‰ˆæœ¬ ESP32 DevKitC v4 æ¿ä¸Šä½œä¸º Boot æŒ‰é”®çš„å¼•è„š)
    *   ä¸ GPIO0 ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ Boot æŒ‰é’®ã€‚

**æ€»ç»“å¯åŠ¨æ¨¡å¼ï¼š**
| çŠ¶æ€       | GPIO0 | GPIO2 | Flash è¿è¡Œæ¨¡å¼ |
| :--------- | :---- | :---- | :------------- |
| **æ­£å¸¸å¯åŠ¨**   | HIGH  | HIGH (æˆ–æ‚¬ç©º) | ä» Flash å¯åŠ¨   |
| **ä¸‹è½½æ¨¡å¼**   | LOW   | HIGH (æˆ–æ‚¬ç©º) | ç­‰å¾… UART ä¸‹è½½ |

#### 2.7.2 å†…éƒ¨è¿æ¥æˆ–å—é™å¼•è„š

*   **GPIO6 - GPIO11**ï¼š
    *   è¿™äº›å¼•è„šå†…éƒ¨è¿æ¥åˆ° ESP32 çš„ **SPI Flash** æ¥å£ã€‚
    *   **ä¸å»ºè®®ç”¨ä½œé€šç”¨ GPIO**ï¼Œå› ä¸ºå®ƒä»¬ä¼šå½±å“å¤–éƒ¨ Flash çš„æ­£å¸¸å·¥ä½œï¼Œä¸”åœ¨ Wi-Fi è¿è¡Œæ—¶ä¼šæœ‰å¾ˆé«˜çš„å™ªå£°ã€‚
    *   **åœ¨å¤–éƒ¨ Flash æ¨¡ç»„ä¸Šï¼Œè¿™äº›å¼•è„šé€šå¸¸ä¸å¼•å‡º**ã€‚
*   **GPIO34 - GPIO39**ï¼š
    *   **åªèƒ½ä½œä¸ºè¾“å…¥å¼•è„š** (Input-only GPIOs)ã€‚å®ƒä»¬æ²¡æœ‰å†…éƒ¨ä¸Šæ‹‰/ä¸‹æ‹‰ç”µé˜»ã€‚
    *   **åŒæ—¶ä¹Ÿæ˜¯ ADC1 çš„é€šé“**ã€‚
    *   ç”±äºæ˜¯è¾“å…¥ä¸“ç”¨ï¼Œæ— æ³•è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼æ¥é©±åŠ¨ä»»ä½•å™¨ä»¶ã€‚

#### 2.7.3 å…¶ä»–ç‰¹æ®Šå¼•è„š

*   **EN** (Enable)ï¼šèŠ¯ç‰‡ä½¿èƒ½å¼•è„šï¼Œé€šå¸¸å†…ç½®ä¸Šæ‹‰ç”µé˜»ã€‚æ‹‰ä½è¯¥å¼•è„šä¼šä½¿èŠ¯ç‰‡å¤ä½æˆ–è¿›å…¥ä½åŠŸè€—çŠ¶æ€ã€‚
*   **TX0 (GPIO1), RX0 (GPIO3)**ï¼š
    *   é»˜è®¤ç”¨äº USB è½¬ä¸²å£èŠ¯ç‰‡çš„é€šä¿¡ï¼Œæ–¹ä¾¿å›ºä»¶çƒ§å½•å’Œä¸²å£è¾“å‡ºè°ƒè¯•ä¿¡æ¯ã€‚
    *   **å¼ºçƒˆä¸å»ºè®®å°†å…¶ç”¨äºå…¶ä»–é€šç”¨ç›®çš„**ï¼Œé™¤éæ‚¨ä¸ä½¿ç”¨ä¸²å£è°ƒè¯•æˆ–çƒ§å½•åŠŸèƒ½ï¼Œå¦åˆ™ä¼šå¹²æ‰°ä¸²å£é€šä¿¡ã€‚
    *   GPIO3 ä¹Ÿæ˜¯ T9 è§¦æ‘¸å¼•è„šå’Œ ADC1_CH0ã€‚
*   **GPIO12 (MTDI)**ï¼š
    *   **å¯åŠ¨æ—¶**ï¼š**å¦‚æœ GPIO12 ä¸ºé«˜ç”µå¹³ï¼Œåˆ™ Flash ä»¥ 1.8V ç”µå‹å¯åŠ¨**ã€‚å¦‚æœ Flash æ”¯æŒä¸åŒç”µå‹ï¼Œéœ€è¦æ³¨æ„ã€‚å¯¹äºå¤§å¤šæ•° 3.3V Flashï¼Œå®ƒåº”è¯¥ä¿æŒä½ç”µå¹³ã€‚
    *   æŸäº›æ¿å­ä¸Šå¯èƒ½è¿æ¥åˆ° PSRAM æˆ–å…¶ä»–å¤–è®¾ã€‚
    *   åŒæ—¶ä¹Ÿæ˜¯ ADC2_CH5 å’Œ T4 è§¦æ‘¸å¼•è„šã€‚

### 2.8 ESP32 å¼•è„šæ¦‚è§ˆå›¾ (ç¤ºæ„)

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–å’Œæ¦‚å¿µæ€§çš„ ESP32 èŠ¯ç‰‡å¼•è„šåŠŸèƒ½æ¦‚è§ˆå›¾ï¼Œè€Œéå…·ä½“çš„å¼€å‘æ¿å¸ƒå±€ã€‚å®é™…å¼€å‘æ¿ä¼šå¼•å‡ºéƒ¨åˆ†é‡è¦çš„ GPIOã€‚

{% mermaid %}
graph LR
    A[ESP32 Chip] --> B1["GPIO 0-39 (Digital I/O)"]
    A --> B2["ADC Channels (Analog-in)"]
    A --> B3["DAC Channels (Analog-out)"]
    A --> B4[Touch Sensors]
    A --> B5["PWM (LEDC)"]
    A --> B6[UART/SPI/I2C/I2S]
    A --> B7[Boot Mode Pins]
    A --> B8[Flash SPI Pins]
    A --> B9[Input-only GPIOs]

    B1 --> C1[Output: LED, Relay control]
    B1 --> C2[Input: Button, Digital Sensor]

    B2 --> D1["ADC1 (8 ch.): GPIO32-39, Wi-Fi OK"]
    B2 --> D2["ADC2 (10 ch.): GPIO0,2,4,12-16,25-27, Wi-Fi Busy"]

    B3 --> E1[DAC1: GPIO25]
    B3 --> E2[DAC2: GPIO26]

    B4 --> F1[T0-T9: GPIO0,2,4,12,13,14,15,27,32,33]

    B5 --> G1[16 Channels, any GPIO]

    B6 --> H1["UART0: TX0(GPIO1), RX0(GPIO3)"]
    B6 --> H2["UART1: TX1(GPIO10), RX1(GPIO9)"]
    B6 --> H3["UART2: TX2(GPIO17), RX2(GPIO16)"]
    B6 --> H4["SPI (HSPI/VSPI): MISO, MOSI, SCK, CS (Configurable)"]
    B6 --> H5["I2C: SDA, SCL (Configurable, e.g., GPIO21, GPIO22)"]
    B6 --> H6["I2S: (Configurable)"]

    B7 --> J1[GPIO0: Low for Boot Mode]
    B7 --> J2[GPIO2: Low for Boot Mode]
    B7 --> J3[GPIO12: Flash voltage selection]

    B8 --> K1[GPIO6-11: Connected to Flash, Avoid using]

    B9 --> L1[GPIO34-39: Input only, no internal pull-up/down]
  
    style J1 fill:#FFCCCC,stroke:#FF0000,stroke-width:2px;
    style J2 fill:#FFDDCC,stroke:#FF8800,stroke-width:2px;
    style J3 fill:#FFDDCC,stroke:#FF8800,stroke-width:2px;
    style K1 fill:#DDDDDD,stroke:#888888,stroke-width:2px;
    style L1 fill:#DDDDDD,stroke:#888888,stroke-width:2px;
    classDef important_alert fill:#FFCCCC,stroke:#FF0000,stroke-dasharray: 5 5;
    class J1,J2,J3,K1,L1 important_alert;
{% endmermaid %}

## ä¸‰ã€ESP32 åœ¨ Arduino è¯­æ³•ä¸­çš„å¼•è„šä½¿ç”¨

åœ¨ Arduino ç¯å¢ƒä¸­ï¼Œå¼•è„šé€šå¸¸ç›´æ¥é€šè¿‡å…¶ GPIO ç¼–å·æ¥å¼•ç”¨ã€‚

### 3.1 æ•°å­— I/O

```cpp
const int LED_PIN = 2; // ä½¿ç”¨ GPIO2 ä½œä¸º LED æ§åˆ¶å¼•è„š

void setup() {
  Serial.begin(115200);
  pinMode(LED_PIN, OUTPUT); // è®¾ç½® GPIO2 ä¸ºè¾“å‡ºæ¨¡å¼
}

void loop() {
  digitalWrite(LED_PIN, HIGH); // ç‚¹äº® LED
  Serial.println("LED ON");
  delay(1000);
  digitalWrite(LED_PIN, LOW);  // ç†„ç­ LED
  Serial.println("LED OFF");
  delay(1000);
}
```

### 3.2 æ¨¡æ‹Ÿè¾“å…¥ (ADC)

```cpp
const int TEMP_SENSOR_PIN = 34; // è¿æ¥åˆ° GPIO34 (ADC1_CH6)

void setup() {
  Serial.begin(115200);
  // ADC1 çš„å¼•è„šåœ¨ Wi-Fi æ´»è·ƒæ—¶ä¹Ÿå¯ä½¿ç”¨
  // æ³¨æ„ï¼šESP32 çš„ ADC é»˜è®¤æ˜¯ 12 ä½
  analogReadResolution(12); // è®¾ç½®è¯»å–åˆ†è¾¨ç‡ä¸º 12 ä½ (0-4095)
}

void loop() {
  int sensorValue = analogRead(TEMP_SENSOR_PIN);
  Serial.print("Analog value: ");
  Serial.println(sensorValue);

  // å¦‚æœéœ€è¦å°†æ•°å­—å€¼è½¬æ¢ä¸ºç”µå‹
  float voltage = sensorValue * (3.3 / 4095.0);
  Serial.print("Voltage: ");
  Serial.println(voltage);

  delay(1000);
}
```

### 3.3 æ¨¡æ‹Ÿè¾“å‡º (DAC)

```cpp
const int AUDIO_OUT_PIN = 25; // DAC1 è¿æ¥åˆ° GPIO25

void setup() {
  Serial.begin(115200);
  // DAC ä¸éœ€è¦ pinMode è®¾ç½®ï¼Œç›´æ¥ä½¿ç”¨ dacWrite()
}

void loop() {
  // ä» 0 é€æ¸å‡é«˜åˆ° 255 (8 ä½ DAC)
  for (int value = 0; value <= 255; value++) {
    dacWrite(AUDIO_OUT_PIN, value);
    delay(5);
  }
  // ä» 255 é€æ¸é™ä½åˆ° 0
  for (int value = 255; value >= 0; value--) {
    dacWrite(AUDIO_OUT_PIN, value);
    delay(5);
  }
}
```

### 3.4 è§¦æ‘¸ä¼ æ„Ÿå™¨

```cpp
const int TOUCH_SENSOR_PIN = 4; // T0 è¿æ¥åˆ° GPIO4

void setup() {
  Serial.begin(115200);
  Serial.println("Touch sensor test on GPIO4");
  // è§¦æ‘¸å¼•è„šä¸éœ€è¦ pinMode
}

void loop() {
  int touchValue = touchRead(TOUCH_SENSOR_PIN);
  Serial.print("Touch value: ");
  Serial.println(touchValue);

  // æ ¹æ®å®é™…æµ‹è¯•ç»“æœè°ƒæ•´é˜ˆå€¼
  if (touchValue < 50) { // å‡è®¾è§¦æ‘¸æ—¶è¯»æ•°ä½äº 50
    Serial.println("TOUCH DETECTED!");
  }
  delay(200);
}
```

### 3.5 I2C é€šä¿¡

```cpp
#include <Wire.h> // ESP32 I2C åº“

// æ¨èçš„ I2C å¼•è„šï¼Œä½†å¯è‡ªå®šä¹‰
const int SDA_PIN = 21;
const int SCL_PIN = 22;

void setup() {
  Serial.begin(115200);
  Wire.begin(SDA_PIN, SCL_PIN); // åˆå§‹åŒ– I2C æ€»çº¿ï¼ŒæŒ‡å®š SDA å’Œ SCL å¼•è„š
  Serial.println("I2C Scanner");
  Serial.print("Scanning...");

  byte error, address;
  int nDevices = 0;

  for (address = 1; address < 127; address++) {
    Wire.beginTransmission(address);
    error = Wire.endTransmission();

    if (error == 0) {
      Serial.print("I2C device found at address 0x");
      if (address < 16) Serial.print("0");
      Serial.print(address, HEX);
      Serial.println("  !");
      nDevices++;
    } else if (error == 4) {
      Serial.print("Unknown error at address 0x");
      if (address < 16) Serial.print("0");
      Serial.println(address, HEX);
    }
  }

  if (nDevices == 0) {
    Serial.println("No I2C devices found\n");
  } else {
    Serial.println("done\n");
  }
}

void loop() {
  // nothing to do
}
```

## å››ã€é€‰æ‹©å¼•è„šçš„æœ€ä½³å®è·µ

åœ¨è®¾è®¡ ESP32 ç”µè·¯æ—¶ï¼Œå¼•è„šé€‰æ‹©è‡³å…³é‡è¦ï¼š

1.  **é¿å¼€å¯åŠ¨æ¨¡å¼å¼•è„š**ï¼šGPIO0ã€GPIO2ã€GPIO12 åœ¨ä¸Šç”µå¯åŠ¨æ—¶æœ‰ç‰¹æ®Šè¦æ±‚ã€‚é™¤éæ‚¨æ˜ç¡®çŸ¥é“å…¶å½±å“å¹¶æœ‰å¤–éƒ¨ç”µè·¯ç¡®ä¿å…¶çŠ¶æ€ï¼Œå¦åˆ™å°½é‡é¿å…åœ¨è¿™äº›å¼•è„šä¸Šè¿æ¥å¤–éƒ¨ä¸Šæ‹‰/ä¸‹æ‹‰ç”µé˜»æˆ–å…·æœ‰å¼ºé©±åŠ¨èƒ½åŠ›ä¸”é»˜è®¤çŠ¶æ€ä¸å¯åŠ¨æ¨¡å¼è¦æ±‚å†²çªçš„å™¨ä»¶ã€‚
2.  **é¿å¼€ Flash SPI å¼•è„š**ï¼šGPIO6-GPIO11 è¿æ¥åˆ°å†…éƒ¨ Flashï¼Œ**ç»å¯¹ä¸è¦ç”¨ä½œé€šç”¨ I/O**ã€‚
3.  **æ³¨æ„è¾“å…¥ä¸“ç”¨å¼•è„š**ï¼šGPIO34-GPIO39 åªèƒ½ä½œä¸ºè¾“å…¥ã€‚å½“éœ€è¦è¾“å‡ºåŠŸèƒ½æ—¶ï¼Œä¸è¦é€‰æ‹©è¿™äº›å¼•è„šã€‚
4.  **æ³¨æ„ ADC2 çš„é™åˆ¶**ï¼šå¦‚æœæ‚¨çš„åº”ç”¨åŒæ—¶ä½¿ç”¨ Wi-Fi/è“ç‰™ï¼Œå¹¶ä¸”éœ€è¦è¯»å–æ¨¡æ‹Ÿä¿¡å·ï¼Œ**ä¼˜å…ˆä½¿ç”¨ ADC1 (GPIO32-39) çš„é€šé“**ã€‚
5.  **é¿å… UART0 å¼•è„š**ï¼šGPIO1 (TX0) å’Œ GPIO3 (RX0) é»˜è®¤ç”¨äºä¸²å£é€šä¿¡ã€‚å¦‚æœç”¨äºå…¶ä»–åŠŸèƒ½ï¼Œä¼šå¹²æ‰°çƒ§å½•å’Œè°ƒè¯•ï¼Œé€šå¸¸ä¸æ¨èã€‚
6.  **ä¼˜å…ˆä½¿ç”¨ç‹¬ç«‹å¤–è®¾å¼•è„š**ï¼šå¯¹äº I2Cã€SPIã€UART ç­‰å¤–è®¾ï¼Œè™½ç„¶å¼•è„šå¯é…ç½®ï¼Œä½†é€šå¸¸æœ‰ä¸€äº›â€œä¹ æƒ¯æ€§â€æˆ–â€œæ¨èâ€çš„å¼•è„šç»„åˆ (ä¾‹å¦‚ I2C çš„ GPIO21/22)ï¼Œå¯ä»¥å‡å°‘å†²çªã€‚
7.  **å‚è€ƒå¼€å‘æ¿åŸç†å›¾**ï¼šæ‚¨ä½¿ç”¨çš„ ESP32 å¼€å‘æ¿ï¼ˆå¦‚ ESP32 DevKitCã€NodeMCU-32Sï¼‰ä¼šå°†å…¶ä¸€äº› GPIO å¼•è„šè¿æ¥åˆ°æ¿è½½åŠŸèƒ½ï¼ˆå¦‚å†…ç½® LEDã€Boot æŒ‰é’®ï¼‰ï¼Œå¹¶å¯èƒ½é¢„ç•™ä¸€äº›å¼•è„šç”¨äºç‰¹å®šçš„æ¨¡å—ã€‚åŠ¡å¿…æŸ¥é˜…æ‚¨å¼€å‘æ¿çš„åŸç†å›¾ã€‚
8.  **è€ƒè™‘åŠŸè€—**ï¼šå¦‚æœéœ€è¦æ·±åº¦ç¡çœ ï¼Œæ³¨æ„å“ªäº›å¼•è„šå¯ä»¥ä½œä¸ºå”¤é†’æº (Ext0/Ext1)ï¼Œä»¥åŠå“ªäº›å¼•è„šçš„çŠ¶æ€åœ¨æ·±åº¦ç¡çœ æœŸé—´ä¼šä¿ç•™ã€‚

## äº”ã€æ€»ç»“

ESP32 å¼ºå¤§çš„å¼•è„šåŠŸèƒ½æ˜¯å…¶æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€ï¼Œä½†å…¶å¤æ‚æ€§å’ŒåŠŸèƒ½å¤ç”¨ä¹Ÿç»™å¼€å‘è€…å¸¦æ¥äº†æŒ‘æˆ˜ã€‚ç†è§£ä¸åŒå¼•è„šçš„ç”µæ°”ç‰¹æ€§ã€åŠŸèƒ½åˆ†ç±»ã€åœ¨å¯åŠ¨æ—¶çš„è¡Œä¸ºä»¥åŠå®ƒä»¬ä¹‹é—´çš„æ½œåœ¨å†²çªæ˜¯é«˜æ•ˆå¼€å‘ ESP32 åº”ç”¨çš„å…³é”®ã€‚å§‹ç»ˆå‚è€ƒä¹é‘«ç§‘æŠ€çš„å®˜æ–¹æ•°æ®æ‰‹å†Œã€æ‚¨æ‰€ä½¿ç”¨å¼€å‘æ¿çš„åŸç†å›¾ï¼Œå¹¶åœ¨é€‰æ‹©å¼•è„šæ—¶éµå¾ª**é¿å¼€é™åˆ¶**å’Œ**æœ€ä½³å®è·µ**çš„åŸåˆ™ï¼Œå°†æœ‰åŠ©äºæ„å»ºç¨³å®šã€å¯é ä¸”åŠŸèƒ½å®Œæ•´çš„ ESP32 é¡¹ç›®ã€‚