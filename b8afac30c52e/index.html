<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>开源协议详解：理解与选择的艺术 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="在开源软件的世界里，开源协议 (Open Source License) 扮演着至关重要的角色。它定义了你对开源代码的权利和义务：你可以做什么，不能做什么，以及当你修改或分发代码时需要遵守哪些规则。理解这些协议对于开发者、公司和代码使用者来说都至关重要，它不仅关乎合法合规，更影响着项目的成长、社区的形成以及商业模式的选择。  “开源协议是开源世界的宪法，明确了游戏规则，确保了开放与合作的平衡。”">
<meta property="og:type" content="article">
<meta property="og:title" content="开源协议详解：理解与选择的艺术">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/b8afac30c52e/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="在开源软件的世界里，开源协议 (Open Source License) 扮演着至关重要的角色。它定义了你对开源代码的权利和义务：你可以做什么，不能做什么，以及当你修改或分发代码时需要遵守哪些规则。理解这些协议对于开发者、公司和代码使用者来说都至关重要，它不仅关乎合法合规，更影响着项目的成长、社区的形成以及商业模式的选择。  “开源协议是开源世界的宪法，明确了游戏规则，确保了开放与合作的平衡。”">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-23.jpg">
<meta property="article:published_time" content="2024-02-21T22:24:00.000Z">
<meta property="article:modified_time" content="2025-12-09T10:11:24.616Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="2024">
<meta property="article:tag" content="开源协议">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-23.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "开源协议详解：理解与选择的艺术",
  "url": "https://blog.tbf1211.xx.kg/b8afac30c52e/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-23.jpg",
  "datePublished": "2024-02-21T22:24:00.000Z",
  "dateModified": "2025-12-09T10:11:24.616Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/b8afac30c52e/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.4/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '开源协议详解：理解与选择的艺术',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">367</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">211</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">75</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-23.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">开源协议详解：理解与选择的艺术</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">开源协议详解：理解与选择的艺术</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2024-02-21T22:24:00.000Z" title="发表于 2024-02-22 06:24:00">2024-02-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/">其他</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>10分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="umamiPV" data-path="/b8afac30c52e/"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p>在开源软件的世界里，<strong>开源协议 (Open Source License)</strong> 扮演着至关重要的角色。它定义了你对开源代码的权利和义务：你可以做什么，不能做什么，以及当你修改或分发代码时需要遵守哪些规则。理解这些协议对于开发者、公司和代码使用者来说都至关重要，它不仅关乎合法合规，更影响着项目的成长、社区的形成以及商业模式的选择。</p>
</blockquote>
<div class="note info flat"><p>“开源协议是开源世界的宪法，明确了游戏规则，确保了开放与合作的平衡。”</p>
</div>
<hr>
<h2 id="一、什么是开源协议？为什么需要它？"><a href="#一、什么是开源协议？为什么需要它？" class="headerlink" title="一、什么是开源协议？为什么需要它？"></a>一、什么是开源协议？为什么需要它？</h2><p><strong>开源协议</strong>是一份法律文件，它授予用户使用、修改和分发开源软件的权利，但同时也会施加一定的条件和限制。</p>
<p><strong>为什么需要开源协议？</strong></p>
<ol>
<li><strong>界定权利与义务</strong>：明确使用者可以对代码做什么（使用、修改、分发），以及必须做什么（保留版权信息、公开源码等）。</li>
<li><strong>保护贡献者</strong>：允许贡献者保留版权，同时授权他人使用，确保其辛勤工作不会被恶意独占。</li>
<li><strong>促进创新</strong>：降低了他人基于现有代码进行二次开发和创新的门槛。</li>
<li><strong>建立信任</strong>：协议的公开透明有助于社区形成共识，促进协作。</li>
<li><strong>避免法律纠纷</strong>：明确的协议条款可以减少因代码使用引起的所有权、责任和版权争议。</li>
</ol>
<p><strong>核心问题</strong>：任何没有明确开源协议的代码，默认情况下都受版权法保护，意味着未经授权，任何人无权使用、修改和分发。因此，<strong>开源项目必须选择并声明一个开源协议</strong>。</p>
<h2 id="二、开源协议的分类：宽松与Copyleft"><a href="#二、开源协议的分类：宽松与Copyleft" class="headerlink" title="二、开源协议的分类：宽松与Copyleft"></a>二、开源协议的分类：宽松与Copyleft</h2><p>开源协议通常分为两大类：</p>
<h3 id="2-1-宽松Lassive-Permissive-License-BSD、MIT、Apache等"><a href="#2-1-宽松Lassive-Permissive-License-BSD、MIT、Apache等" class="headerlink" title="2.1 宽松Lassive&#x2F;Permissive License (BSD、MIT、Apache等)"></a>2.1 宽松Lassive&#x2F;Permissive License (BSD、MIT、Apache等)</h3><ul>
<li><strong>特点</strong>：对使用者施加的限制最少，允许高度自由地使用、修改和分发代码，通常包括闭源和商业化。它们被称为“放宽型”或“自由型”协议。</li>
<li><strong>主要限制</strong>：<ul>
<li><strong>保留版权和许可声明</strong>：你必须在分发代码时包含原始的版权和许可声明。</li>
<li><strong>免责声明</strong>：不提供任何担保，软件按“原样”提供。</li>
</ul>
</li>
<li><strong>适用场景</strong>：<ul>
<li>希望自己的代码能够被广泛采用，包括商业产品。</li>
<li>不强制下游项目也必须开源。</li>
<li>适合作为库、框架或组件。</li>
</ul>
</li>
</ul>
<h3 id="2-2-强Copyleft-Weak-Copyleft-GPL、LGPL、AGPL等"><a href="#2-2-强Copyleft-Weak-Copyleft-GPL、LGPL、AGPL等" class="headerlink" title="2.2 强Copyleft &#x2F; Weak Copyleft (GPL、LGPL、AGPL等)"></a>2.2 强Copyleft &#x2F; Weak Copyleft (GPL、LGPL、AGPL等)</h3><ul>
<li><strong>特点</strong>：强制性的开源协议，旨在维护软件的“自由”属性。其核心原则是：如果你修改并分发了基于此协议的代码，那么你的修改部分也必须以相同的协议开源。这种“传染性”是其主要特征。</li>
<li><strong>Copyleft 的含义</strong>：”Copying permitted, but changes must be shared.” (允许复制，但修改必须共享。) 这是对传统版权 (Copyright) 概念的文字游戏。</li>
<li><strong>主要限制</strong>：<ul>
<li><strong>公开源码</strong>：分发（或特定条件下使用）基于 Copyleft 协议的代码时，必须提供对应的源代码。</li>
<li><strong>协议保持一致</strong>：你的派生作品必须沿用相同的或兼容的 Copyleft 协议。</li>
<li><strong>免责声明</strong>和<strong>保留版权</strong>等与宽松协议类似。</li>
</ul>
</li>
<li><strong>适用场景</strong>：<ul>
<li>希望其软件能够永远保持开源状态，防止他人修改后闭源独占。</li>
<li>对于注重软件自由和社区共享的项目。</li>
</ul>
</li>
</ul>
<h2 id="三、主流开源协议详解"><a href="#三、主流开源协议详解" class="headerlink" title="三、主流开源协议详解"></a>三、主流开源协议详解</h2><h3 id="3-1-宽松型协议-Permissive-Licenses"><a href="#3-1-宽松型协议-Permissive-Licenses" class="headerlink" title="3.1 宽松型协议 (Permissive Licenses)"></a>3.1 宽松型协议 (Permissive Licenses)</h3><h4 id="3-1-1-MIT-License-麻省理工学院许可证"><a href="#3-1-1-MIT-License-麻省理工学院许可证" class="headerlink" title="3.1.1 MIT License (麻省理工学院许可证)"></a>3.1.1 MIT License (麻省理工学院许可证)</h4><ul>
<li><strong>特点</strong>：最简洁、最宽松的协议之一。</li>
<li><strong>主要限制</strong>：<ol>
<li>必须在所有副本或重要部分中包含版权和许可声明。</li>
</ol>
</li>
<li><strong>优点</strong>：几乎没有任何限制，开发者和公司可以自由使用、修改、合并、发布、分发、再许可（sub-license）、销售软件，甚至将其用于闭源和商业项目。</li>
<li><strong>缺点</strong>：不保证派生作品的持续开源。</li>
<li><strong>适用场景</strong>：个人项目、库、前端框架、移动应用组件，或任何希望最大化代码采用率的项目。</li>
<li><strong>知名项目</strong>：jQuery, Ruby on Rails, React</li>
</ul>
<h4 id="3-1-2-BSD-License-伯克利软件发行版许可证"><a href="#3-1-2-BSD-License-伯克利软件发行版许可证" class="headerlink" title="3.1.2 BSD License (伯克利软件发行版许可证)"></a>3.1.2 BSD License (伯克利软件发行版许可证)</h4><ul>
<li><strong>特点</strong>：与 MIT 类似，非常宽松。有 2-clause, 3-clause 和 4-clause 版本。<ul>
<li><strong>2-clause (FreeBSD License)</strong>：与 MIT 几乎等价，只要求保留版权信息和免责声明。</li>
<li><strong>3-clause (New &#x2F; Revised BSD License)</strong>：在 2-clause 基础上增加了一个不能用项目或贡献者名称为产品背书的条款。</li>
<li><strong>4-clause (Original BSD License)</strong>：额外的广告条款，要求在所有广告材料中提及原作者，现已不推荐使用。</li>
</ul>
</li>
<li><strong>主要限制</strong>（以 3-clause 为例）：<ol>
<li>重新分发时必须保留版权声明、许可证列表和免责声明。</li>
<li>未经事先书面许可，不得使用贡献者姓名或项目名称为您的产品背书或推广。</li>
</ol>
</li>
<li><strong>优点</strong>：与 MIT 类似，高度自由，兼容性极好。</li>
<li><strong>缺点</strong>：不保证派生作品的持续开源。</li>
<li><strong>适用场景</strong>：科学计算库、操作系统组件、网络工具。</li>
<li><strong>知名项目</strong>：Netflix 的很多开源项目，Golang (部分)，Redis (部分)。</li>
</ul>
<h4 id="3-1-3-Apache-License-2-0-Apache-许可证-2-0"><a href="#3-1-3-Apache-License-2-0-Apache-许可证-2-0" class="headerlink" title="3.1.3 Apache License 2.0 (Apache 许可证 2.0)"></a>3.1.3 Apache License 2.0 (Apache 许可证 2.0)</h4><ul>
<li><strong>特点</strong>：相对 MIT 和 BSD 来说，提供了一定的专利保护，是商业友好的宽松协议。</li>
<li><strong>主要限制</strong>：<ol>
<li><strong>保留版权和许可声明</strong>：必须包含原始的版权和许可声明。</li>
<li><strong>修改声明</strong>：如果你修改了代码，必须声明这些修改。</li>
<li><strong>专利授权</strong>：如果贡献者贡献的代码中包含专利，则会自动授权给用户使用（非常重要，避免专利流氓）。</li>
<li><strong>禁止使用商标</strong>：不能使用 Apache 社区的商标为你的产品做宣传。</li>
</ol>
</li>
<li><strong>优点</strong>：宽松自由，但对个人或公司使用开源代码时可能涉及的专利问题提供了较好的解决方案。</li>
<li><strong>缺点</strong>：不保证派生作品的持续开源。</li>
<li><strong>适用场景</strong>：大型企业级项目、Web 服务器、大数据组件、云原生项目。</li>
<li><strong>知名项目</strong>：Android, Apache Hadoop, Apache Kafka, Kubernetes (遵循 Apache 协议)。</li>
</ul>
<h3 id="3-2-强Copyleft-协议-Strong-Copyleft-Licenses"><a href="#3-2-强Copyleft-协议-Strong-Copyleft-Licenses" class="headerlink" title="3.2 强Copyleft 协议 (Strong Copyleft Licenses)"></a>3.2 强Copyleft 协议 (Strong Copyleft Licenses)</h3><h4 id="3-2-1-GNU-General-Public-License-GPL"><a href="#3-2-1-GNU-General-Public-License-GPL" class="headerlink" title="3.2.1 GNU General Public License (GPL)"></a>3.2.1 GNU General Public License (GPL)</h4><ul>
<li><strong>特点</strong>：最著名的强 Copyleft 协议，分为 GPLv2 和 GPLv3。</li>
<li><strong>主要限制 (核心)</strong>：<ol>
<li><strong>分发源代码</strong>：如果你分发（包括以商业形式销售）使用了 GPL 代码的软件，<strong>无论是否修改</strong>，你的整个软件（包括你自己的私有代码）都<strong>必须以 GPL 协议开源其源代码</strong>。</li>
<li><strong>协议保持一致</strong>：派生作品必须采用相同的 GPL 协议。</li>
<li>需附带版权信息、许可证文本和免责声明。</li>
</ol>
</li>
<li><strong>优点</strong>：最大程度地保障软件的自由，鼓励所有开发者共享改进。</li>
<li><strong>缺点</strong>：“<strong>传染性</strong>” 极强。如果你将 GPL 代码集成到你的专有（闭源）产品中，你将被迫开源你的整个产品，这通常是公司不愿意看到的。</li>
<li><strong>适用场景</strong>：操作系统内核、核心工具、GNU 项目。</li>
<li><strong>知名项目</strong>：Linux Kernel (GPLv2), GNU Compiler Collection (GCC)。</li>
</ul>
<h3 id="3-3-弱Copyleft-协议-Weak-Copyleft-Licenses"><a href="#3-3-弱Copyleft-协议-Weak-Copyleft-Licenses" class="headerlink" title="3.3 弱Copyleft 协议 (Weak Copyleft Licenses)"></a>3.3 弱Copyleft 协议 (Weak Copyleft Licenses)</h3><h4 id="3-3-1-GNU-Lesser-General-Public-License-LGPL"><a href="#3-3-1-GNU-Lesser-General-Public-License-LGPL" class="headerlink" title="3.3.1 GNU Lesser General Public License (LGPL)"></a>3.3.1 GNU Lesser General Public License (LGPL)</h4><ul>
<li><strong>特点</strong>：GPL 的一个“弱化”版本，Copyleft 效果较弱，主要用于库。</li>
<li><strong>主要限制</strong>：<ol>
<li><strong>动态链接</strong>：如果你将 LGPL 库<strong>动态链接</strong>到你的专有（闭源）代码中，你的专有代码<strong>无需开源</strong>。</li>
<li><strong>静态链接&#x2F;直接修改</strong>：如果你直接<strong>修改</strong>了 LGPL 库的源代码，或者将其<strong>静态链接</strong>到你的项目中，那么你修改的部分或你集成的整个库的重新分发版本仍然<strong>必须以 LGPL 协议开源</strong>。</li>
<li>用户必须能够替换掉 LGPL 部分。</li>
<li>需附带版权信息、许可证文本和免责声明。</li>
</ol>
</li>
<li><strong>优点</strong>：允许闭源软件使用 LGPL 库，使其成为一种更适合作为通用库的 Copyleft 协议。平衡了代码自由和商业使用的需求。</li>
<li><strong>缺点</strong>：在使用时仍需注意其限制，尤其是对库的直接修改或静态链接。</li>
<li><strong>适用场景</strong>：代码库、框架，希望被广泛使用但又不想完全放弃 Copyleft 精神的项目。</li>
<li><strong>知名项目</strong>：GNU C Library (glibc)，FFmpeg (部分)。</li>
</ul>
<h4 id="3-3-2-Mozilla-Public-License-2-0-MPLv2"><a href="#3-3-2-Mozilla-Public-License-2-0-MPLv2" class="headerlink" title="3.3.2 Mozilla Public License 2.0 (MPLv2)"></a>3.3.2 Mozilla Public License 2.0 (MPLv2)</h4><ul>
<li><strong>特点</strong>：文件级 Copyleft。比 LGPL 更强，但比 GPL 弱。</li>
<li><strong>主要限制</strong>：<ol>
<li><strong>文件级开源</strong>：如果你修改了 MPL 许可的代码文件，那么你修改后的文件也必须以 MPL 协议开源。</li>
<li><strong>兼容闭源</strong>：你可以将 MPL 许可的文件与你的闭源文件组合在一起，而无需开源你的闭源部分。</li>
<li>需附带版权信息、许可证文本和免责声明。</li>
</ol>
</li>
<li><strong>优点</strong>：对于只修改了部分源码文件的贡献者，强制他们将修改部分回馈社区，但又不对整个应用程序做强制开源要求。</li>
<li><strong>缺点</strong>：比宽松协议更复杂，在整合时需要注意文件粒度。</li>
<li><strong>适用场景</strong>：Web 浏览器、特定模块或插件。</li>
<li><strong>知名项目</strong>：Firefox。</li>
</ul>
<h3 id="3-4-较新的强Copyleft-协议"><a href="#3-4-较新的强Copyleft-协议" class="headerlink" title="3.4 较新的强Copyleft 协议"></a>3.4 较新的强Copyleft 协议</h3><h4 id="3-4-1-GNU-Affero-General-Public-License-AGPL"><a href="#3-4-1-GNU-Affero-General-Public-License-AGPL" class="headerlink" title="3.4.1 GNU Affero General Public License (AGPL)"></a>3.4.1 GNU Affero General Public License (AGPL)</h4><ul>
<li><strong>特点</strong>：GPL 的一个扩展版本，旨在解决“网络服务空白”问题。</li>
<li><strong>主要限制</strong>（在 GPL 基础上增加）：<ol>
<li><strong>网络交互</strong>：如果用户通过网络与 AGPL 软件进行交互（例如，通过 SaaS 服务），即使没有“分发”软件本身，也必须<strong>提供相应的源代码</strong>。这解决了 GPL 软件作为网络服务时，使用者无法获得源代码的问题。</li>
<li>其他与 GPL 类似。</li>
</ol>
</li>
<li><strong>优点</strong>：确保即使是提供网络服务的软件，其用户也能获得并修改源代码，最大化软件自由。</li>
<li><strong>缺点</strong>：“<strong>传染性”最强</strong>。对于提供 SaaS 服务的公司来说，使用 AGPL 代码意味着其整个服务代码都可能需要开源。</li>
<li><strong>适用场景</strong>：对软件自由度有极端高要求的网络服务、数据库。</li>
<li><strong>知名项目</strong>：MongoDB (早期版本，后切换到 SSPL), Nextcloud。</li>
</ul>
<h2 id="四、如何选择开源协议？"><a href="#四、如何选择开源协议？" class="headerlink" title="四、如何选择开源协议？"></a>四、如何选择开源协议？</h2><p>选择一个合适的开源协议取决于你的项目目标和期望：</p>
<ol>
<li><p><strong>如果目标是最大化代码的采用率和兼容性，不介意他人闭源使用你的代码</strong>：</p>
<ul>
<li><strong>MIT</strong> (最宽松，最简单)</li>
<li><strong>BSD 3-Clause</strong> (与 MIT 类似，多一条背书限制)</li>
<li><strong>Apache 2.0</strong> (宽松且提供专利保护，适合企业使用)</li>
</ul>
</li>
<li><p><strong>如果目标是确保你的代码及其派生作品始终保持开源，避免被他人闭源独占</strong>：</p>
<ul>
<li><strong>GPLv3</strong> (最强 Copyleft，应用于整个项目)</li>
<li><strong>AGPLv3</strong> (比 GPLv3 更强，覆盖网络服务使用场景)</li>
</ul>
</li>
<li><p><strong>如果你想让你的库被闭源软件使用，但又希望对库本身的修改能回馈社区</strong>：</p>
<ul>
<li><strong>LGPLv3</strong> (弱 Copyleft，适合库，区分动态链接和静态链接&#x2F;修改)</li>
<li><strong>MPLv2</strong> (文件级 Copyleft，更关注单个文件的修改)</li>
</ul>
</li>
<li><p><strong>如果你是用户，需要评估集成开源代码的风险</strong>：</p>
<ul>
<li><strong>宽松协议</strong>：风险最低，可以自由集成和闭源。</li>
<li><strong>LGPL&#x2F;MPL</strong>：需要仔细阅读协议条款，了解链接类型和修改责任。</li>
<li><strong>GPL&#x2F;AGPL</strong>：风险最高，如果集成到闭源产品中，可能需要开源你的整个产品或服务。<strong>对于商业公司，通常应避免在闭源产品中直接依赖强 Copyleft 代码。</strong></li>
</ul>
</li>
</ol>
<h3 id="签署与声明"><a href="#签署与声明" class="headerlink" title="签署与声明"></a>签署与声明</h3><p>一旦选择了协议，你需要在项目的根目录下添加一个名为 <code>LICENSE</code> 或 <code>LICENSE.txt</code> 的文件，并在其中包含完整的协议文本。同时，在项目的 <code>README</code> 文件中明确声明你选择的协议。</p>
<h2 id="五、协议兼容性-License-Compatibility"><a href="#五、协议兼容性-License-Compatibility" class="headerlink" title="五、协议兼容性 (License Compatibility)"></a>五、协议兼容性 (License Compatibility)</h2><p>将不同协议的软件组合在一起时，协议兼容性是关键。一个常见的规则是“向下兼容”：</p>
<ul>
<li><strong>宽松协议</strong>通常可以与几乎所有协议兼容，因为它们施加的限制最少。</li>
<li><strong>强 Copyleft 协议</strong>（如 GPLv2）通常只兼容相同或更强的 Copyleft 协议。例如，GPLv2 代码不能与 GPLv3 代码合并，因为 GPLv3 增加了额外的限制。而 GPLv3 更灵活，通常可以包含 GPLv2 代码。AGPL 兼容 GPL。</li>
<li>组合不同协议的代码时，最终的组合作品必须遵守所有涉及协议的最严格的限制。</li>
</ul>
<p><strong>在不确定时，请咨询专业的法律意见。</strong></p>
<h2 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h2><p>开源协议是开源生态系统健康运行的基石。它们平衡了代码共享的自由和权利保护的必要性。无论是作为开源项目的贡献者还是使用者，理解不同协议的特点、约束和兼容性都至关重要。正确选择和使用开源协议，不仅能确保你的项目合法合规，更能促进开放创新，推动软件技术持续发展。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/b8afac30c52e/">https://blog.tbf1211.xx.kg/b8afac30c52e/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/2024/">2024</a><a class="post-meta__tags" href="/tags/%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE/">开源协议</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-23.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/884dd81c798b/" title="Pinia Colada详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-22.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Pinia Colada详解</div></div><div class="info-2"><div class="info-item-1"> Pinia Colada 是一个为 Vue 3 和 Pinia 设计的高级数据管理和持久化工具，旨在简化异步数据获取、缓存、以及状态在浏览器存储中的持久化。它将 Pinia 的核心优势与强大的数据管理策略相结合，帮助开发者构建更健壮、响应更快、用户体验更流畅的 Web 应用。  核心思想：Pinia Colada 致力于将数据获取 (Fetching)、数据缓存 (Caching)、数据持久化 (Persistence) 和 后端状态同步 (Synchronization) 等复杂逻辑封装在易于使用的 Pinia Store 抽象之上。它使得处理异步数据像管理本地状态一样简单，同时提供声明式的 API 来控制数据的生命周期。   一、为什么需要 Pinia Colada？在现代 Web 应用中，处理异步数据（如来自 API 的数据）和管理其生命周期是一个常见的挑战。仅仅依靠 Pinia 的 actions 来 fetch 数据，并不能很好地解决以下问题：  数据重复请求：多个组件可能请求相同的数据，导致不必要的网络开销。 请求加载状态管理：手动维护每个请求的 loading 和...</div></div></div></a><a class="pagination-related" href="/25324aef0ab0/" title="Git Merge vs. Rebase 对比详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-31.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Git Merge vs. Rebase 对比详解</div></div><div class="info-2"><div class="info-item-1"> 在使用 Git 进行团队协作或分支管理时，git merge 和 git rebase 是两种最常用的将一个分支的修改整合到另一个分支的方法。它们都能达到相同的最终目标——将不同分支历史上的修改合并——但在实现方式、提交历史的呈现以及适用场景上有着显著的区别。理解这两者的不同是熟练掌握 Git 的关键。  核心对比：  Merge (合并)：保留所有分支的原始提交历史，通过产生一个新的合并提交来连接不同的历史。 Rebase (变基)：将一个分支上的所有提交“移动”到另一个分支的末端，从而形成一个线性的、没有合并提交的提交历史。    一、Git Merge (合并)1.1 工作原理git merge 将两个或多个分支的开发历史整合到一个新的提交中。它会找到两个分支最新的共同祖先，然后将这两个分支从共同祖先到各自最新的提交的所有修改整合到一个新的合并提交 (merge commit) 中。 1.2 提交历史 非线性历史：git merge 会保留所有分支的原始提交历史，包括每个分支上的每一次提交。当从一个特性分支合并回主分支时，会在主分支上创建一个新的合并提交，这个提交会有两个...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/f35a31a1b5c1/" title="PHP 各个版本新特性详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-07.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-08</div><div class="info-item-2">PHP 各个版本新特性详解</div></div><div class="info-2"><div class="info-item-1"> PHP 作为最流行的后端脚本语言之一，自诞生以来便不断演进。从早期的松散特性到现代的强类型、高性能，每一次版本迭代都带来了显著的改进。本文将详细回顾 PHP 7.0 以后，各个主要版本（7.x 和 8.x 系列）引入的新特性、性能提升和废弃功能，帮助开发者理解 PHP 的发展轨迹并更好地进行技术选型和代码迁移。  核心思想：PHP 的演进主线是：提高性能、增强类型系统、简化语法、引入现代编程范式和清理历史遗留问题。   一、PHP 7.0 (2015年) - 性能飞跃的起点PHP 7.0 是一个里程碑式的版本，其最大的亮点是引入了全新的 Zend Engine (Zend Engine 3.0，代号 PHPNG)，带来了惊人的性能提升。 1.1 核心特性与性能提升 Zend Engine 3.0 (PHPNG)：这是 7.0 最大的亮点。与 PHP 5.6 相比，PHP 7.0 在实际应用中实现了 2 倍甚至更高的性能提升，大幅降低了内存消耗。这是通过重写 Zend Engine 的核心，优化了数据结构、Opcodes 处理和垃圾回收机制实现的。 抽象语法树 (Abstract...</div></div></div></a><a class="pagination-related" href="/f5c29582f368/" title="Serverless 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-21.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-10</div><div class="info-item-2">Serverless 详解</div></div><div class="info-2"><div class="info-item-1"> Serverless (无服务器) 是一种云计算的执行模型，它允许开发者构建和运行应用程序而无需管理服务器。在这种模型下，云服务提供商负责服务器的调配、维护和扩展，开发者只需关注自己的代码逻辑。Serverless 并不是指“没有服务器”，而是指“开发者不需要关心服务器”。它通常包含两种核心服务模式：函数即服务 (Function-as-a-Service, FaaS) 和 后端即服务 (Backend-as-a-Service, BaaS)。  核心思想：将基础设施管理完全交给云服务商，开发者只需编写代码并部署，按实际使用量付费，实现极致的弹性伸缩和降低运维成本。   一、为什么需要 Serverless？传统的应用部署模型（物理机、虚拟机、容器）都需要开发者或运维团队投入大量精力进行服务器管理：  资源调配：预估并配置合适的 CPU、内存、存储。 操作系统管理：安装、打补丁、更新。 运行时环境：安装语言运行时、库、依赖。 扩展性：根据流量变化手动或自动伸缩服务器集群。 高可用性：设置负载均衡、故障转移机制。 监控与日志：部署监控 agent，收集日志。  这些“非功能性需求...</div></div></div></a><a class="pagination-related" href="/6842deb76626/" title="AWS Lambda与Serverless详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-05.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-13</div><div class="info-item-2">AWS Lambda与Serverless详解</div></div><div class="info-2"><div class="info-item-1"> AWS Lambda 是亚马逊网络服务 (Amazon Web Services, AWS) 提供的核心 Serverless 计算服务，也是函数即服务 (Function-as-a-Service, FaaS) 的开创者和领导者。它允许开发者运行代码，而无需配置或管理服务器。开发者只需上传代码，Lambda 会自动处理运行代码所需的一切，包括容量预置、扩展、打补丁和维护。  核心思想：AWS Lambda 是 AWS Serverless 生态的核心，它将代码作为“函数”运行在无服务器环境中，由各种 AWS 事件触发，按需执行，自动伸缩，并按实际使用量计费。   一、AWS Lambda 概览AWS Lambda 于 2014 年推出，彻底改变了云计算的开发和部署模式。它让开发者能够将后端逻辑解耦为一系列独立、短生命周期的函数，从而极大地简化了运维。 1.1 Lambda 的核心概念 函数 (Function)：这是 Lambda 中的基本部署单元，包含你的代码和相关配置（如运行时、内存、超时时间、环境变量）。 事件 (Event)：触发 Lambda 函数执行的任何操作。事...</div></div></div></a><a class="pagination-related" href="/3ba66d6aee4f/" title="Next.js 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-22.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-15</div><div class="info-item-2">Next.js 详解</div></div><div class="info-2"><div class="info-item-1"> Next.js 是一个基于 React 的 全栈 (Full-stack) Web 框架，由 Vercel 公司开发和维护。它提供了一个开箱即用的解决方案，用于构建高性能、SEO 友好且易于扩展的现代 React 应用程序。Next.js 最大的特点是支持 服务端渲染 (SSR)、静态网站生成 (SSG) 和 客户端渲染 (CSR) 等多种渲染方式，并集成了文件系统路由、API 路由、图片优化、代码分割等诸多功能，极大地提升了开发者体验和应用性能。  核心思想：Next.js 是一个强大的 React 框架，通过多种渲染策略（SSR、SSG、CSR），优化的开发体验和内置功能，帮助开发者高效构建高性能、可扩展的现代 Web 应用。   一、为什么选择 Next.js？React 本身是一个用于构建用户界面的库，它通常在客户端运行 (CSR)。然而，纯客户端渲染的应用存在一些缺点：  SEO 不友好：搜索引擎爬虫可能无法完全索引动态生成的页面内容。 首次加载性能：用户需要等待 JavaScript 下载、解析和执行后才能看到内容，导致白屏时间较长。 Bundle Size：需要将...</div></div></div></a><a class="pagination-related" href="/c85a04386656/" title="Vite配置详解：从入门到精通"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-04.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-26</div><div class="info-item-2">Vite配置详解：从入门到精通</div></div><div class="info-2"><div class="info-item-1"> Vite 是一款由 Vue.js 作者尤雨溪开发的现代前端构建工具，它以其极速的开发服务器启动速度和闪电般的模块热更新 (HMR) 而闻名。Vite 利用浏览器原生的 ES Modules (ESM) 能力，在开发环境下跳过了打包步骤，直接提供模块给浏览器，从而大幅提升了开发体验。在生产环境下，Vite 采用 Rollup 进行打包，兼顾了性能和优化。本篇文档将深入探讨 Vite 的核心配置，帮助开发者充分利用 Vite 的能力。  核心思想：Vite 的配置以 vite.config.ts (或 .js) 文件为中心，使用 ESM 模块导出配置对象。它通过 plugins 数组扩展功能，通过 server 配置开发服务器，build 配置生产构建，resolve 配置模块解析，以及 css、json 等全局配置项，实现了高度可定制性和灵活性。    一、Vite 配置文件的基本结构Vite 的配置文件通常命名为 vite.config.js 或 vite.config.ts，位于项目根目录。它是一个 ESM 模块，负责导出一个配置对象。 1234567891011121314...</div></div></div></a><a class="pagination-related" href="/eae983954311/" title="NAT (Network Address Translation) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-02.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-03</div><div class="info-item-2">NAT (Network Address Translation) 详解</div></div><div class="info-2"><div class="info-item-1"> NAT (Network Address Translation，网络地址转换) 是一种在 IP 数据包通过路由器或防火墙时，修改其 IP 地址信息（有时也包括端口号）的技术。NAT 是 IPv4 时代的核心网络技术之一，它在缓解 IPv4 地址枯竭和提高内部网络安全性方面发挥了不可或缺的作用。  核心思想：NAT 允许一个拥有私有 IP 地址的内部网络通过一个或几个公共 IP 地址与外部网络（如互联网）通信，从而实现地址共享和隐藏内部拓扑。    一、NAT 的背景与重要性1.1 IPv4 地址枯竭原始的 IPv4 地址空间大约为 40 亿个地址。随着互联网和智能设备的普及，全球对 IP 地址的需求爆炸式增长，远超 IPv4 的设计容量。NAT 的出现使得多个设备可以共享一个公有 IP 地址，极大地延缓了 IPv4 地址耗尽的速度。 1.2 网络安全考量通过 NAT，内部网络的私有 IP 地址空间对外部网络是不可见的。外部攻击者无法直接访问内部主机，因为他们只看到 NAT 设备的公共 IP 地址。这为内部网络提供了一层基本的安全屏障。 1.3 灵活的网络设计NAT 允许企业和...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">367</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">211</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">75</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%AE%83%EF%BC%9F"><span class="toc-text">一、什么是开源协议？为什么需要它？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%9A%E5%AE%BD%E6%9D%BE%E4%B8%8ECopyleft"><span class="toc-text">二、开源协议的分类：宽松与Copyleft</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%BD%E6%9D%BELassive-Permissive-License-BSD%E3%80%81MIT%E3%80%81Apache%E7%AD%89"><span class="toc-text">2.1 宽松Lassive&#x2F;Permissive License (BSD、MIT、Apache等)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%BC%BACopyleft-Weak-Copyleft-GPL%E3%80%81LGPL%E3%80%81AGPL%E7%AD%89"><span class="toc-text">2.2 强Copyleft &#x2F; Weak Copyleft (GPL、LGPL、AGPL等)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%B8%BB%E6%B5%81%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3"><span class="toc-text">三、主流开源协议详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%AE%BD%E6%9D%BE%E5%9E%8B%E5%8D%8F%E8%AE%AE-Permissive-Licenses"><span class="toc-text">3.1 宽松型协议 (Permissive Licenses)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-MIT-License-%E9%BA%BB%E7%9C%81%E7%90%86%E5%B7%A5%E5%AD%A6%E9%99%A2%E8%AE%B8%E5%8F%AF%E8%AF%81"><span class="toc-text">3.1.1 MIT License (麻省理工学院许可证)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-BSD-License-%E4%BC%AF%E5%85%8B%E5%88%A9%E8%BD%AF%E4%BB%B6%E5%8F%91%E8%A1%8C%E7%89%88%E8%AE%B8%E5%8F%AF%E8%AF%81"><span class="toc-text">3.1.2 BSD License (伯克利软件发行版许可证)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-3-Apache-License-2-0-Apache-%E8%AE%B8%E5%8F%AF%E8%AF%81-2-0"><span class="toc-text">3.1.3 Apache License 2.0 (Apache 许可证 2.0)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%BC%BACopyleft-%E5%8D%8F%E8%AE%AE-Strong-Copyleft-Licenses"><span class="toc-text">3.2 强Copyleft 协议 (Strong Copyleft Licenses)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-GNU-General-Public-License-GPL"><span class="toc-text">3.2.1 GNU General Public License (GPL)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%BC%B1Copyleft-%E5%8D%8F%E8%AE%AE-Weak-Copyleft-Licenses"><span class="toc-text">3.3 弱Copyleft 协议 (Weak Copyleft Licenses)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-GNU-Lesser-General-Public-License-LGPL"><span class="toc-text">3.3.1 GNU Lesser General Public License (LGPL)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-Mozilla-Public-License-2-0-MPLv2"><span class="toc-text">3.3.2 Mozilla Public License 2.0 (MPLv2)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E8%BE%83%E6%96%B0%E7%9A%84%E5%BC%BACopyleft-%E5%8D%8F%E8%AE%AE"><span class="toc-text">3.4 较新的强Copyleft 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-GNU-Affero-General-Public-License-AGPL"><span class="toc-text">3.4.1 GNU Affero General Public License (AGPL)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE%EF%BC%9F"><span class="toc-text">四、如何选择开源协议？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%BE%E7%BD%B2%E4%B8%8E%E5%A3%B0%E6%98%8E"><span class="toc-text">签署与声明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%8D%8F%E8%AE%AE%E5%85%BC%E5%AE%B9%E6%80%A7-License-Compatibility"><span class="toc-text">五、协议兼容性 (License Compatibility)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">六、总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/28f993be5cfe/" title="Bun.js 深度解析：冷启动与边缘函数优化"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-31.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Bun.js 深度解析：冷启动与边缘函数优化"/></a><div class="content"><a class="title" href="/28f993be5cfe/" title="Bun.js 深度解析：冷启动与边缘函数优化">Bun.js 深度解析：冷启动与边缘函数优化</a><time datetime="2025-12-07T22:24:00.000Z" title="发表于 2025-12-08 06:24:00">2025-12-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/bcbe0f78ef1d/" title="Go Jaeger 深度解析：分布式追踪实践"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Jaeger 深度解析：分布式追踪实践"/></a><div class="content"><a class="title" href="/bcbe0f78ef1d/" title="Go Jaeger 深度解析：分布式追踪实践">Go Jaeger 深度解析：分布式追踪实践</a><time datetime="2025-12-04T22:24:00.000Z" title="发表于 2025-12-05 06:24:00">2025-12-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/15920229f914/" title="Supabase 深度解析"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Supabase 深度解析"/></a><div class="content"><a class="title" href="/15920229f914/" title="Supabase 深度解析">Supabase 深度解析</a><time datetime="2025-12-02T22:24:00.000Z" title="发表于 2025-12-03 06:24:00">2025-12-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/1ae20d2726d8/" title="MiniRTC 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-19.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MiniRTC 详解"/></a><div class="content"><a class="title" href="/1ae20d2726d8/" title="MiniRTC 详解">MiniRTC 详解</a><time datetime="2025-11-28T22:24:00.000Z" title="发表于 2025-11-29 06:24:00">2025-11-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/be24ef88e59a/" title="WebRTC 技术详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-22.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WebRTC 技术详解"/></a><div class="content"><a class="title" href="/be24ef88e59a/" title="WebRTC 技术详解">WebRTC 技术详解</a><time datetime="2025-11-27T22:24:00.000Z" title="发表于 2025-11-28 06:24:00">2025-11-28</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-23.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/archives/2023/" target="_blank" title="📌 2023">📌 2023</a><a href="/archives/2024/" target="_blank" title="❓ 2024">❓ 2024</a><a href="/archives/2025/" target="_blank" title="🚀 2025">🚀 2025</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="分类">分类</a><a href="/tags/" target="_blank" title="标签">标签</a><a href="/categories/" target="_blank" title="时间线">时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="说说">说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2025 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.2"></script><script src="/js/main.js?v=5.5.2"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.4/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="ture"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      true
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script>(() => {
  const option = null
  const config = {"site_uv":true,"site_pv":true,"page_pv":true,"token":"qTvz1SkmPDt785fgh6BpiA5qiFFIVUwxj8Ft+rPW+cdN59v1hXjwRgSmy0+ji9m+oLlcxvo2NfDSMa6epVl3NTlsN3ejCIwWeP8Y51aEJ0Sbem4UexGmJLspB7AkOBId2SdtT6QWEBlGmFIIQgchQ2zAKYxTmc/kpBED5aLSr+3uvmQ9/G7FJQeVFpveDkK0xM1hu36xq4a6/FSeROxtoEp5zabzTWiYTlLsQzIl/NlELnCq3nxK+oo/vl3UQo/oM/rae/gJX/MaVKsgIUCd2ABJogNkx2KTenBIBpbPki5FzOgPh6/z4GPa4HvhNO51DDVG1SEQZooqEYmt/gnybLBWFbN+7liZWw=="}

  const runTrack = () => {
    if (typeof umami !== 'undefined' && typeof umami.track === 'function') {
      umami.track(props => ({ ...props, url: window.location.pathname, title: GLOBAL_CONFIG_SITE.title }))
    } else {
      console.warn('Umami Analytics: umami.track is not available')
    }
  }

  const loadUmamiJS = () => {
    btf.getScript('https://umami.012700.xyz/script.js', {
      'data-website-id': '2a796d6c-6499-42d8-8eb4-d9a2930b0ff3',
      'data-auto-track': 'false',
      ...option
    }).then(() => {
      runTrack()
    }).catch(error => {
      console.error('Umami Analytics: Error loading script', error)
    })
  }

  const getData = async (isPost) => {
    try {
      const now = Date.now()
      const keyUrl = isPost ? `&url=${window.location.pathname}` : ''
      const headerList = { 'Accept': 'application/json' }

      if (true) {
        headerList['Authorization'] = `Bearer ${config.token}`
      } else {
        headerList['x-umami-api-key'] = config.token
      }

      const res = await fetch(`https://umami.012700.xyz/api/websites/2a796d6c-6499-42d8-8eb4-d9a2930b0ff3/stats?startAt=0000000000&endAt=${now}${keyUrl}`, {
        method: "GET",
        headers: headerList
      })

      if (!res.ok) {
        throw new Error(`HTTP error! status: ${res.status}`)
      }

      return await res.json()
    } catch (error) {
      console.error('Umami Analytics: Failed to fetch data', error)
      throw error
    }
  }

  const insertData = async () => {
    try {
      if (GLOBAL_CONFIG_SITE.pageType === 'post' && config.page_pv) {
        const pagePV = document.getElementById('umamiPV')
        if (pagePV) {
          const data = await getData(true)
          if (data && data.pageviews && typeof data.pageviews.value !== 'undefined') {
            pagePV.textContent = data.pageviews.value
          } else {
            console.warn('Umami Analytics: Invalid page view data received')
          }
        }
      }

      if (config.site_uv || config.site_pv) {
        const data = await getData(false)

        if (config.site_uv) {
          const siteUV = document.getElementById('umami-site-uv')
          if (siteUV && data && data.visitors && typeof data.visitors.value !== 'undefined') {
            siteUV.textContent = data.visitors.value
          } else if (siteUV) {
            console.warn('Umami Analytics: Invalid site UV data received')
          }
        }

        if (config.site_pv) {
          const sitePV = document.getElementById('umami-site-pv')
          if (sitePV && data && data.pageviews && typeof data.pageviews.value !== 'undefined') {
            sitePV.textContent = data.pageviews.value
          } else if (sitePV) {
            console.warn('Umami Analytics: Invalid site PV data received')
          }
        }
      }
    } catch (error) {
      console.error('Umami Analytics: Failed to insert data', error)
    }
  }

  btf.addGlobalFn('pjaxComplete', runTrack, 'umami_analytics_run_track')
  btf.addGlobalFn('pjaxComplete', insertData, 'umami_analytics_insert')


  loadUmamiJS()

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', insertData)
  } else {
    setTimeout(insertData, 100)
  }
})()</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.2"></script></div></div></body></html>