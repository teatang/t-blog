<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Vite配置详解：从入门到精通 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Vite 是一款由 Vue.js 作者尤雨溪开发的现代前端构建工具，它以其极速的开发服务器启动速度和闪电般的模块热更新 (HMR) 而闻名。Vite 利用浏览器原生的 ES Modules (ESM) 能力，在开发环境下跳过了打包步骤，直接提供模块给浏览器，从而大幅提升了开发体验。在生产环境下，Vite 采用 Rollup 进行打包，兼顾了性能和优化。本篇文档将深入探讨 Vite 的核心配置，帮">
<meta property="og:type" content="article">
<meta property="og:title" content="Vite配置详解：从入门到精通">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/c85a04386656/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="Vite 是一款由 Vue.js 作者尤雨溪开发的现代前端构建工具，它以其极速的开发服务器启动速度和闪电般的模块热更新 (HMR) 而闻名。Vite 利用浏览器原生的 ES Modules (ESM) 能力，在开发环境下跳过了打包步骤，直接提供模块给浏览器，从而大幅提升了开发体验。在生产环境下，Vite 采用 Rollup 进行打包，兼顾了性能和优化。本篇文档将深入探讨 Vite 的核心配置，帮">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-02.jpg">
<meta property="article:published_time" content="2024-01-25T22:24:00.000Z">
<meta property="article:modified_time" content="2026-01-19T01:57:35.868Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="项目构建">
<meta property="article:tag" content="TypeScript">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="Vite">
<meta property="article:tag" content="2024">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-02.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Vite配置详解：从入门到精通",
  "url": "https://blog.tbf1211.xx.kg/c85a04386656/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-02.jpg",
  "datePublished": "2024-01-25T22:24:00.000Z",
  "dateModified": "2026-01-19T01:57:35.868Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/c85a04386656/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vite配置详解：从入门到精通',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">500</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">226</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-02.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">Vite配置详解：从入门到精通</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li><li><a class="site-page child" href="/archives/2026/"><i class="fa-fw fa-solid fa-code-branch"></i><span> 2026</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Vite配置详解：从入门到精通</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2024-01-25T22:24:00.000Z" title="发表于 2024-01-26 06:24:00">2024-01-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/">前端技术</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/">项目构建</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>11分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><strong>Vite</strong> 是一款由 Vue.js 作者尤雨溪开发的现代前端构建工具，它以其<strong>极速的开发服务器启动速度</strong>和<strong>闪电般的模块热更新 (HMR)</strong> 而闻名。Vite 利用浏览器原生的 ES Modules (ESM) 能力，在开发环境下跳过了打包步骤，直接提供模块给浏览器，从而大幅提升了开发体验。在生产环境下，Vite 采用 Rollup 进行打包，兼顾了性能和优化。<br>本篇文档将深入探讨 Vite 的核心配置，帮助开发者充分利用 Vite 的能力。</p>
</blockquote>
<div class="note info flat"><p>核心思想：<br><strong>Vite 的配置以 <code>vite.config.ts</code> (或 <code>.js</code>) 文件为中心，使用 ESM 模块导出配置对象。它通过 <code>plugins</code> 数组扩展功能，通过 <code>server</code> 配置开发服务器，<code>build</code> 配置生产构建，<code>resolve</code> 配置模块解析，以及 <code>css</code>、<code>json</code> 等全局配置项，实现了高度可定制性和灵活性。</strong></p>
</div>

<hr>
<h2 id="一、Vite-配置文件的基本结构"><a href="#一、Vite-配置文件的基本结构" class="headerlink" title="一、Vite 配置文件的基本结构"></a>一、Vite 配置文件的基本结构</h2><p>Vite 的配置文件通常命名为 <code>vite.config.js</code> 或 <code>vite.config.ts</code>，位于项目根目录。它是一个 ESM 模块，负责导出一个配置对象。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span>; <span class="comment">// 引入 Vue 插件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 defineConfig 可以获得类型提示</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// 配置项</span></span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()], <span class="comment">// 添加 Vue 插件</span></span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">outDir</span>: <span class="string">&#x27;dist&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>关键点：</strong></p>
<ul>
<li><strong><code>defineConfig</code></strong>：虽然不是必需的，但强烈建议使用 <code>defineConfig</code> 函数来包裹配置对象。这提供了智能提示 (IntelliSense) 和类型检查，帮助避免配置错误。</li>
<li><strong>ESM 模块</strong>：配置文件必须遵循 ES Modules 规范，使用 <code>import</code> 和 <code>export default</code>。</li>
</ul>
<h2 id="二、核心配置选项详解"><a href="#二、核心配置选项详解" class="headerlink" title="二、核心配置选项详解"></a>二、核心配置选项详解</h2><p>Vite 的配置选项非常丰富，以下将对一些常用且重要的配置进行详细解析。</p>
<h3 id="2-1-root"><a href="#2-1-root" class="headerlink" title="2.1 root"></a>2.1 <code>root</code></h3><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>process.cwd()</code> (项目根目录)</li>
<li><strong>描述</strong>：项目根目录（<code>index.html</code> 文件所在的位置）。可以直接通过命令行 <code>vite --root &lt;path&gt;</code> 指定。</li>
</ul>
<h3 id="2-2-base"><a href="#2-2-base" class="headerlink" title="2.2 base"></a>2.2 <code>base</code></h3><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>/</code></li>
<li><strong>描述</strong>：公共基础路径。<ul>
<li>在开发或生产构建时，如果你的部署会到一个非根路径，需要设置此项。</li>
<li>例如，如果应用部署在 <code>https://www.example.com/my-app/</code>，则 <code>base</code> 应设置为 <code>/my-app/</code>。</li>
<li>Vite 会自动将所有引用（包括资源 URL 和绝对路径）调整到此基础路径。</li>
</ul>
</li>
</ul>
<h3 id="2-3-mode"><a href="#2-3-mode" class="headerlink" title="2.3 mode"></a>2.3 <code>mode</code></h3><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>&#39;development&#39;</code> (开发环境) &#x2F; <code>&#39;production&#39;</code> (生产环境)</li>
<li><strong>描述</strong>：运行模式。Vite 会根据 <code>--mode</code> 命令行选项自动设置。在开发时通常是 <code>development</code>，打包时是 <code>production</code>。可以通过此选项来加载不同的环境变量。</li>
</ul>
<h3 id="2-4-plugins"><a href="#2-4-plugins" class="headerlink" title="2.4 plugins"></a>2.4 <code>plugins</code></h3><ul>
<li><strong>类型</strong>：<code>Array&lt;PluginOption | (PluginOption | PluginOption[])[]&gt;</code></li>
<li><strong>描述</strong>：一个数组，用于配置 Vite 插件。插件是 Vite 扩展其核心功能的主要方式，例如支持 Vue、React、TypeScript、图片优化等。<ul>
<li><strong>示例</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> basicSsl <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-basic-ssl&#x27;</span>; <span class="comment">// 一个用于 HTTPS 开发的插件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title function_">basicSsl</span>() <span class="comment">// 启用 HTTPS 开发服务器</span></span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="2-5-publicDir"><a href="#2-5-publicDir" class="headerlink" title="2.5 publicDir"></a>2.5 <code>publicDir</code></h3><ul>
<li><strong>类型</strong>：<code>string | false</code></li>
<li><strong>默认值</strong>：<code>&#39;public&#39;</code></li>
<li><strong>描述</strong>：静态资源服务的目录。此目录下的文件会直接被服务，不会经过构建流程。<ul>
<li>在开发服务器中，直接通过 <code>/</code> 访问。例如 <code>public/logo.png</code> 可通过 <code>http://localhost:3000/logo.png</code> 访问。</li>
<li>在构建时，会被复制到 <code>outDir</code> 根目录。</li>
<li>如果设置为 <code>false</code>，则禁用公共文件服务。</li>
</ul>
</li>
</ul>
<h3 id="2-6-cacheDir"><a href="#2-6-cacheDir" class="headerlink" title="2.6 cacheDir"></a>2.6 <code>cacheDir</code></h3><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>&#39;node_modules/.vite&#39;</code></li>
<li><strong>描述</strong>：存储缓存文件的目录。Vite 将优化过的依赖缓存到此目录，以提高后续启动速度和构建速度。</li>
</ul>
<h3 id="2-7-resolve"><a href="#2-7-resolve" class="headerlink" title="2.7 resolve"></a>2.7 <code>resolve</code></h3><ul>
<li><strong>类型</strong>：<code>ResolveOptions</code></li>
<li><strong>描述</strong>：配置模块解析的策略。</li>
</ul>
<h4 id="2-7-1-resolve-alias"><a href="#2-7-1-resolve-alias" class="headerlink" title="2.7.1 resolve.alias"></a>2.7.1 <code>resolve.alias</code></h4><ul>
<li><strong>类型</strong>：<code>Record&lt;string, string&gt; | Array&lt;&#123; find: string | RegExp, replacement: string, customResolver?: ResolverFunction &#125;&gt;</code></li>
<li><strong>描述</strong>：路径别名。用于模块导入时创建别名，使导入路径更简洁。<ul>
<li><strong>示例</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; resolve &#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>; <span class="comment">// 导入 path 模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./src&#x27;</span>), <span class="comment">// @ 符号指向 src 目录</span></span><br><span class="line">      <span class="string">&#x27;#&#x27;</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./types&#x27;</span>) <span class="comment">// # 符号指向 types 目录</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>通过这样配置后，在代码中你可以使用 <code>import Component from &#39;@/components/Component.vue&#39;</code> 而不是 <code>import Component from &#39;../../components/Component.vue&#39;</code>。</li>
</ul>
</li>
</ul>
<h4 id="2-7-2-resolve-dedupe"><a href="#2-7-2-resolve-dedupe" class="headerlink" title="2.7.2 resolve.dedupe"></a>2.7.2 <code>resolve.dedupe</code></h4><ul>
<li><strong>类型</strong>：<code>string[]</code></li>
<li><strong>描述</strong>：在开发环境下，强制 Vite 始终将列出的依赖项解析到同一副本。这在 monorepo 或依赖项被多次引用但需要确保它们是同一个实例时很有用。</li>
</ul>
<h4 id="2-7-3-resolve-extensions"><a href="#2-7-3-resolve-extensions" class="headerlink" title="2.7.3 resolve.extensions"></a>2.7.3 <code>resolve.extensions</code></h4><ul>
<li><strong>类型</strong>：<code>string[]</code></li>
<li><strong>默认值</strong>：<code>[&#39;.mjs&#39;, &#39;.js&#39;, &#39;.ts&#39;, &#39;.jsx&#39;, &#39;.tsx&#39;, &#39;.json&#39;, &#39;.vue&#39;]</code></li>
<li><strong>描述</strong>：导入时可省略的扩展名列表。</li>
</ul>
<h3 id="2-8-css"><a href="#2-8-css" class="headerlink" title="2.8 css"></a>2.8 <code>css</code></h3><ul>
<li><strong>类型</strong>：<code>CSSOptions</code></li>
<li><strong>描述</strong>：配置 CSS 预处理器、CSS Modules 等。</li>
</ul>
<h4 id="2-8-1-css-preprocessorOptions"><a href="#2-8-1-css-preprocessorOptions" class="headerlink" title="2.8.1 css.preprocessorOptions"></a>2.8.1 <code>css.preprocessorOptions</code></h4><ul>
<li><strong>类型</strong>：<code>Record&lt;string, Record&lt;string, any&gt;&gt;</code></li>
<li><strong>描述</strong>：指定 CSS 预处理器的选项。<ul>
<li><strong>示例 (SCSS)</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">      <span class="attr">scss</span>: &#123;</span><br><span class="line">        <span class="attr">additionalData</span>: <span class="string">`@import &quot;@/styles/variables.scss&quot;;`</span> <span class="comment">// 自动向所有 SCSS 文件注入变量</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="2-8-2-css-modules"><a href="#2-8-2-css-modules" class="headerlink" title="2.8.2 css.modules"></a>2.8.2 <code>css.modules</code></h4><ul>
<li><strong>类型</strong>：<code>CSSModulesOptions</code></li>
<li><strong>描述</strong>：配置 CSS Modules 的行为。</li>
</ul>
<h3 id="2-9-json"><a href="#2-9-json" class="headerlink" title="2.9 json"></a>2.9 <code>json</code></h3><ul>
<li><strong>类型</strong>：<code>JSONOptions</code></li>
<li><strong>描述</strong>：配置 JSON 导入的行为。</li>
</ul>
<h4 id="2-9-1-json-namedExports"><a href="#2-9-1-json-namedExports" class="headerlink" title="2.9.1 json.namedExports"></a>2.9.1 <code>json.namedExports</code></h4><ul>
<li><strong>类型</strong>：<code>boolean</code></li>
<li><strong>默认值</strong>：<code>true</code></li>
<li><strong>描述</strong>：是否支持 JSON 文件的命名导出。</li>
</ul>
<h3 id="2-10-esbuild"><a href="#2-10-esbuild" class="headerlink" title="2.10 esbuild"></a>2.10 <code>esbuild</code></h3><ul>
<li><strong>类型</strong>：<code>ESBuildOptions | false</code></li>
<li><strong>描述</strong>：ESBuild 是 Vite 默认用于代码转译和压缩的工具。可以配置其选项或禁用它。</li>
</ul>
<h4 id="2-10-1-esbuild-jsxFactory-esbuild-jsxFragment"><a href="#2-10-1-esbuild-jsxFactory-esbuild-jsxFragment" class="headerlink" title="2.10.1 esbuild.jsxFactory &#x2F; esbuild.jsxFragment"></a>2.10.1 <code>esbuild.jsxFactory</code> &#x2F; <code>esbuild.jsxFragment</code></h4><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>描述</strong>：JSX 转译为 <code>React.createElement</code> (或其他) 调用的工厂函数。</li>
</ul>
<h3 id="2-11-server"><a href="#2-11-server" class="headerlink" title="2.11 server"></a>2.11 <code>server</code></h3><ul>
<li><strong>类型</strong>：<code>ServerOptions</code></li>
<li><strong>描述</strong>：配置开发服务器。</li>
</ul>
<h4 id="2-11-1-server-host"><a href="#2-11-1-server-host" class="headerlink" title="2.11.1 server.host"></a>2.11.1 <code>server.host</code></h4><ul>
<li><strong>类型</strong>：<code>string | boolean</code></li>
<li><strong>默认值</strong>：<code>&#39;localhost&#39;</code></li>
<li><strong>描述</strong>：指定服务器监听的 IP 地址。<ul>
<li><code>&#39;localhost&#39;</code>：只能通过本地访问。</li>
<li><code>&#39;0.0.0.0&#39;</code> 或 <code>true</code>：可以从局域网 IP 访问，便于移动端调试。</li>
<li><code>&#39;127.0.0.1&#39;</code>：默认。</li>
</ul>
</li>
</ul>
<h4 id="2-11-2-server-port"><a href="#2-11-2-server-port" class="headerlink" title="2.11.2 server.port"></a>2.11.2 <code>server.port</code></h4><ul>
<li><strong>类型</strong>：<code>number</code></li>
<li><strong>默认值</strong>：<code>5173</code></li>
<li><strong>描述</strong>：指定开发服务器端口。如果端口被占用，Vite 会自动尝试下一个可用端口。</li>
</ul>
<h4 id="2-11-3-server-strictPort"><a href="#2-11-3-server-strictPort" class="headerlink" title="2.11.3 server.strictPort"></a>2.11.3 <code>server.strictPort</code></h4><ul>
<li><strong>类型</strong>：<code>boolean</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：如果端口被占用，是否严格退出而不是尝试下一个可用端口。</li>
</ul>
<h4 id="2-11-4-server-https"><a href="#2-11-4-server-https" class="headerlink" title="2.11.4 server.https"></a>2.11.4 <code>server.https</code></h4><ul>
<li><strong>类型</strong>：<code>boolean | Http2ServerOptions</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：是否启用 HTTPS (TLS)。需要配置 SSL 证书。<ul>
<li>可以使用 <code>@vitejs/plugin-basic-ssl</code> 插件来快速启用自签名证书。</li>
</ul>
</li>
</ul>
<h4 id="2-11-5-server-open"><a href="#2-11-5-server-open" class="headerlink" title="2.11.5 server.open"></a>2.11.5 <code>server.open</code></h4><ul>
<li><strong>类型</strong>：<code>boolean | string</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：服务器启动后是否自动打开浏览器。<ul>
<li><code>true</code>：打开默认浏览器。</li>
<li><code>string</code>：指定要打开的 URL 路径 (如 <code>/dashboard</code>)。</li>
</ul>
</li>
</ul>
<h4 id="2-11-6-server-proxy"><a href="#2-11-6-server-proxy" class="headerlink" title="2.11.6 server.proxy"></a>2.11.6 <code>server.proxy</code></h4><ul>
<li><strong>类型</strong>：<code>Record&lt;string, string | ProxyOptions&gt;</code></li>
<li><strong>描述</strong>：配置代理规则，将特定路径的请求转发到其他服务器。解决跨域问题。<ul>
<li><strong>示例</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>, <span class="comment">// 后端 API 服务器地址</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">// 改变源，使其符合后端服务器的源</span></span><br><span class="line">        <span class="attr">rewrite</span>: <span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>) <span class="comment">// 重写路径，将 /api 替换为空</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;/socket.io&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;ws://localhost:8080&#x27;</span>,</span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span> <span class="comment">// 针对 WebSocket</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="2-11-7-server-hmr"><a href="#2-11-7-server-hmr" class="headerlink" title="2.11.7 server.hmr"></a>2.11.7 <code>server.hmr</code></h4><ul>
<li><strong>类型</strong>：<code>boolean | HmrOptions</code></li>
<li><strong>默认值</strong>：<code>true</code></li>
<li><strong>描述</strong>：配置 WebSocket 服务器。如果需要，可以禁用 HMR 或配置 HMR 的连接选项。</li>
</ul>
<h4 id="2-11-8-server-cors"><a href="#2-11-8-server-cors" class="headerlink" title="2.11.8 server.cors"></a>2.11.8 <code>server.cors</code></h4><ul>
<li><strong>类型</strong>：<code>boolean | CorsOptions</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：是否允许 CORS。设置为 <code>true</code> 会允许所有来源的请求。</li>
</ul>
<h3 id="2-12-build"><a href="#2-12-build" class="headerlink" title="2.12 build"></a>2.12 <code>build</code></h3><ul>
<li><strong>类型</strong>：<code>BuildOptions</code></li>
<li><strong>描述</strong>：配置生产构建。</li>
</ul>
<h4 id="2-12-1-build-target"><a href="#2-12-1-build-target" class="headerlink" title="2.12.1 build.target"></a>2.12.1 <code>build.target</code></h4><ul>
<li><strong>类型</strong>：<code>string | string[]</code></li>
<li><strong>默认值</strong>：<code>&#39;modules&#39;</code> (支持原生 ESM 的浏览器)</li>
<li><strong>描述</strong>：设置最终构建的浏览器兼容目标。<ul>
<li><code>&#39;es2015&#39;</code> 等 ES 版本：转译到指定 ES 版本。</li>
<li><code>[&#39;es2015&#39;, &#39;chrome58&#39;, &#39;ios10&#39;]</code>：多个目标。</li>
</ul>
</li>
</ul>
<h4 id="2-12-2-build-outDir"><a href="#2-12-2-build-outDir" class="headerlink" title="2.12.2 build.outDir"></a>2.12.2 <code>build.outDir</code></h4><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>&#39;dist&#39;</code></li>
<li><strong>描述</strong>：指定输出目录。</li>
</ul>
<h4 id="2-12-3-build-assetsDir"><a href="#2-12-3-build-assetsDir" class="headerlink" title="2.12.3 build.assetsDir"></a>2.12.3 <code>build.assetsDir</code></h4><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>&#39;assets&#39;</code></li>
<li><strong>描述</strong>：指定在 <code>outDir</code> 中的静态资源存放目录。</li>
</ul>
<h4 id="2-12-4-build-assetsInlineLimit"><a href="#2-12-4-build-assetsInlineLimit" class="headerlink" title="2.12.4 build.assetsInlineLimit"></a>2.12.4 <code>build.assetsInlineLimit</code></h4><ul>
<li><strong>类型</strong>：<code>number</code></li>
<li><strong>默认值</strong>：<code>4096</code> (4KB)</li>
<li><strong>描述</strong>：小于此阈值的导入或引用的资源将内联为 base64 编码。设置为 <code>0</code> 可以完全禁用内联。</li>
</ul>
<h4 id="2-12-5-build-cssCodeSplit"><a href="#2-12-5-build-cssCodeSplit" class="headerlink" title="2.12.5 build.cssCodeSplit"></a>2.12.5 <code>build.cssCodeSplit</code></h4><ul>
<li><strong>类型</strong>：<code>boolean</code></li>
<li><strong>默认值</strong>：<code>true</code></li>
<li><strong>描述</strong>：是否启用 CSS 代码分割。如果设置为 <code>false</code>，整个项目的 CSS 将被抽离到一个 CSS 文件中。</li>
</ul>
<h4 id="2-12-6-build-sourcemap"><a href="#2-12-6-build-sourcemap" class="headerlink" title="2.12.6 build.sourcemap"></a>2.12.6 <code>build.sourcemap</code></h4><ul>
<li><strong>类型</strong>：<code>boolean | &#39;inline&#39; | &#39;hidden&#39;</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：是否生成 Source Map 文件。<ul>
<li><code>true</code>：生成 Source Map。</li>
<li><code>&#39;inline&#39;</code>：Source Map 以 Data URI 的形式内联到输出文件中。</li>
<li><code>&#39;hidden&#39;</code>：生成 Source Map 但不在源文件中引用。</li>
</ul>
</li>
</ul>
<h4 id="2-12-7-build-minify"><a href="#2-12-7-build-minify" class="headerlink" title="2.12.7 build.minify"></a>2.12.7 <code>build.minify</code></h4><ul>
<li><strong>类型</strong>：<code>boolean | &#39;terser&#39; | &#39;esbuild&#39;</code></li>
<li><strong>默认值</strong>：<code>&#39;esbuild&#39;</code></li>
<li><strong>描述</strong>：指定使用哪种压缩器。<ul>
<li><code>&#39;terser&#39;</code>：使用 Terser 进行压缩，提供更多配置选项，但速度较慢。</li>
<li><code>&#39;esbuild&#39;</code>：使用 Esbuild 进行压缩，速度极快，但配置选项有限。</li>
<li><code>false</code>：禁用压缩。</li>
</ul>
</li>
</ul>
<h4 id="2-12-8-build-emptyOutDir"><a href="#2-12-8-build-emptyOutDir" class="headerlink" title="2.12.8 build.emptyOutDir"></a>2.12.8 <code>build.emptyOutDir</code></h4><ul>
<li><strong>类型</strong>：<code>boolean</code></li>
<li><strong>默认值</strong>：<code>true</code></li>
<li><strong>描述</strong>：在构建时清空 <code>outDir</code> 目录。</li>
</ul>
<h4 id="2-12-9-build-rollupOptions"><a href="#2-12-9-build-rollupOptions" class="headerlink" title="2.12.9 build.rollupOptions"></a>2.12.9 <code>build.rollupOptions</code></h4><ul>
<li><strong>类型</strong>：<code>rollup.RollupOptions</code></li>
<li><strong>描述</strong>：直接配置底层 Rollup 打包器的选项。提供了对打包过程更细粒度的控制，例如配置多个入口、高级代码分割等。<ul>
<li><strong>示例 (配置多入口)</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; resolve &#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">      <span class="attr">input</span>: &#123;</span><br><span class="line">        <span class="attr">main</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;index.html&#x27;</span>),</span><br><span class="line">        <span class="attr">admin</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;admin.html&#x27;</span>),</span><br><span class="line">        <span class="attr">nested</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;nested/index.html&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="2-13-preview"><a href="#2-13-preview" class="headerlink" title="2.13 preview"></a>2.13 <code>preview</code></h3><ul>
<li><strong>类型</strong>：<code>PreviewOptions</code></li>
<li><strong>描述</strong>：配置 <code>vite preview</code> 命令的行为，用于在本地预览生产构建的文件。<ul>
<li>选项与 <code>server</code> 类似，如 <code>preview.host</code>、<code>preview.port</code>、<code>preview.open</code> 等。</li>
</ul>
</li>
</ul>
<h3 id="2-14-optimizeDeps"><a href="#2-14-optimizeDeps" class="headerlink" title="2.14 optimizeDeps"></a>2.14 <code>optimizeDeps</code></h3><ul>
<li><strong>类型</strong>：<code>DepOptimizationOptions</code></li>
<li><strong>描述</strong>：配置依赖预构建行为。Vite 在开发服务器启动时会使用 Esbuild 对 <code>node_modules</code> 中的依赖进行预构建 (Pre-bundling)，将其转换为 ESM 格式，以加快浏览器加载速度并解决 CommonJS&#x2F;UMD 兼容性问题。</li>
</ul>
<h4 id="2-14-1-optimizeDeps-include"><a href="#2-14-1-optimizeDeps-include" class="headerlink" title="2.14.1 optimizeDeps.include"></a>2.14.1 <code>optimizeDeps.include</code></h4><ul>
<li><strong>类型</strong>：<code>string[]</code></li>
<li><strong>描述</strong>：强制包含在预构建中的依赖项。当某些库没有被自动检测到或需要手动优化时使用。<ul>
<li>例如：<code>[&#39;lodash&#39;]</code>。</li>
</ul>
</li>
</ul>
<h4 id="2-14-2-optimizeDeps-exclude"><a href="#2-14-2-optimizeDeps-exclude" class="headerlink" title="2.14.2 optimizeDeps.exclude"></a>2.14.2 <code>optimizeDeps.exclude</code></h4><ul>
<li><strong>类型</strong>：<code>string[]</code></li>
<li><strong>描述</strong>：从预构建中排除的依赖项。有时某些库不需要预构建或会引起问题。<ul>
<li>例如：<code>[&#39;my-problematic-library&#39;]</code>。</li>
</ul>
</li>
</ul>
<h2 id="三、环境变量"><a href="#三、环境变量" class="headerlink" title="三、环境变量"></a>三、环境变量</h2><p>Vite 通过 <code>import.meta.env</code> 暴露环境变量。</p>
<ul>
<li><code>import.meta.env.MODE</code>：当前模式 (<code>development</code> 或 <code>production</code>)。</li>
<li><code>import.meta.env.BASE_URL</code>：<code>base</code> 配置项的值。</li>
<li><code>import.meta.env.PROD</code>：是否是生产环境 (<code>boolean</code>)。</li>
<li><code>import.meta.env.DEV</code>：是否是开发环境 (<code>boolean</code>)。</li>
</ul>
<p>除了这些内置变量，你还可以通过 <code>envDir</code> 选项和 <code>.env</code> 文件来加载自定义环境变量。</p>
<h3 id="envDir"><a href="#envDir" class="headerlink" title="envDir"></a><code>envDir</code></h3><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>process.cwd()</code></li>
<li><strong>描述</strong>：加载 <code>.env</code> 文件的目录。</li>
</ul>
<h3 id="env-文件"><a href="#env-文件" class="headerlink" title=".env 文件"></a><code>.env</code> 文件</h3><p>Vite 会根据当前模式加载相应的 <code>.env</code> 文件：</p>
<ul>
<li><code>.env</code>：所有模式加载。</li>
<li><code>.env.local</code>：所有模式加载，但会被 <code>.gitignore</code> 忽略，适用于本地环境特定配置。</li>
<li><code>.env.[mode]</code>：特定模式加载 (例如 <code>.env.development</code>、<code>.env.production</code>)。</li>
<li><code>.env.[mode].local</code>：特定模式加载，且会被 <code>.gitignore</code> 忽略。</li>
</ul>
<p><strong>加载优先级 (从高到低)：</strong></p>
<ol>
<li><code>.env.[mode].local</code></li>
<li><code>.env.[mode]</code></li>
<li><code>.env.local</code></li>
<li><code>.env</code></li>
</ol>
<p><strong>注意：</strong> 只有以 <code>VITE_</code> 开头的自定义环境变量才会在客户端暴露。例如，在 <code>.env</code> 文件中定义 <code>VITE_APP_TITLE=My App</code>，然后在代码中可以通过 <code>import.meta.env.VITE_APP_TITLE</code> 访问。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .env.development</span></span><br><span class="line"><span class="variable constant_">VITE_APP_TITLE</span>=<span class="title class_">My</span> <span class="title class_">Dev</span> <span class="title class_">App</span></span><br><span class="line"><span class="variable constant_">VITE_API_BASE_URL</span>=/api_dev</span><br><span class="line"></span><br><span class="line"><span class="comment">// .env.production</span></span><br><span class="line"><span class="variable constant_">VITE_APP_TITLE</span>=<span class="title class_">My</span> <span class="title class_">Production</span> <span class="title class_">App</span></span><br><span class="line"><span class="variable constant_">VITE_API_BASE_URL</span>=/api_prod</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_APP_TITLE</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">DEV</span>); <span class="comment">// true in dev, false in prod</span></span><br></pre></td></tr></table></figure>

<h2 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h2><p>Vite 凭借其出色的性能和极佳的开发体验，已成为现代前端开发的主流构建工具之一。通过灵活的配置文件 <code>vite.config.ts</code>，开发者可以根据项目需求定制开发服务器、生产构建、模块解析、CSS 处理以及插件扩展等各个方面的行为。深入理解并合理配置这些选项，将能最大化地发挥 Vite 的优势，提升开发效率和应用性能。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/c85a04386656/">https://blog.tbf1211.xx.kg/c85a04386656/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/">项目构建</a><a class="post-meta__tags" href="/tags/TypeScript/">TypeScript</a><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a><a class="post-meta__tags" href="/tags/Vite/">Vite</a><a class="post-meta__tags" href="/tags/2024/">2024</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-02.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/eae983954311/" title="NAT (Network Address Translation) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-22.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">NAT (Network Address Translation) 详解</div></div><div class="info-2"><div class="info-item-1"> NAT (Network Address Translation，网络地址转换) 是一种在 IP 数据包通过路由器或防火墙时，修改其 IP 地址信息（有时也包括端口号）的技术。NAT 是 IPv4 时代的核心网络技术之一，它在缓解 IPv4 地址枯竭和提高内部网络安全性方面发挥了不可或缺的作用。  核心思想：NAT 允许一个拥有私有 IP 地址的内部网络通过一个或几个公共 IP 地址与外部网络（如互联网）通信，从而实现地址共享和隐藏内部拓扑。    一、NAT 的背景与重要性1.1 IPv4 地址枯竭原始的 IPv4 地址空间大约为 40 亿个地址。随着互联网和智能设备的普及，全球对 IP 地址的需求爆炸式增长，远超 IPv4 的设计容量。NAT 的出现使得多个设备可以共享一个公有 IP 地址，极大地延缓了 IPv4 地址耗尽的速度。 1.2 网络安全考量通过 NAT，内部网络的私有 IP 地址空间对外部网络是不可见的。外部攻击者无法直接访问内部主机，因为他们只看到 NAT 设备的公共 IP 地址。这为内部网络提供了一层基本的安全屏障。 1.3 灵活的网络设计NAT 允许企业和...</div></div></div></a><a class="pagination-related" href="/94cd78552baf/" title="MyBatis-Plus (MP) 详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-25.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">MyBatis-Plus (MP) 详解</div></div><div class="info-2"><div class="info-item-1"> MyBatis-Plus (MP) 是一个基于 MyBatis 的增强工具，它在 MyBatis 的基础上提供了许多便捷的功能，旨在简化开发、提高效率。MP 提供了无侵入式的特性，即它仅在 MyBatis 的基础上进行增强，不改变 MyBatis 原有的逻辑和配置，可以与 MyBatis 完全兼容。它的核心目标是少写代码，甚至不用写 SQL，即可完成大部分常见的 CRUD (创建、读取、更新、删除) 操作。  核心思想：MyBatis-Plus 通过提供通用的 CRUD 接口、强大的条件构造器、代码生成器以及一系列自动化功能，极大地减少了开发者在持久层的工作量，使得 MyBatis 更加易用，开发效率更高，同时保留了 MyBatis 对 SQL 的高度控制能力。    一、为什么需要 MyBatis-Plus？尽管 MyBatis 已经是一个非常优秀的持久层框架，解决了传统 JDBC 的许多痛点，但在实际开发中，仍然存在一些重复性劳动：  大量重复的 CRUD SQL：对于每个实体类，都需要编写大量的 insert, selectById, updateById, delete...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/f3d77a2d04c2/" title="TypeScript高级类型"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-02.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="info-item-2">TypeScript高级类型</div></div><div class="info-2"><div class="info-item-1"> TypeScript 高级类型 提供了强大的工具，允许开发者以更灵活、更精确的方式定义和操作类型。这些高级类型不仅增强了代码的类型安全性，还提升了开发体验，使得复杂的数据结构和业务逻辑能够更清晰地表达和维护。掌握 TypeScript 的这些高级特性，是成为一名高效 TypeScript 开发者的关键。  核心思想：高级类型允许我们基于现有类型进行转换、组合、提取，以及根据不同条件生成新类型，从而构建出更健壮、更具表达力的类型系统。   一、联合类型 (Union Types)联合类型表示一个值可以是多种类型中的任意一种。使用 | 符号连接不同的类型。 1.1 定义与使用1234567891011121314// 定义一个联合类型，表示一个变量可以是 string 或 numbertype StringOrNumber = string | number;let id: StringOrNumber;id = &quot;123&quot;; // OKid = 123;   // OK// id = true; // Error: Type &#x27;boolean&#x2...</div></div></div></a><a class="pagination-related" href="/c8105d5c8d5e/" title="Electron 开发详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-01.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-04</div><div class="info-item-2">Electron 开发详解</div></div><div class="info-2"><div class="info-item-1"> Electron (原名 Atom Shell) 是一个由 GitHub 开发的开源框架，它允许你使用 Web 技术 (HTML, CSS, JavaScript) 来构建跨平台的桌面应用程序。通过将 Chromium 渲染引擎和 Node.js 运行时集成到一个单一的项目中，Electron 使得前端开发者只需掌握一套技术栈，就能创建出功能强大、拥有原生外观和感觉的桌面应用，并能够访问操作系统底层功能。  核心思想：借助 Chromium (渲染视图) 和 Node.js (处理操作系统交互) 的能力，Electron 让 Web 技术栈能够构建全功能的跨平台桌面应用。   一、Electron 简介与优势1.1 什么是 Electron？Electron 可以被简单理解为一个微型浏览器套壳，它包含了：  Chromium：提供渲染用户界面的能力，这意味着你可以使用 HTML、CSS 和 JavaScript 来构建应用的 UI。 Node.js：提供访问操作系统底层 API 的能力，例如文件系统、网络、进程管理等。 原生 API 集成：Electron 提供了一套 API，...</div></div></div></a><a class="pagination-related" href="/31430f1f9376/" title="Go Modules(go mod)详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-14.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-11</div><div class="info-item-2">Go Modules(go mod)详解</div></div><div class="info-2"><div class="info-item-1"> Go Modules (Go Mod) 是 Go 语言自 Go 1.11 版本引入的官方包管理系统，并在 Go 1.13 版本后成为默认的依赖管理工具。它旨在解决之前 Go 生态系统中依赖管理混乱的问题，提供了一种简洁、可靠且支持版本控制的方式来管理 Go 项目的依赖。  核心思想：将项目代码与依赖项的版本管理解耦，不再强制依赖 $GOPATH，每个模块(项目)在自己的目录中独立管理依赖，并通过 go.mod 文件清晰定义所有直接和间接依赖及其精确版本。   一、为什么需要 Go Modules？在 Go Modules 出现之前，Go 语言的依赖管理主要围绕 $GOPATH 环境变量展开。这种方式存在一些显著问题：  全局 $GOPATH 污染：所有项目都共享 $GOPATH 下的依赖，不同项目对同一个依赖可能需要不同版本，导致版本冲突或需要技巧性地管理 $GOPATH。 非确定性构建：没有明确的依赖版本锁定机制，go get 命令总是获取依赖的最新版本，可能导致构建结果不一致。 对 $GOPATH 的严格依赖：项目必须放置在 $GOPATH/src 目录下，对项目结构造成限...</div></div></div></a><a class="pagination-related" href="/7cdd9f5b33c9/" title="前端项目工程化详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-23.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-17</div><div class="info-item-2">前端项目工程化详解</div></div><div class="info-2"><div class="info-item-1"> 随着前端应用的复杂度日益增加，单纯依靠人工管理和协作已经无法满足高效、高质量开发的需求。前端工程化应运而生，它旨在通过将软件工程的思想和方法引入前端开发，构建一套系统化、标准化、自动化、体系化的解决方案，以提高开发效率、保障代码质量、降低维护成本。  前端工程化的核心思想是：以自动化取代人力，以工具取代重复劳动，以规范约束散漫。   一、什么是前端工程化？前端工程化是构建、管理和维护前端项目的实践和工具集。它涵盖了从项目初始化、开发、构建、测试到部署的整个生命周期，目标是提升团队协作效率、统一代码风格、保证项目质量、优化产物性能以及实现快速迭代。 它不仅仅是使用几个构建工具，更是一种体系化的思维方式和工作流。 二、为什么需要前端工程化？在没有工程化的时代，前端开发面临诸多挑战：  开发效率低下：手动重复任务（如文件合并、压缩），环境搭建复杂。 代码质量参差不齐：缺乏统一的代码规范和质量检查机制，导致 Bug 增多，难以维护。 团队协作困难：不同成员的代码风格差异大，冲突频繁，交接成本高。 项目性能不佳：缺乏自动化优化手段（如图片压缩、按需加载），页面加载慢。 部署上线复杂：手动...</div></div></div></a><a class="pagination-related" href="/e4ac942e6528/" title="深入理解JavaScript原型链（Prototype Chain）"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-01.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-27</div><div class="info-item-2">深入理解JavaScript原型链（Prototype Chain）</div></div><div class="info-2"><div class="info-item-1"> JavaScript 的原型链 (Prototype Chain) 是其实现继承的核心机制，也是理解 JavaScript 面向对象编程的关键。与 C++ 或 Java 等传统面向对象语言通过类（class）来实现继承不同，JavaScript 是一种基于原型 (Prototype-based) 的语言。这意味着对象可以直接从其他对象继承属性和方法。  核心思想：每个 JavaScript 对象都有一个指向其原型 (prototype) 的内部链接。当访问一个对象的属性或方法时，如果该对象本身没有这个属性或方法，JavaScript 就会沿着这条链向上查找，直到找到该属性或方法，或者查找到原型链的末端（null）。   一、理解原型链的基石：[[Prototype]]、__proto__ 和 prototype在深入原型链之前，我们需要区分三个核心概念： 1.1 1. [[Prototype]] (隐式原型) 这是一个存在于每个 JavaScript 对象上的内部属性。 它指向该对象的原型对象。 它是真正构成原型链的链接。 在 ES5 之后，可以通过 Object.getPro...</div></div></div></a><a class="pagination-related" href="/544a32bf949e/" title="TypeScript泛型约束详解：精细化类型参数能力"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-32.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-28</div><div class="info-item-2">TypeScript泛型约束详解：精细化类型参数能力</div></div><div class="info-2"><div class="info-item-1"> TypeScript 泛型约束 (Generic Constraints) 是泛型机制中一个至关重要的概念。它允许我们限制泛型类型参数可以表示的类型范围。通过泛型约束，我们可以在泛型代码内部安全地访问泛型类型参数的特定属性或方法，从而编写出既通用又具备类型安全性的代码。  核心思想：泛型约束的本质是使用 extends 关键字来声明一个类型参数必须是某个特定类型或实现某个接口的子类型。这为编译器提供了足够的类型信息，使其能够在泛型函数、类或接口内部进行更精确的类型检查。   一、为什么需要泛型约束？在上一篇泛型详解中，我们了解到泛型允许我们编写处理任何类型的代码。但有时，我们希望泛型处理的类型具有某种共同的特性。 考虑一个场景：我们想编写一个函数，它接受一个列表，并返回列表中元素的长度之和。 问题示例： 12345678910111213function sumLengths&lt;T&gt;(items: T[]): number &#123;  let totalLength = 0;  for (let item of items) &#123;    // 报错: Pr...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">500</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">226</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">84</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Vite-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-text">一、Vite 配置文件的基本结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9%E8%AF%A6%E8%A7%A3"><span class="toc-text">二、核心配置选项详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-root"><span class="toc-text">2.1 root</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-base"><span class="toc-text">2.2 base</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-mode"><span class="toc-text">2.3 mode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-plugins"><span class="toc-text">2.4 plugins</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-publicDir"><span class="toc-text">2.5 publicDir</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-cacheDir"><span class="toc-text">2.6 cacheDir</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-resolve"><span class="toc-text">2.7 resolve</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-1-resolve-alias"><span class="toc-text">2.7.1 resolve.alias</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-2-resolve-dedupe"><span class="toc-text">2.7.2 resolve.dedupe</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-3-resolve-extensions"><span class="toc-text">2.7.3 resolve.extensions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-css"><span class="toc-text">2.8 css</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-1-css-preprocessorOptions"><span class="toc-text">2.8.1 css.preprocessorOptions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-2-css-modules"><span class="toc-text">2.8.2 css.modules</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-json"><span class="toc-text">2.9 json</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-9-1-json-namedExports"><span class="toc-text">2.9.1 json.namedExports</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-10-esbuild"><span class="toc-text">2.10 esbuild</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-10-1-esbuild-jsxFactory-esbuild-jsxFragment"><span class="toc-text">2.10.1 esbuild.jsxFactory &#x2F; esbuild.jsxFragment</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-11-server"><span class="toc-text">2.11 server</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-1-server-host"><span class="toc-text">2.11.1 server.host</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-2-server-port"><span class="toc-text">2.11.2 server.port</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-3-server-strictPort"><span class="toc-text">2.11.3 server.strictPort</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-4-server-https"><span class="toc-text">2.11.4 server.https</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-5-server-open"><span class="toc-text">2.11.5 server.open</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-6-server-proxy"><span class="toc-text">2.11.6 server.proxy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-7-server-hmr"><span class="toc-text">2.11.7 server.hmr</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-8-server-cors"><span class="toc-text">2.11.8 server.cors</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-12-build"><span class="toc-text">2.12 build</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-1-build-target"><span class="toc-text">2.12.1 build.target</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-2-build-outDir"><span class="toc-text">2.12.2 build.outDir</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-3-build-assetsDir"><span class="toc-text">2.12.3 build.assetsDir</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-4-build-assetsInlineLimit"><span class="toc-text">2.12.4 build.assetsInlineLimit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-5-build-cssCodeSplit"><span class="toc-text">2.12.5 build.cssCodeSplit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-6-build-sourcemap"><span class="toc-text">2.12.6 build.sourcemap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-7-build-minify"><span class="toc-text">2.12.7 build.minify</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-8-build-emptyOutDir"><span class="toc-text">2.12.8 build.emptyOutDir</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-9-build-rollupOptions"><span class="toc-text">2.12.9 build.rollupOptions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-13-preview"><span class="toc-text">2.13 preview</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-14-optimizeDeps"><span class="toc-text">2.14 optimizeDeps</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-14-1-optimizeDeps-include"><span class="toc-text">2.14.1 optimizeDeps.include</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-14-2-optimizeDeps-exclude"><span class="toc-text">2.14.2 optimizeDeps.exclude</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">三、环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#envDir"><span class="toc-text">envDir</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#env-%E6%96%87%E4%BB%B6"><span class="toc-text">.env 文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">四、总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/e62a1e8acade/" title="AI 辅助编程的关键要点与代码幻觉防范"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-19.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI 辅助编程的关键要点与代码幻觉防范"/></a><div class="content"><a class="title" href="/e62a1e8acade/" title="AI 辅助编程的关键要点与代码幻觉防范">AI 辅助编程的关键要点与代码幻觉防范</a><time datetime="2026-01-15T22:24:00.000Z" title="发表于 2026-01-16 06:24:00">2026-01-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/fa3d796f3333/" title="MessagePack 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MessagePack 详解"/></a><div class="content"><a class="title" href="/fa3d796f3333/" title="MessagePack 详解">MessagePack 详解</a><time datetime="2026-01-08T22:24:00.000Z" title="发表于 2026-01-09 06:24:00">2026-01-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/82bf00e3828f/" title="传统命令行工具的现代补强与替代方案详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="传统命令行工具的现代补强与替代方案详解"/></a><div class="content"><a class="title" href="/82bf00e3828f/" title="传统命令行工具的现代补强与替代方案详解">传统命令行工具的现代补强与替代方案详解</a><time datetime="2026-01-06T22:24:00.000Z" title="发表于 2026-01-07 06:24:00">2026-01-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cecf96486ef4/" title="IPC (Inter-Process Communication) 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-02.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IPC (Inter-Process Communication) 详解"/></a><div class="content"><a class="title" href="/cecf96486ef4/" title="IPC (Inter-Process Communication) 详解">IPC (Inter-Process Communication) 详解</a><time datetime="2026-01-04T22:24:00.000Z" title="发表于 2026-01-05 06:24:00">2026-01-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/3059cdc5f529/" title="Golang sqlc 框架详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-07.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Golang sqlc 框架详解"/></a><div class="content"><a class="title" href="/3059cdc5f529/" title="Golang sqlc 框架详解">Golang sqlc 框架详解</a><time datetime="2026-01-01T22:24:00.000Z" title="发表于 2026-01-02 06:24:00">2026-01-02</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-02.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/archives/2023/" target="_blank" title="🆕 2023">🆕 2023</a><a href="/archives/2024/" target="_blank" title="🆒 2024">🆒 2024</a><a href="/archives/2025/" target="_blank" title="👨‍👩‍👦 2025">👨‍👩‍👦 2025</a><a href="/archives/2026/" target="_blank" title="🆙 2026">🆙 2026</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="📁 分类">📁 分类</a><a href="/tags/" target="_blank" title="🔖 标签">🔖 标签</a><a href="/categories/" target="_blank" title="📽️ 时间线">📽️ 时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="💬 说说">💬 说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2026 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.7/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="ture"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      true
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.3"></script></div></div></body></html>