<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Go Modules(go mod)详解 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Go Modules 是 Go 语言官方推荐的依赖管理系统，自 Go 1.11 版本引入，并在 Go 1.13 版本中作为默认方案。它旨在解决 Go 语言在依赖管理方面存在的痛点，提供了一种更可靠、可重现且易于使用的模块化方式来组织和管理 Go 项目及其外部依赖。  “Go modules are the future of dependency management in Go.” —— Go">
<meta property="og:type" content="article">
<meta property="og:title" content="Go Modules(go mod)详解">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/2024/2024-10-11_Go%20Modules(go%20mod)%E8%AF%A6%E8%A7%A3/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="Go Modules 是 Go 语言官方推荐的依赖管理系统，自 Go 1.11 版本引入，并在 Go 1.13 版本中作为默认方案。它旨在解决 Go 语言在依赖管理方面存在的痛点，提供了一种更可靠、可重现且易于使用的模块化方式来组织和管理 Go 项目及其外部依赖。  “Go modules are the future of dependency management in Go.” —— Go">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-12.jpg">
<meta property="article:published_time" content="2024-10-10T22:24:00.000Z">
<meta property="article:modified_time" content="2025-11-11T10:11:47.359Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="项目构建">
<meta property="article:tag" content="Golang">
<meta property="article:tag" content="2024">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-12.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Go Modules(go mod)详解",
  "url": "https://blog.tbf1211.xx.kg/2024/2024-10-11_Go%20Modules(go%20mod)%E8%AF%A6%E8%A7%A3/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-12.jpg",
  "datePublished": "2024-10-10T22:24:00.000Z",
  "dateModified": "2025-11-11T10:11:47.359Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/2024/2024-10-11_Go%20Modules(go%20mod)%E8%AF%A6%E8%A7%A3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.4/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Go Modules(go mod)详解',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">248</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">182</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">62</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-12.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">Go Modules(go mod)详解</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/archives/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/archives/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Go Modules(go mod)详解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2024-10-10T22:24:00.000Z" title="发表于 2024-10-11 06:24:00">2024-10-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Golang/">Golang</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Golang/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/">项目构建</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="umamiPV" data-path="/2024/2024-10-11_Go%20Modules(go%20mod)%E8%AF%A6%E8%A7%A3/"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p>Go Modules 是 Go 语言官方推荐的依赖管理系统，自 Go 1.11 版本引入，并在 Go 1.13 版本中作为默认方案。它旨在解决 Go 语言在依赖管理方面存在的痛点，提供了一种更可靠、可重现且易于使用的模块化方式来组织和管理 Go 项目及其外部依赖。</p>
</blockquote>
<div class="note info flat"><p>“Go modules are the future of dependency management in Go.” —— Go 官方博客</p>
</div>
<hr>
<h2 id="一、为什么需要-Go-Modules？"><a href="#一、为什么需要-Go-Modules？" class="headerlink" title="一、为什么需要 Go Modules？"></a>一、为什么需要 Go Modules？</h2><p>在 Go Modules 之前，Go 语言的依赖管理主要面临以下挑战：</p>
<ol>
<li><strong><code>GOPATH</code> 痛点</strong>:<ul>
<li>所有项目必须放在 <code>GOPATH</code> 目录下。</li>
<li>所有项目共享同一份依赖库版本，导致不同项目可能需要不同版本的库，容易冲突。</li>
<li>对个人开发者而言，项目结构僵硬，跨项目共享代码不便。</li>
</ul>
</li>
<li><strong>社区工具碎片化</strong>:<ul>
<li>为了解决 <code>GOPATH</code> 问题，社区涌现了 <code>dep</code>、<code>glide</code>、<code>go-vendor</code> 等第三方依赖管理工具，但没有一个成为官方标准。</li>
<li>这些工具各有优缺点，增加了学习和使用的成本。</li>
</ul>
</li>
<li><strong>版本不确定性</strong>:<ul>
<li>在没有明确版本控制的情况下，<code>go get</code> 会拉取依赖库的最新版本，可能导致项目在不同时间点构建时使用不同版本的依赖，从而引入不可预测的 bug。</li>
<li>缺乏锁定依赖版本的机制。</li>
</ul>
</li>
</ol>
<p>Go Modules 旨在解决这些问题，提供一个集成在 Go 工具链中的、标准化的、语义化版本控制的（Semantic Versioning, SemVer）依赖管理方案。</p>
<h2 id="二、Go-Modules-核心文件"><a href="#二、Go-Modules-核心文件" class="headerlink" title="二、Go Modules 核心文件"></a>二、Go Modules 核心文件</h2><p>Go Modules 通过以下两个核心文件来管理依赖：</p>
<h3 id="1-go-mod-文件"><a href="#1-go-mod-文件" class="headerlink" title="1. go.mod 文件"></a>1. <code>go.mod</code> 文件</h3><p><code>go.mod</code> 文件定义了模块的路径、所需的依赖及其版本。它是 Go 模块的清单文件。</p>
<p><strong>主要内容</strong>:</p>
<ul>
<li><strong><code>module &lt;module_path&gt;</code></strong>: 声明当前模块的路径（即模块名），通常是项目在版本控制系统中的路径（例如 <code>github.com/my/project</code>）。</li>
<li><strong><code>go &lt;go_version&gt;</code></strong>: 指定当前模块使用的 Go 语言版本。</li>
<li><strong><code>require &lt;dependency_path&gt; &lt;version&gt;</code></strong>: 列出直接依赖的模块及其最低版本。<ul>
<li>版本号遵循语义化版本规范 (例如 <code>v1.2.3</code>, <code>v0.0.0-20200810183556-c73c88014e4b</code>)。</li>
<li>如果版本后缀是 <code>+incompatible</code>，表示该模块在 <code>v2</code> 或更高版本没有采用 Go Modules。</li>
</ul>
</li>
<li><strong><code>exclude &lt;dependency_path&gt; &lt;version&gt;</code></strong>: 排除某个特定版本的依赖，这在使用某些有问题的旧版本时非常有用。</li>
<li><strong><code>replace &lt;old_path&gt; &lt;version&gt; =&gt; &lt;new_path&gt; &lt;new_version&gt;</code></strong>: 替换某个依赖。<ul>
<li>常用于本地开发时，将远程依赖临时替换为本地文件路径 <code>replace example.com/foo =&gt; ../foo</code>。</li>
<li>也可用于修正模块路径或使用更高版本。</li>
</ul>
</li>
<li><strong><code>retract &lt;version_range&gt;</code></strong>: 撤回一个或多个有问题的版本。<code>go get</code> 将不再解析到这些版本。</li>
</ul>
<p><strong>示例 <code>go.mod</code> 文件</strong>:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module github.com/my/project</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.22</span></span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">	golang.org/x/text v0<span class="number">.3</span><span class="number">.8</span></span><br><span class="line">	github.com/gin-gonic/gin v1<span class="number">.9</span><span class="number">.1</span></span><br><span class="line">	<span class="comment">// indirect 标记表示这是一个间接依赖, 也就是你依赖的库所依赖的库</span></span><br><span class="line">	github.com/ugorji/<span class="keyword">go</span>/codec v1<span class="number">.2</span><span class="number">.11</span> <span class="comment">// indirect</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="2-go-sum-文件"><a href="#2-go-sum-文件" class="headerlink" title="2. go.sum 文件"></a>2. <code>go.sum</code> 文件</h3><p><code>go.sum</code> 文件存储了模块的加密校验和，用于验证下载的依赖文件是否被篡改。</p>
<p><strong>主要内容</strong>:</p>
<ul>
<li>每一行包含三个字段：模块路径、版本号和哈希值。</li>
<li>哈希值通常有两个：<code>h1:</code> 值用于校验模块 ZIP 文件的哈希，<code>go.mod</code> 哈希用于校验依赖模块的 <code>go.mod</code> 文件。</li>
<li><code>go.sum</code> 文件是自动生成的，并且你应该将其提交到版本控制系统中。</li>
</ul>
<p><strong>示例 <code>go.sum</code> 文件</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">github.com/bytedance/sonic v1.9.1/go.mod h1:3T2+s2i/2I+n0+Ew3w7R8+e5Xo+h/4m6+W2h9+e5Xo=</span><br><span class="line">github.com/chenzhuoyu/base64x v0.0.0-20230717121730-b179ae317e13 h1:X/J4y/6+L9z/0+Ew3w7R8+e5Xo+h/4m6+W2h9+e5Xo=</span><br><span class="line">github.com/cpuguy83/go-md2man/v2 v2.0.2/go.mod h1:9Xp9fWJ7Q2Q7Q7y/7+L9z/0+Ew3w7R8+e5Xo+h/4m6+W2h9+e5Xo=</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="三、Go-Modules-主要命令"><a href="#三、Go-Modules-主要命令" class="headerlink" title="三、Go Modules 主要命令"></a>三、Go Modules 主要命令</h2><h3 id="1-go-mod-init"><a href="#1-go-mod-init" class="headerlink" title="1. go mod init"></a>1. <code>go mod init</code></h3><p>在一个新项目的根目录下初始化一个 Go 模块。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> myproject</span><br><span class="line">go mod init [module_path]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：</span></span><br><span class="line"><span class="comment"># 如果当前目录是 ~/project/webapp</span></span><br><span class="line"><span class="comment"># go mod init github.com/youruser/webapp</span></span><br></pre></td></tr></table></figure>

<p>执行后会在当前目录下生成 <code>go.mod</code> 文件。</p>
<h3 id="2-go-mod-tidy"><a href="#2-go-mod-tidy" class="headerlink" title="2. go mod tidy"></a>2. <code>go mod tidy</code></h3><p>清理和同步 <code>go.mod</code> 文件。该命令会：</p>
<ul>
<li>移除不再使用的依赖块。</li>
<li>添加新的（直接或间接）依赖块。</li>
<li>更新 <code>go.sum</code> 文件，添加或移除相应的校验和。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod tidy</span><br></pre></td></tr></table></figure>
<p>这是一个非常常用的命令，推荐在修改导入路径后、或者在构建项目前经常运行。</p>
<h3 id="3-go-get"><a href="#3-go-get" class="headerlink" title="3. go get"></a>3. <code>go get</code></h3><p><code>go get</code> 命令现在主要用于添加、升级或降级依赖。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加一个新的依赖或更新到最新版本</span></span><br><span class="line">go get &lt;dependency_path&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加指定版本的依赖</span></span><br><span class="line">go get &lt;dependency_path&gt;@&lt;version&gt;</span><br><span class="line"><span class="comment"># 示例：go get github.com/gin-gonic/gin@v1.9.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加最新版本（或master分支的最新提交）</span></span><br><span class="line">go get &lt;dependency_path&gt;@latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除某个依赖 (go version &gt;= 1.16)</span></span><br><span class="line">go get &lt;dependency_path&gt;@none</span><br><span class="line"><span class="comment"># 或者手动从 go.mod 中删除 require 语句，然后运行 go mod tidy</span></span><br></pre></td></tr></table></figure>

<h3 id="4-go-mod-download"><a href="#4-go-mod-download" class="headerlink" title="4. go mod download"></a>4. <code>go mod download</code></h3><p>下载 <code>go.mod</code> 中列出的所有依赖到本地模块缓存 (<code>GOPATH/pkg/mod</code>)。对于离线构建很有用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod download</span><br></pre></td></tr></table></figure>

<h3 id="5-go-mod-vendor"><a href="#5-go-mod-vendor" class="headerlink" title="5. go mod vendor"></a>5. <code>go mod vendor</code></h3><p>将项目的所有依赖副本复制到项目根目录下的 <code>vendor</code> 目录中。在某些构建环境或私有网络中可能需要。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod vendor</span><br></pre></td></tr></table></figure>
<p>使用 <code>vendor</code> 目录后，构建时 Go 工具链会优先从 <code>vendor</code> 目录查找依赖。可以使用 <code>go build -mod=vendor</code> 强制使用 <code>vendor</code> 模式。</p>
<h3 id="6-go-mod-verify"><a href="#6-go-mod-verify" class="headerlink" title="6. go mod verify"></a>6. <code>go mod verify</code></h3><p>验证 <code>go.sum</code> 文件中记录的所有模块内容是否与下载的模块哈希值匹配。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod verify</span><br></pre></td></tr></table></figure>

<h3 id="7-go-mod-graph"><a href="#7-go-mod-graph" class="headerlink" title="7. go mod graph"></a>7. <code>go mod graph</code></h3><p>打印模块依赖图，显示所有直接和间接依赖。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod graph</span><br></pre></td></tr></table></figure>

<h3 id="8-go-mod-edit"><a href="#8-go-mod-edit" class="headerlink" title="8. go mod edit"></a>8. <code>go mod edit</code></h3><p>用于编辑 <code>go.mod</code> 文件，通常是在脚本中使用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加一个 require 语句</span></span><br><span class="line">go mod edit -require=example.com/foo@v1.2.3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加一个 replace 语句</span></span><br><span class="line">go mod edit -replace=example.com/foo=./foo-local</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 go.mod 文件的 JSON 格式</span></span><br><span class="line">go mod edit -json</span><br></pre></td></tr></table></figure>

<h2 id="四、Go-Modules-环境配置"><a href="#四、Go-Modules-环境配置" class="headerlink" title="四、Go Modules 环境配置"></a>四、Go Modules 环境配置</h2><h3 id="1-GO111MODULE-环境变量"><a href="#1-GO111MODULE-环境变量" class="headerlink" title="1. GO111MODULE 环境变量"></a>1. <code>GO111MODULE</code> 环境变量</h3><p>控制 Go Modules 的开关。</p>
<ul>
<li><code>GO111MODULE=on</code>: 强制使用 Go Modules。推荐使用。</li>
<li><code>GO111MODULE=off</code>: 禁用 Go Modules，回到 <code>GOPATH</code> 模式。</li>
<li><code>GO111MODULE=auto</code>: 默认值 (Go 1.11, 1.12)。如果在 <code>GOPATH</code> 之外，并且目录下存在 <code>go.mod</code> 文件，则启用 Go Modules；否则禁用。Go 1.13+ 版本中，如果存在 <code>go.mod</code> 文件，则默认启用 <code>on</code>。</li>
</ul>
<p><strong>强烈建议将其设置为 <code>on</code>，并在 Go 1.16 以后版本不再需要手动设置，所有项目都默认使用 Go Modules。</strong></p>
<h3 id="2-GOPROXY-环境变量"><a href="#2-GOPROXY-环境变量" class="headerlink" title="2. GOPROXY 环境变量"></a>2. <code>GOPROXY</code> 环境变量</h3><p>Go 模块代理，用于加速下载依赖模块，并提高依赖的稳定性。</p>
<ul>
<li>默认值: <code>https://proxy.golang.org,direct</code></li>
<li>可以配置多个代理，用逗号分隔。<code>direct</code> 表示直接从源站下载。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置为阿里云 Go 模块代理</span></span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://mirrors.aliyun.com/goproxy/,direct</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置为七牛云 Go 模块代理</span></span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://goproxy.cn,direct</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以设置多个代理</span></span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://mirrors.aliyun.com/goproxy/,https://goproxy.io,direct</span><br></pre></td></tr></table></figure>

<h3 id="3-GONOPROXY-和-GOSUMDB"><a href="#3-GONOPROXY-和-GOSUMDB" class="headerlink" title="3. GONOPROXY 和 GOSUMDB"></a>3. <code>GONOPROXY</code> 和 <code>GOSUMDB</code></h3><ul>
<li><code>GONOPROXY</code>: 用于指定不应该使用代理下载的模块路径列表，例如私有仓库的模块。这些模块将直接从源站下载。</li>
<li><code>GOSUMDB</code>: 用于校验模块哈希值的数据库，防止模块被篡改。默认是 <code>sum.golang.org</code>。如果 <code>GOPROXY</code> 设置为私有代理，可能需要调整此项。</li>
</ul>
<h2 id="五、Go-Modules-的优势"><a href="#五、Go-Modules-的优势" class="headerlink" title="五、Go Modules 的优势"></a>五、Go Modules 的优势</h2><ol>
<li><strong>脱离 GOPATH</strong>: 项目可以放置在文件系统的任何位置。</li>
<li><strong>版本锁定</strong>: <code>go.mod</code> 和 <code>go.sum</code> 确保了依赖版本的确定性，使得项目可以被可靠地构建。</li>
<li><strong>语义化版本控制</strong>: 支持 <code>vX.Y.Z</code> 规范，模块升级更可控。</li>
<li><strong>模块隔离</strong>: 不同项目可以依赖同一库的不同版本而不会相互冲突。</li>
<li><strong>官方支持</strong>: 作为 Go 语言的官方解决方案，拥有更好的兼容性和长期维护。</li>
<li><strong>更清晰的依赖图</strong>: <code>go mod graph</code> 等命令提供了对项目依赖的清晰视图。</li>
</ol>
<h2 id="六、Go-Modules-最佳实践"><a href="#六、Go-Modules-最佳实践" class="headerlink" title="六、Go Modules 最佳实践"></a>六、Go Modules 最佳实践</h2><ol>
<li><strong>尽早初始化</strong>: 在项目创建之初就运行 <code>go mod init</code>。</li>
<li><strong>提交 <code>go.mod</code> 和 <code>go.sum</code></strong>: 务必将这两个文件提交到你的版本控制系统（如 Git）。它们定义了项目的可重复构建性。</li>
<li><strong><code>go mod tidy</code> 常用</strong>: 在添加、删除或修改导入路径后，或者在解决依赖问题时，经常运行 <code>go mod tidy</code>。</li>
<li><strong>使用 <code>GOPROXY</code></strong>: 配置一个可靠的 Go 模块代理可以显著提高构建效率和稳定性，尤其是在网络环境不佳时。</li>
<li><strong>避免手动修改 <code>go.sum</code></strong>: <code>go.sum</code> 文件应由 Go 工具链自动管理。手动修改可能导致校验失败。</li>
<li><strong><code>replace</code> 仅用于开发</strong>: 除非有特殊需求，<code>replace</code> 语句通常只用于本地开发或测试时临时替换依赖。在提交代码到共享仓库之前，尽量避免或移除开发用的 <code>replace</code> 语句。</li>
<li><strong>理解 <code>indirect</code> 依赖</strong>: <code>go.mod</code> 文件中带有 <code>// indirect</code> 注释的 <code>require</code> 语句表示这些是间接依赖 (即你的直接依赖所依赖的库)。它们的存在有助于模块图的完整性。</li>
</ol>
<h2 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h2><p>Go Modules 彻底改变了 Go 语言的依赖管理方式，使其变得更加现代、健壮和用户友好。通过 <code>go.mod</code> 和 <code>go.sum</code> 文件，Go 项目能够准确地定义和锁定其所有依赖，确保了构建的可重复性，并提供了更好的模块隔离和版本控制。掌握 <code>go mod</code> 命令和理解其工作原理，是每个 Go 开发者必备的技能。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/2024/2024-10-11_Go%20Modules(go%20mod)%E8%AF%A6%E8%A7%A3/">https://blog.tbf1211.xx.kg/2024/2024-10-11_Go%20Modules(go%20mod)%E8%AF%A6%E8%A7%A3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/">项目构建</a><a class="post-meta__tags" href="/tags/Golang/">Golang</a><a class="post-meta__tags" href="/tags/2024/">2024</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-12.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/2024-10-18_CDN%20(%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C)%20%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/" title="CDN (内容分发网络) 服务详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-07.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">CDN (内容分发网络) 服务详解</div></div><div class="info-2"><div class="info-item-1"> CDN (Content Delivery Network)，即内容分发网络，是一种构建在现有网络基础之上的智能虚拟网络。它通过将站点内容发布到离用户最近的全球边缘节点，使用户在请求内容时，能够从距离自己最近的服务器获取数据，从而显著加速内容传输、减轻源站负载、提高用户体验和保障服务可用性。  核心思想：将内容缓存到离用户近的地方，让用户就近获取，缩短物理距离，从而缩短加载时间。   一、为什么需要 CDN？在没有 CDN 的情况下，用户访问网站的所有请求都会直接发送到源服务器。这存在几个问题：  访问速度慢：当用户与源服务器之间地理距离较远时，数据传输路径长，网络延迟高，导致页面加载缓慢，尤其是对于图片、视频等大文件。 网络拥堵：跨国或跨洲际网络传输容易受到骨干网带宽限制和拥堵的影响。 源站负载高：所有用户的请求都直接冲击源服务器，在高并发场景下可能导致源服务器过载、响应变慢甚至崩溃。 单点故障风险：源服务器一旦出现故障或遭受攻击，整个网站将无法访问。 安全性弱：源站直接暴露在公网，容易成为 DDoS 攻击的目标。  CDN 旨在解决上述问题，提供以下核心价值：  加速访问：...</div></div></div></a><a class="pagination-related" href="/2024/2024-10-09_%E8%9B%80%E7%89%99%EF%BC%88%E9%BE%8B%E9%BD%BF%EF%BC%89%E8%AF%A6%E8%A7%A3/" title="蛀牙（龋齿）详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-16.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">蛀牙（龋齿）详解</div></div><div class="info-2"><div class="info-item-1"> 蛀牙，医学上称为龋齿 (Dental Caries)，是口腔中一种常见的慢性细菌性疾病。它指的是牙齿的硬组织（牙釉质、牙本质和牙骨质）在多种因素（主要是细菌产酸）的长期作用下，逐渐发生脱矿（矿物质流失）和有机质分解，最终形成龋洞的过程。蛀牙是全球范围内最普遍的健康问题之一，影响着几乎所有年龄段的人群。  核心思想：蛀牙是口腔细菌利用食物中的糖产酸，腐蚀牙齿硬组织，导致牙齿结构破坏形成龋洞的过程。这是一个从可逆到不可逆的渐进性疾病。   一、蛀牙的形成机制 (四大要素)蛀牙的发生是一个复杂的过程，通常认为由以下四个主要因素共同作用：  宿主 (Host) - 牙齿：  牙齿结构：牙釉质的完整性、牙齿的形态（如磨牙窝沟深而窄）、牙齿排列不齐等都可能增加食物残渣滞留和清洁的难度，从而更容易发生蛀牙。 牙齿成分：氟化物能增强牙釉质的抗酸能力，因此缺氟会增加蛀牙风险。 唾液：唾液的量、流速、成分（如缓冲能力、抗菌物质）对口腔环境有重要影响。唾液分泌减少（口干症）会显著增加蛀牙风险，因为唾液能冲刷食物残渣、中和酸、提供再矿化所需的离子。   细菌 (Bacteria)：  口腔中存在大量细...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/2024-01-26_Vite%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%EF%BC%9A%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/" title="Vite配置详解：从入门到精通"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-11.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-26</div><div class="info-item-2">Vite配置详解：从入门到精通</div></div><div class="info-2"><div class="info-item-1"> Vite 是一款由 Vue.js 创始人尤雨溪开发的现代前端构建工具。它旨在通过原生 ES 模块提供极速的开发体验，并在生产环境中利用 Rollup 进行高效打包。Vite 的配置非常灵活，可以通过 vite.config.js（或 .ts）文件进行全面定制。  “Vite 的配置就是对 vite.config.js 文件中导出的配置对象进行操作。这个配置文件提供了对开发服务器、构建过程、插件、别名等一切的控制。”   一、Vite 配置文件的位置与类型 文件名：通常是 vite.config.js、vite.config.ts、vite.config.mjs 或 vite.config.cjs。建议使用 .ts 文件以获得更好的类型提示。 位置：通常位于项目根目录。  1.1 基本结构Vite 配置文件默认导出一个配置对象。这个对象可以使用 defineConfig 辅助函数包裹，以获得更好的类型提示。 123456789101112131415// vite.config.tsimport &#123; defineConfig &#125; from &#x27;vite...</div></div></div></a><a class="pagination-related" href="/2025/2025-01-12_Go%E8%AF%AD%E8%A8%80embed%E5%8C%85%E8%AF%A6%E8%A7%A3/" title="Go语言embed包详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-32.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-12</div><div class="info-item-2">Go语言embed包详解</div></div><div class="info-2"><div class="info-item-1"> Go 1.16 版本引入了 embed 包，它提供了一种将静态资源（如HTML、CSS、JavaScript、图片、配置文件等）直接嵌入 (embed) 到 Go 程序二进制文件中的功能。这极大地简化了应用程序的部署流程，尤其是对于需要捆绑前端资源或配置文件的后端服务。  “The embed package provides access to files embedded in the program during compilation.” —— Go embed 官方文档   一、为什么需要 embed 包？在 embed 包出现之前，Go 应用程序通常需要通过以下方式处理静态资源：  文件系统访问: 在运行时从文件系统加载资源。这意味着在部署时，除了可执行文件，还需要打包额外的资源文件。 go:generate 工具: 使用第三方工具（如 go-bindata、statik 等）将资源文件转换为 Go 源代码文件，然后在运行时加载这些生成的 Go 文件。这种方法引入了额外的构建步骤和依赖。  embed 包的出现，解决了上述痛点：  单一二进制文件: 应用程序和所有静...</div></div></div></a><a class="pagination-related" href="/2024/2024-07-12_Go%E8%AF%AD%E8%A8%80%E5%A4%9A%E9%87%8D%E8%B5%8B%E5%80%BC(Multiple%20Assignment)%E8%AF%A6%E8%A7%A3/" title="Go语言多重赋值(Multiple Assignment)详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-21.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-12</div><div class="info-item-2">Go语言多重赋值(Multiple Assignment)详解</div></div><div class="info-2"><div class="info-item-1"> Go 语言的“多重赋值”（Multiple Assignment）是其语言特性中一个非常简洁且强大的功能。它允许你在一个语句中同时给多个变量赋值。这不仅仅是一种语法糖，更是 Go 语言在设计上强调简洁性和实用性的体现，尤其在错误处理、函数返回多个值等方面发挥着核心作用。  核心思想：Go 语言的多重赋值允许在单条语句中同时为多个变量赋值，其核心机制是先评估右侧所有表达式，然后按顺序赋给左侧变量，常用于函数多返回值（尤其是错误处理）、交换变量、接收通道值等场景。   一、多重赋值的基本语法多重赋值的通用格式如下： 1var1, var2, ..., varN = expr1, expr2, ..., exprN  或者使用短变量声明： 1var1, var2, ..., varN := expr1, expr2, ..., exprN  关键点：  左侧 (LHS)：一系列变量名，用逗号 , 分隔。 右侧 (RHS)：一系列表达式，用逗号 , 分隔。 数量匹配：左侧变量的数量必须与右侧表达式值的数量严格匹配。 类型匹配：每个变量的类型必须与对应表达式的值的类型兼容。 求值顺序：右...</div></div></div></a><a class="pagination-related" href="/2024/2024-09-02_GoLang%20gRPC%20%E8%AF%A6%E8%A7%A3%EF%BC%9A%E6%9E%84%E5%BB%BA%E9%AB%98%E6%80%A7%E8%83%BD%E3%80%81%E8%B7%A8%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1/" title="GoLang gRPC 详解：构建高性能、跨语言的微服务"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-29.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-02</div><div class="info-item-2">GoLang gRPC 详解：构建高性能、跨语言的微服务</div></div><div class="info-2"><div class="info-item-1"> Golang (Go) 因其并发特性、高效的运行时和优秀的网络编程能力，成为开发高性能后端服务，特别是微服务和 RPC 服务的热门选择。gRPC 作为 Google 主导的 RPC 框架，与 Go 语言有着天然的契合。本文将详细介绍如何使用 Go 语言开发 gRPC 项目，包括环境搭建、.proto 文件定义、代码生成、客户端与服务器实现，以及高级特性。  前置条件： 读者需要对 Go 语言有基本的了解，并已安装 Go 开发环境。   一、环境准备在开始 Go gRPC 项目开发之前，需要安装以下工具：  Go 语言环境：确保 Go 已正确安装，并配置好 GOPATH 和 GOROOT。1go version Protobuf 编译器 (protoc)：用于将 .proto 文件编译成 Go 代码。 下载地址：Protocol Buffers GitHub Releases 根据操作系统下载对应版本，解压后将 bin 目录添加到系统 PATH 环境变量中。 验证安装：1protoc --version   Go gRPC 插件：用于 protoc 生成 Go 语言的 gRPC ...</div></div></div></a><a class="pagination-related" href="/2024/2024-11-25_Go%E8%AF%AD%E8%A8%80%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90/" title="Go语言排序算法解析"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-20.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-25</div><div class="info-item-2">Go语言排序算法解析</div></div><div class="info-2"><div class="info-item-1"> 排序 (Sorting) 是计算机科学中最基础且最重要的算法之一，其目标是将一组数据按照特定的顺序排列。Go 语言作为一门现代编程语言，提供了强大而灵活的排序机制，既包括内置的标准库 sort 包，也允许用户通过实现特定接口来自定义排序逻辑。理解 Go 语言的排序方式，对于编写高效、可维护的代码至关重要。  核心思想：Go 语言的 sort 包提供了一种通用的排序接口和多种高效的排序算法实现。无论是对基本类型切片还是自定义结构体切片进行排序，都可以通过简单地实现 sort.Interface 接口来完成，而无需关心底层具体的排序算法。   一、Go 语言标准库 sort 包Go 语言的标准库 sort 包是进行排序操作的首选。它提供了一套通用的接口和高效的排序函数。 1.1 1. sort.Interface 接口sort 包的核心是 sort.Interface 接口。任何实现了这个接口的类型都可以使用 sort 包提供的排序函数。sort.Interface 接口定义了三个方法： 12345678type Interface interface &#123;    // L...</div></div></div></a><a class="pagination-related" href="/2025/2025-06-13_Go%E8%AF%AD%E8%A8%80%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AF%A6%E8%A7%A3/" title="Go语言常用设计模式详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-31.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-13</div><div class="info-item-2">Go语言常用设计模式详解</div></div><div class="info-2"><div class="info-item-1"> 设计模式是对在特定情境下，反复出现的问题提供一套成熟的、可复用的解决方案。Go 语言以其简洁、并发优先的特性，在实现设计模式时通常会有其独特的“Go 惯例”，有时会与传统面向对象设计模式的实现有所不同。本篇将探讨 Go 语言中常用的设计模式，并结合 Go 的特性给出实现示例。  核心思想：Go 语言的设计模式实现通常倾向于简洁、组合而非继承、接口优先以及利用 Goroutine 和 Channel 进行并发处理。   一、Go 语言与设计模式的哲学Go 语言在设计模式的实践上，有一些与传统 OOP 语言不同的哲学：  组合优于继承：Go 没有类继承的概念，而是通过结构体嵌入（Composition）和接口（Interfaces）来实现代码复用和多态。 接口优先：Go 的接口是隐式实现的（implicit interface satisfaction），任何类型只要实现了接口定义的所有方法，就自然地实现了该接口。这使得接口更加灵活，鼓励“小接口，大组合”的原则。 并发原语：Goroutine 和 Channel 是 Go 语言的核心并发原语，许多设计模式在 Go 中会自然融入并发...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">248</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">182</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">62</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-Go-Modules%EF%BC%9F"><span class="toc-text">一、为什么需要 Go Modules？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Go-Modules-%E6%A0%B8%E5%BF%83%E6%96%87%E4%BB%B6"><span class="toc-text">二、Go Modules 核心文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-go-mod-%E6%96%87%E4%BB%B6"><span class="toc-text">1. go.mod 文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-go-sum-%E6%96%87%E4%BB%B6"><span class="toc-text">2. go.sum 文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Go-Modules-%E4%B8%BB%E8%A6%81%E5%91%BD%E4%BB%A4"><span class="toc-text">三、Go Modules 主要命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-go-mod-init"><span class="toc-text">1. go mod init</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-go-mod-tidy"><span class="toc-text">2. go mod tidy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-go-get"><span class="toc-text">3. go get</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-go-mod-download"><span class="toc-text">4. go mod download</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-go-mod-vendor"><span class="toc-text">5. go mod vendor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-go-mod-verify"><span class="toc-text">6. go mod verify</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-go-mod-graph"><span class="toc-text">7. go mod graph</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-go-mod-edit"><span class="toc-text">8. go mod edit</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Go-Modules-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-text">四、Go Modules 环境配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-GO111MODULE-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">1. GO111MODULE 环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-GOPROXY-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">2. GOPROXY 环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-GONOPROXY-%E5%92%8C-GOSUMDB"><span class="toc-text">3. GONOPROXY 和 GOSUMDB</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81Go-Modules-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-text">五、Go Modules 的优势</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81Go-Modules-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">六、Go Modules 最佳实践</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">七、总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-11-01_Ubuntu%20UFW%20(Uncomplicated%20Firewall)%20%E8%AF%A6%E8%A7%A3/" title="Ubuntu UFW (Uncomplicated Firewall) 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ubuntu UFW (Uncomplicated Firewall) 详解"/></a><div class="content"><a class="title" href="/2025/2025-11-01_Ubuntu%20UFW%20(Uncomplicated%20Firewall)%20%E8%AF%A6%E8%A7%A3/" title="Ubuntu UFW (Uncomplicated Firewall) 详解">Ubuntu UFW (Uncomplicated Firewall) 详解</a><time datetime="2025-10-31T22:24:00.000Z" title="发表于 2025-11-01 06:24:00">2025-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-10-28_nftables%20%E8%AF%A6%E8%A7%A3/" title="nftables 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-17.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nftables 详解"/></a><div class="content"><a class="title" href="/2025/2025-10-28_nftables%20%E8%AF%A6%E8%A7%A3/" title="nftables 详解">nftables 详解</a><time datetime="2025-10-27T22:24:00.000Z" title="发表于 2025-10-28 06:24:00">2025-10-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-10-25_iptables%20%E8%AF%A6%E8%A7%A3/" title="iptables 详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-04.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="iptables 详解"/></a><div class="content"><a class="title" href="/2025/2025-10-25_iptables%20%E8%AF%A6%E8%A7%A3/" title="iptables 详解">iptables 详解</a><time datetime="2025-10-24T22:24:00.000Z" title="发表于 2025-10-25 06:24:00">2025-10-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-10-23_Go%E8%AF%AD%E8%A8%80%E5%B9%B6%E5%8F%91%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AF%A6%E8%A7%A3/" title="Go语言并发与并行详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-31.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go语言并发与并行详解"/></a><div class="content"><a class="title" href="/2025/2025-10-23_Go%E8%AF%AD%E8%A8%80%E5%B9%B6%E5%8F%91%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AF%A6%E8%A7%A3/" title="Go语言并发与并行详解">Go语言并发与并行详解</a><time datetime="2025-10-22T22:24:00.000Z" title="发表于 2025-10-23 06:24:00">2025-10-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-10-16_%E5%B8%B8%E7%94%A8%E9%99%90%E6%B5%81%E7%AE%97%E6%B3%95%E7%9A%84Go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E8%AF%A6%E8%A7%A3/" title="常用限流算法的Go语言实现详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-01.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常用限流算法的Go语言实现详解"/></a><div class="content"><a class="title" href="/2025/2025-10-16_%E5%B8%B8%E7%94%A8%E9%99%90%E6%B5%81%E7%AE%97%E6%B3%95%E7%9A%84Go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E8%AF%A6%E8%A7%A3/" title="常用限流算法的Go语言实现详解">常用限流算法的Go语言实现详解</a><time datetime="2025-10-15T22:24:00.000Z" title="发表于 2025-10-16 06:24:00">2025-10-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-12.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/archives/2023/" target="_blank" title="📌 2023">📌 2023</a><a href="/archives/2024/" target="_blank" title="❓ 2024">❓ 2024</a><a href="/archives/2025/" target="_blank" title="🚀 2025">🚀 2025</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="分类">分类</a><a href="/tags/" target="_blank" title="标签">标签</a><a href="/categories/" target="_blank" title="时间线">时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="说说">说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2021 - 2025 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.2"></script><script src="/js/main.js?v=5.5.2"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1.4/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.1/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="ture"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      true
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script>(() => {
  const option = null
  const config = {"site_uv":true,"site_pv":true,"page_pv":true,"token":"qTvz1SkmPDt785fgh6BpiA5qiFFIVUwxj8Ft+rPW+cdN59v1hXjwRgSmy0+ji9m+oLlcxvo2NfDSMa6epVl3NTlsN3ejCIwWeP8Y51aEJ0Sbem4UexGmJLspB7AkOBId2SdtT6QWEBlGmFIIQgchQ2zAKYxTmc/kpBED5aLSr+3uvmQ9/G7FJQeVFpveDkK0xM1hu36xq4a6/FSeROxtoEp5zabzTWiYTlLsQzIl/NlELnCq3nxK+oo/vl3UQo/oM/rae/gJX/MaVKsgIUCd2ABJogNkx2KTenBIBpbPki5FzOgPh6/z4GPa4HvhNO51DDVG1SEQZooqEYmt/gnybLBWFbN+7liZWw=="}

  const runTrack = () => {
    if (typeof umami !== 'undefined' && typeof umami.track === 'function') {
      umami.track(props => ({ ...props, url: window.location.pathname, title: GLOBAL_CONFIG_SITE.title }))
    } else {
      console.warn('Umami Analytics: umami.track is not available')
    }
  }

  const loadUmamiJS = () => {
    btf.getScript('https://umami.012700.xyz/script.js', {
      'data-website-id': '2a796d6c-6499-42d8-8eb4-d9a2930b0ff3',
      'data-auto-track': 'false',
      ...option
    }).then(() => {
      runTrack()
    }).catch(error => {
      console.error('Umami Analytics: Error loading script', error)
    })
  }

  const getData = async (isPost) => {
    try {
      const now = Date.now()
      const keyUrl = isPost ? `&url=${window.location.pathname}` : ''
      const headerList = { 'Accept': 'application/json' }

      if (true) {
        headerList['Authorization'] = `Bearer ${config.token}`
      } else {
        headerList['x-umami-api-key'] = config.token
      }

      const res = await fetch(`https://umami.012700.xyz/api/websites/2a796d6c-6499-42d8-8eb4-d9a2930b0ff3/stats?startAt=0000000000&endAt=${now}${keyUrl}`, {
        method: "GET",
        headers: headerList
      })

      if (!res.ok) {
        throw new Error(`HTTP error! status: ${res.status}`)
      }

      return await res.json()
    } catch (error) {
      console.error('Umami Analytics: Failed to fetch data', error)
      throw error
    }
  }

  const insertData = async () => {
    try {
      if (GLOBAL_CONFIG_SITE.pageType === 'post' && config.page_pv) {
        const pagePV = document.getElementById('umamiPV')
        if (pagePV) {
          const data = await getData(true)
          if (data && data.pageviews && typeof data.pageviews.value !== 'undefined') {
            pagePV.textContent = data.pageviews.value
          } else {
            console.warn('Umami Analytics: Invalid page view data received')
          }
        }
      }

      if (config.site_uv || config.site_pv) {
        const data = await getData(false)

        if (config.site_uv) {
          const siteUV = document.getElementById('umami-site-uv')
          if (siteUV && data && data.visitors && typeof data.visitors.value !== 'undefined') {
            siteUV.textContent = data.visitors.value
          } else if (siteUV) {
            console.warn('Umami Analytics: Invalid site UV data received')
          }
        }

        if (config.site_pv) {
          const sitePV = document.getElementById('umami-site-pv')
          if (sitePV && data && data.pageviews && typeof data.pageviews.value !== 'undefined') {
            sitePV.textContent = data.pageviews.value
          } else if (sitePV) {
            console.warn('Umami Analytics: Invalid site PV data received')
          }
        }
      }
    } catch (error) {
      console.error('Umami Analytics: Failed to insert data', error)
    }
  }

  btf.addGlobalFn('pjaxComplete', runTrack, 'umami_analytics_run_track')
  btf.addGlobalFn('pjaxComplete', insertData, 'umami_analytics_insert')


  loadUmamiJS()

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', insertData)
  } else {
    setTimeout(insertData, 100)
  }
})()</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.2"></script></div></div></body></html>