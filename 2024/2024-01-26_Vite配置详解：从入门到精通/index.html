<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Vite配置详解：从入门到精通 | 1024 维度</title><meta name="author" content="TeaTang"><meta name="copyright" content="TeaTang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Vite 是一款由 Vue.js 创始人尤雨溪开发的现代前端构建工具。它旨在通过原生 ES 模块提供极速的开发体验，并在生产环境中利用 Rollup 进行高效打包。Vite 的配置非常灵活，可以通过 vite.config.js（或 .ts）文件进行全面定制。  “Vite 的配置就是对 vite.config.js 文件中导出的配置对象进行操作。这个配置文件提供了对开发服务器、构建过程、插件、">
<meta property="og:type" content="article">
<meta property="og:title" content="Vite配置详解：从入门到精通">
<meta property="og:url" content="https://blog.tbf1211.xx.kg/2024/2024-01-26_Vite%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%EF%BC%9A%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/index.html">
<meta property="og:site_name" content="1024 维度">
<meta property="og:description" content="Vite 是一款由 Vue.js 创始人尤雨溪开发的现代前端构建工具。它旨在通过原生 ES 模块提供极速的开发体验，并在生产环境中利用 Rollup 进行高效打包。Vite 的配置非常灵活，可以通过 vite.config.js（或 .ts）文件进行全面定制。  “Vite 的配置就是对 vite.config.js 文件中导出的配置对象进行操作。这个配置文件提供了对开发服务器、构建过程、插件、">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-20.jpg">
<meta property="article:published_time" content="2024-01-25T22:24:00.000Z">
<meta property="article:modified_time" content="2025-10-15T15:15:30.515Z">
<meta property="article:author" content="TeaTang">
<meta property="article:tag" content="TypeScript">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="项目构建">
<meta property="article:tag" content="2024">
<meta property="article:tag" content="Vite">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.tbf1211.xx.kg/img/cover/default_cover-20.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Vite配置详解：从入门到精通",
  "url": "https://blog.tbf1211.xx.kg/2024/2024-01-26_Vite%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%EF%BC%9A%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/",
  "image": "https://blog.tbf1211.xx.kg/img/cover/default_cover-20.jpg",
  "datePublished": "2024-01-25T22:24:00.000Z",
  "dateModified": "2025-10-15T15:15:30.515Z",
  "author": [
    {
      "@type": "Person",
      "name": "TeaTang",
      "url": "https://blog.tbf1211.xx.kg"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon-1.ico"><link rel="canonical" href="https://blog.tbf1211.xx.kg/2024/2024-01-26_Vite%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%EF%BC%9A%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":true,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: TeaTang","link":"链接: ","source":"来源: 1024 维度","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vite配置详解：从入门到精通',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="1024 维度" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">138</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">137</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">52</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tags/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/tags/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/tags/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cover/default_cover-20.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">1024 维度</span></a><a class="nav-page-title" href="/"><span class="site-name">Vite配置详解：从入门到精通</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 我的轨迹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tags/2023/"><i class="fa-fw fa-solid fa-bug"></i><span> 2023</span></a></li><li><a class="site-page child" href="/tags/2024/"><i class="fa-fw fa-solid fa-code"></i><span> 2024</span></a></li><li><a class="site-page child" href="/tags/2025/"><i class="fa-fw fa-solid fa-network-wired"></i><span> 2025</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Vite配置详解：从入门到精通</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2024-01-25T22:24:00.000Z" title="发表于 2024-01-26 06:24:00">2024-01-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/">前端技术</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/">项目构建</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>11分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="umamiPV" data-path="/2024/2024-01-26_Vite%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%EF%BC%9A%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><strong>Vite</strong> 是一款由 Vue.js 创始人尤雨溪开发的现代前端构建工具。它旨在通过<strong>原生 ES 模块</strong>提供极速的开发体验，并在生产环境中利用 <strong>Rollup</strong> 进行高效打包。Vite 的配置非常灵活，可以通过 <code>vite.config.js</code>（或 <code>.ts</code>）文件进行全面定制。</p>
</blockquote>
<div class="note info flat"><p>“Vite 的配置就是对 <code>vite.config.js</code> 文件中导出的配置对象进行操作。这个配置文件提供了对开发服务器、构建过程、插件、别名等一切的控制。”</p>
</div>

<h2 id="一、Vite-配置文件的位置与类型"><a href="#一、Vite-配置文件的位置与类型" class="headerlink" title="一、Vite 配置文件的位置与类型"></a>一、Vite 配置文件的位置与类型</h2><ul>
<li><strong>文件名</strong>：通常是 <code>vite.config.js</code>、<code>vite.config.ts</code>、<code>vite.config.mjs</code> 或 <code>vite.config.cjs</code>。建议使用 <code>.ts</code> 文件以获得更好的类型提示。</li>
<li><strong>位置</strong>：通常位于项目根目录。</li>
</ul>
<h3 id="1-1-基本结构"><a href="#1-1-基本结构" class="headerlink" title="1.1 基本结构"></a>1.1 基本结构</h3><p>Vite 配置文件默认导出一个配置对象。这个对象可以使用 <code>defineConfig</code> 辅助函数包裹，以获得更好的类型提示。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// 这里是你的 Vite 配置选项</span></span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">outDir</span>: <span class="string">&#x27;dist&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="二、核心配置选项详解"><a href="#二、核心配置选项详解" class="headerlink" title="二、核心配置选项详解"></a>二、核心配置选项详解</h2><p>Vite 的配置对象包含多个顶级字段，每个字段控制着不同的方面。</p>
<h3 id="2-1-root"><a href="#2-1-root" class="headerlink" title="2.1 root"></a>2.1 <code>root</code></h3><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>process.cwd()</code> (项目根目录)</li>
<li><strong>描述</strong>：项目根目录（<code>index.html</code> 所在的目录）。也可以通过命令行 <code>vite --root ./some-dir</code> 指定。</li>
</ul>
<h3 id="2-2-base"><a href="#2-2-base" class="headerlink" title="2.2 base"></a>2.2 <code>base</code></h3><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>/</code></li>
<li><strong>描述</strong>：公共基础路径。<ul>
<li><strong>开发环境</strong>：在开发服务器上，资源会从 <code>http://localhost:port/</code> 加载。如果你需要部署在一个子路径下，如 <code>example.com/my-app/</code>，则 <code>base</code> 应该设置为 <code>/my-app/</code>。</li>
<li><strong>生产环境</strong>：用于打包后的资源路径。</li>
</ul>
</li>
</ul>
<h3 id="2-3-mode"><a href="#2-3-mode" class="headerlink" title="2.3 mode"></a>2.3 <code>mode</code></h3><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<ul>
<li>开发环境：<code>development</code></li>
<li>生产环境：<code>production</code></li>
</ul>
</li>
<li><strong>描述</strong>：指定项目运行的模式。这会影响 <code>import.meta.env.MODE</code> 的值。</li>
</ul>
<h3 id="2-4-plugins"><a href="#2-4-plugins" class="headerlink" title="2.4 plugins"></a>2.4 <code>plugins</code></h3><ul>
<li><strong>类型</strong>：<code>Array&lt;PluginOption | PluginOption[]&gt;</code></li>
<li><strong>描述</strong>：要使用的 Vite 插件数组。插件是扩展 Vite 功能的主要方式。</li>
<li><strong>示例</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span>; <span class="comment">// 官方 Vue 插件</span></span><br><span class="line"><span class="keyword">import</span> eslintPlugin <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-eslint&#x27;</span>; <span class="comment">// 第三方 ESlint 插件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title function_">eslintPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">include</span>: [<span class="string">&#x27;src/**/*.js&#x27;</span>, <span class="string">&#x27;src/**/*.vue&#x27;</span>, <span class="string">&#x27;src/**/*.ts&#x27;</span>],</span><br><span class="line">      <span class="attr">exclude</span>: [<span class="string">&#x27;./node_modules/**&#x27;</span>],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<strong>注意</strong>：插件的顺序很重要，通常官方推荐的顺序已经是最优的。</li>
</ul>
<h3 id="2-5-publicDir"><a href="#2-5-publicDir" class="headerlink" title="2.5 publicDir"></a>2.5 <code>publicDir</code></h3><ul>
<li><strong>类型</strong>：<code>string | false</code></li>
<li><strong>默认值</strong>：<code>&#39;public&#39;</code></li>
<li><strong>描述</strong>：用于存放不需要构建处理的静态资源目录。这个目录下的文件会被直接复制到构建输出目录的根目录。<ul>
<li>在代码中可以通过 <code>/文件名.扩展名</code> 来访问这些文件。</li>
<li>例如，<code>public/favicon.ico</code> 在 HTML 中就是 <code>&lt;link rel=&quot;icon&quot; href=&quot;/favicon.ico&quot;&gt;</code>。</li>
<li>设置为 <code>false</code> 可以禁用此功能。</li>
</ul>
</li>
</ul>
<h3 id="2-6-resolve"><a href="#2-6-resolve" class="headerlink" title="2.6 resolve"></a>2.6 <code>resolve</code></h3><ul>
<li><strong>类型</strong>：<code>object</code></li>
<li><strong>描述</strong>：配置模块解析规则。</li>
</ul>
<h4 id="2-6-1-alias"><a href="#2-6-1-alias" class="headerlink" title="2.6.1 alias"></a>2.6.1 <code>alias</code></h4><ul>
<li><strong>类型</strong>：<code>Array&lt;&#123; find: string | RegExp, replacement: string &#125;&gt;</code></li>
<li><strong>描述</strong>：配置路径别名。这在处理深层嵌套的导入路径时非常有用。</li>
<li><strong>示例</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; resolve &#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>; <span class="comment">// NodeJS 路径模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: [</span><br><span class="line">      &#123; <span class="attr">find</span>: <span class="string">&#x27;@&#x27;</span>, <span class="attr">replacement</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">find</span>: <span class="string">&#x27;components&#x27;</span>, <span class="attr">replacement</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src/components&#x27;</span>) &#125;,</span><br><span class="line">      <span class="comment">// 确保在 TypeScript 中也配置路径别名，在 tsconfig.json 中</span></span><br><span class="line">      <span class="comment">// &quot;paths&quot;: &#123; &quot;@/*&quot;: [&quot;src/*&quot;], &quot;components/*&quot;: [&quot;src/components/*&quot;] &#125;</span></span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-6-2-dedupe"><a href="#2-6-2-dedupe" class="headerlink" title="2.6.2 dedupe"></a>2.6.2 <code>dedupe</code></h4><ul>
<li><strong>类型</strong>：<code>string[]</code></li>
<li><strong>描述</strong>：强制预绑定（预优化）的依赖。可以解决某些库在同一项目中出现多个实例的问题。</li>
</ul>
<h4 id="2-6-3-extensions"><a href="#2-6-3-extensions" class="headerlink" title="2.6.3 extensions"></a>2.6.3 <code>extensions</code></h4><ul>
<li><strong>类型</strong>：<code>string[]</code></li>
<li><strong>默认值</strong>：<code>[&#39;.mjs&#39;, &#39;.js&#39;, &#39;.ts&#39;, &#39;.jsx&#39;, &#39;.tsx&#39;, &#39;.json&#39;, &#39;.vue&#39;]</code></li>
<li><strong>描述</strong>：导入时会尝试的扩展名列表。</li>
</ul>
<h3 id="2-7-css"><a href="#2-7-css" class="headerlink" title="2.7 css"></a>2.7 <code>css</code></h3><ul>
<li><strong>类型</strong>：<code>object</code></li>
<li><strong>描述</strong>：配置 CSS 相关的选项。</li>
</ul>
<h4 id="2-7-1-preprocessorOptions"><a href="#2-7-1-preprocessorOptions" class="headerlink" title="2.7.1 preprocessorOptions"></a>2.7.1 <code>preprocessorOptions</code></h4><ul>
<li><strong>类型</strong>：<code>Record&lt;string, object&gt;</code></li>
<li><strong>描述</strong>：指定 CSS 预处理器的选项。</li>
<li><strong>示例</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">      <span class="attr">scss</span>: &#123;</span><br><span class="line">        <span class="attr">additionalData</span>: <span class="string">`@import &quot;@/styles/variables.scss&quot;;`</span>, <span class="comment">// 全局引入 SCSS 变量</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">less</span>: &#123;</span><br><span class="line">        <span class="attr">javascriptEnabled</span>: <span class="literal">true</span>, <span class="comment">// 允许 Less 中使用 JavaScript</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-7-2-modules"><a href="#2-7-2-modules" class="headerlink" title="2.7.2 modules"></a>2.7.2 <code>modules</code></h4><ul>
<li><strong>类型</strong>：<code>CSSModulesOptions</code></li>
<li><strong>描述</strong>：配置 CSS Modules 的行为。</li>
</ul>
<h4 id="2-7-3-postcss"><a href="#2-7-3-postcss" class="headerlink" title="2.7.3 postcss"></a>2.7.3 <code>postcss</code></h4><ul>
<li><strong>类型</strong>：<code>string | (postcss.ProcessOptions &amp; &#123; plugins?: (postcss.Plugin | string)[] &#125;)</code></li>
<li><strong>描述</strong>：自定义 PostCSS 配置。</li>
</ul>
<h3 id="2-8-json"><a href="#2-8-json" class="headerlink" title="2.8 json"></a>2.8 <code>json</code></h3><ul>
<li><strong>类型</strong>：<code>object</code></li>
<li><strong>描述</strong>：配置 JSON 导入的行为。</li>
</ul>
<h4 id="2-8-1-stringify"><a href="#2-8-1-stringify" class="headerlink" title="2.8.1 stringify"></a>2.8.1 <code>stringify</code></h4><ul>
<li><strong>类型</strong>：<code>boolean</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：导入的 JSON 会被字符串化为 <code>export default JSON.parse(&quot;...&quot;)</code>。这会禁用命名导入，但可以提供更好的性能。</li>
</ul>
<h3 id="2-9-esbuild"><a href="#2-9-esbuild" class="headerlink" title="2.9 esbuild"></a>2.9 <code>esbuild</code></h3><ul>
<li><strong>类型</strong>：<code>ESBuildOptions | false</code></li>
<li><strong>描述</strong>：配置 <code>esbuild</code> 转换选项。Vite 使用 <code>esbuild</code> 进行 JavaScript&#x2F;TypeScript 的语法转换和压缩。</li>
<li><strong>示例</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">esbuild</span>: &#123;</span><br><span class="line">    <span class="attr">jsxFactory</span>: <span class="string">&#x27;h&#x27;</span>,      <span class="comment">// JSX 的工厂函数</span></span><br><span class="line">    <span class="attr">jsxFragment</span>: <span class="string">&#x27;Fragment&#x27;</span>, <span class="comment">// JSX 的片段</span></span><br><span class="line">    <span class="comment">// 更多 esbuild 选项，参考其文档</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
设置为 <code>false</code> 可以禁用 <code>esbuild</code>（不推荐）。</li>
</ul>
<h3 id="2-10-server"><a href="#2-10-server" class="headerlink" title="2.10 server"></a>2.10 <code>server</code></h3><ul>
<li><strong>类型</strong>：<code>object</code></li>
<li><strong>描述</strong>：配置开发服务器选项。</li>
</ul>
<h4 id="2-10-1-host"><a href="#2-10-1-host" class="headerlink" title="2.10.1 host"></a>2.10.1 <code>host</code></h4><ul>
<li><strong>类型</strong>：<code>string | boolean</code></li>
<li><strong>默认值</strong>：<code>&#39;localhost&#39;</code></li>
<li><strong>描述</strong>：指定服务器监听的 IP 地址。<ul>
<li><code>true</code>：监听所有地址，包括局域网和公共地址（例如 <code>0.0.0.0</code>）。</li>
<li><code>false</code>：使用 <code>localhost</code>。</li>
<li><code>&#39;0.0.0.0&#39;</code> 或 <code>true</code> 允许通过局域网 IP 访问。</li>
</ul>
</li>
</ul>
<h4 id="2-10-2-port"><a href="#2-10-2-port" class="headerlink" title="2.10.2 port"></a>2.10.2 <code>port</code></h4><ul>
<li><strong>类型</strong>：<code>number</code></li>
<li><strong>默认值</strong>：<code>5173</code> (Vite 3+), <code>3000</code> (Vite 2)</li>
<li><strong>描述</strong>：指定开发服务器的端口。</li>
</ul>
<h4 id="2-10-3-strictPort"><a href="#2-10-3-strictPort" class="headerlink" title="2.10.3 strictPort"></a>2.10.3 <code>strictPort</code></h4><ul>
<li><strong>类型</strong>：<code>boolean</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：如果端口已被占用，是否严格退出。<code>false</code> 会自动尝试下一个可用端口。</li>
</ul>
<h4 id="2-10-4-https"><a href="#2-10-4-https" class="headerlink" title="2.10.4 https"></a>2.10.4 <code>https</code></h4><ul>
<li><strong>类型</strong>：<code>boolean | https.ServerOptions</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：启用 TLS + HTTP&#x2F;2。可以传入 HTTPS 证书选项。</li>
</ul>
<h4 id="2-10-5-open"><a href="#2-10-5-open" class="headerlink" title="2.10.5 open"></a>2.10.5 <code>open</code></h4><ul>
<li><strong>类型</strong>：<code>string | boolean</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：服务器启动时自动在浏览器中打开。<ul>
<li><code>true</code>：打开项目根目录。</li>
<li><code>string</code>：指定要打开的 URL 路径 (例如 <code>/docs/index.html</code>)。</li>
</ul>
</li>
</ul>
<h4 id="2-10-6-proxy"><a href="#2-10-6-proxy" class="headerlink" title="2.10.6 proxy"></a>2.10.6 <code>proxy</code></h4><ul>
<li><strong>类型</strong>：<code>Record&lt;string, string | ProxyOptions&gt;</code></li>
<li><strong>描述</strong>：配置自定义代理规则。这对于跨域请求非常有用。</li>
<li><strong>示例</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8000&#x27;</span>, <span class="comment">// 后端 API 地址</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,            <span class="comment">// 改变源（重要）</span></span><br><span class="line">        <span class="attr">rewrite</span>: <span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>), <span class="comment">// 重写路径, 去掉 &#x27;/api&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 多个代理规则</span></span><br><span class="line">      <span class="string">&#x27;/another-api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://another-backend.com&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-10-7-cors"><a href="#2-10-7-cors" class="headerlink" title="2.10.7 cors"></a>2.10.7 <code>cors</code></h4><ul>
<li><strong>类型</strong>：<code>boolean | CorsOptions</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：配置 CORS。</li>
</ul>
<h3 id="2-11-build"><a href="#2-11-build" class="headerlink" title="2.11 build"></a>2.11 <code>build</code></h3><ul>
<li><strong>类型</strong>：<code>object</code></li>
<li><strong>描述</strong>：配置生产环境构建选项。<code>build</code> 下的选项都会直接传递给 Rollup。</li>
</ul>
<h4 id="2-11-1-target"><a href="#2-11-1-target" class="headerlink" title="2.11.1 target"></a>2.11.1 <code>target</code></h4><ul>
<li><strong>类型</strong>：<code>string | string[]</code></li>
<li><strong>默认值</strong>：<code>&#39;modules&#39;</code></li>
<li><strong>描述</strong>：<code>esbuild</code> 转换的最低目标浏览器版本（例如 <code>&#39;es2015&#39;</code>、<code>[&#39;chrome58&#39;, &#39;firefox57&#39;]</code>）。</li>
</ul>
<h4 id="2-11-2-outDir"><a href="#2-11-2-outDir" class="headerlink" title="2.11.2 outDir"></a>2.11.2 <code>outDir</code></h4><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>&#39;dist&#39;</code></li>
<li><strong>描述</strong>：指定打包输出目录。</li>
</ul>
<h4 id="2-11-3-assetsDir"><a href="#2-11-3-assetsDir" class="headerlink" title="2.11.3 assetsDir"></a>2.11.3 <code>assetsDir</code></h4><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>&#39;assets&#39;</code></li>
<li><strong>描述</strong>：指定静态资源（图片、字体等）的输出目录，相对于 <code>outDir</code>。</li>
</ul>
<h4 id="2-11-4-assetsInlineLimit"><a href="#2-11-4-assetsInlineLimit" class="headerlink" title="2.11.4 assetsInlineLimit"></a>2.11.4 <code>assetsInlineLimit</code></h4><ul>
<li><strong>类型</strong>：<code>number</code></li>
<li><strong>默认值</strong>：<code>4096</code> (4KB)</li>
<li><strong>描述</strong>：小于此阈值的导入资源将内联为 base64 URLs。</li>
</ul>
<h4 id="2-11-5-cssCodeSplit"><a href="#2-11-5-cssCodeSplit" class="headerlink" title="2.11.5 cssCodeSplit"></a>2.11.5 <code>cssCodeSplit</code></h4><ul>
<li><strong>类型</strong>：<code>boolean</code></li>
<li><strong>默认值</strong>：<code>true</code></li>
<li><strong>描述</strong>：如果为 <code>true</code>，CSS 将会按异步模块的依赖在它们对应的块中进行代码分割。</li>
</ul>
<h4 id="2-11-6-sourcemap"><a href="#2-11-6-sourcemap" class="headerlink" title="2.11.6 sourcemap"></a>2.11.6 <code>sourcemap</code></h4><ul>
<li><strong>类型</strong>：<code>boolean | &#39;inline&#39; | &#39;hidden&#39;</code></li>
<li><strong>默认值</strong>：<code>false</code></li>
<li><strong>描述</strong>：是否生成 <code>sourcemap</code>。</li>
</ul>
<h4 id="2-11-7-minify"><a href="#2-11-7-minify" class="headerlink" title="2.11.7 minify"></a>2.11.7 <code>minify</code></h4><ul>
<li><strong>类型</strong>：<code>boolean | &#39;terser&#39; | &#39;esbuild&#39;</code></li>
<li><strong>默认值</strong>：<code>&#39;esbuild&#39;</code></li>
<li><strong>描述</strong>：指定是否压缩代码。<ul>
<li><code>&#39;terser&#39;</code>：使用 <code>terser</code> 进行压缩，功能更强大，但速度稍慢。</li>
<li><code>&#39;esbuild&#39;</code>：使用 <code>esbuild</code> 进行压缩，速度较快，但压缩率可能略低一点。</li>
<li><code>false</code>：不压缩。</li>
</ul>
</li>
</ul>
<h4 id="2-11-8-rollupOptions"><a href="#2-11-8-rollupOptions" class="headerlink" title="2.11.8 rollupOptions"></a>2.11.8 <code>rollupOptions</code></h4><ul>
<li><strong>类型</strong>：<code>RollupOptions</code> (来自 Rollup 库的类型)</li>
<li><strong>描述</strong>：直接传递给 Rollup 的额外选项。用于更高级的打包定制。</li>
<li><strong>示例</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">      <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="title function_">manualChunks</span>(<span class="params">id</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (id.<span class="title function_">includes</span>(<span class="string">&#x27;node_modules&#x27;</span>)) &#123;</span><br><span class="line">            <span class="comment">// 将所有 node_modules 依赖打包到 vender.js</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;vendor&#x27;</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 控制 js 和 css 文件的命名</span></span><br><span class="line">        <span class="attr">entryFileNames</span>: <span class="string">&#x27;assets/[name]-[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">chunkFileNames</span>: <span class="string">&#x27;assets/[name]-[hash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">assetFileNames</span>: <span class="string">&#x27;assets/[name]-[hash].[ext]&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-12-define"><a href="#2-12-define" class="headerlink" title="2.12 define"></a>2.12 <code>define</code></h3><ul>
<li><strong>类型</strong>：<code>Record&lt;string, string&gt;</code></li>
<li><strong>描述</strong>：定义全局常量替换。键会被自动字符串化。</li>
<li><strong>示例</strong>：<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">define</span>: &#123;</span><br><span class="line">    <span class="attr">__APP_VERSION__</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="string">&#x27;1.0.0&#x27;</span>), <span class="comment">// 注入应用版本号</span></span><br><span class="line">    <span class="string">&#x27;process.env.NODE_ENV&#x27;</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="string">&#x27;production&#x27;</span>), <span class="comment">// 兼容旧代码</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-13-envDir"><a href="#2-13-envDir" class="headerlink" title="2.13 envDir"></a>2.13 <code>envDir</code></h3><ul>
<li><strong>类型</strong>：<code>string</code></li>
<li><strong>默认值</strong>：<code>root</code></li>
<li><strong>描述</strong>：加载 <code>.env</code> 文件的目录。</li>
</ul>
<h3 id="2-14-optimizeDeps"><a href="#2-14-optimizeDeps" class="headerlink" title="2.14 optimizeDeps"></a>2.14 <code>optimizeDeps</code></h3><ul>
<li><strong>类型</strong>：<code>DepOptimizationOptions</code></li>
<li><strong>描述</strong>：配置依赖预构建（Dependency Pre-Bundling）选项。Vite 在开发服务器启动时会预构建 <code>node_modules</code> 中的 CommonJS&#x2F;UMD 模块为 ES 模块，以加速页面加载。</li>
</ul>
<h4 id="2-14-1-include"><a href="#2-14-1-include" class="headerlink" title="2.14.1 include"></a>2.14.1 <code>include</code></h4><ul>
<li><strong>类型</strong>：<code>string[]</code></li>
<li><strong>描述</strong>：强制预构建的依赖包。<ul>
<li>某些 ESM 兼容性较差的库可能需要手动添加到这里。</li>
<li>例如：<code>[&#39;lodash&#39;]</code></li>
</ul>
</li>
</ul>
<h4 id="2-14-2-exclude"><a href="#2-14-2-exclude" class="headerlink" title="2.14.2 exclude"></a>2.14.2 <code>exclude</code></h4><ul>
<li><strong>类型</strong>：<code>string[]</code></li>
<li><strong>描述</strong>：从预构建中排除的依赖包。<ul>
<li>如果你确定某个库已经是纯 ESM 并且不需要预构建，可以将其排除。</li>
</ul>
</li>
</ul>
<h4 id="2-14-3-entries"><a href="#2-14-3-entries" class="headerlink" title="2.14.3 entries"></a>2.14.3 <code>entries</code></h4><ul>
<li><strong>类型</strong>：<code>string | string[]</code></li>
<li><strong>描述</strong>：指定分析依赖的入口文件。默认会分析 <code>index.html</code>。</li>
</ul>
<h2 id="三、环境变量"><a href="#三、环境变量" class="headerlink" title="三、环境变量"></a>三、环境变量</h2><p>Vite 通过 <code>import.meta.env</code> 对象暴露环境变量。</p>
<ul>
<li><code>import.meta.env.MODE</code>：当前模式 (<code>development</code> 或 <code>production</code>)。</li>
<li><code>import.meta.env.BASE_URL</code>：配置的 <code>base</code> 公共基础路径。</li>
<li><code>import.meta.env.PROD</code>：是否在生产环境。</li>
<li><code>import.meta.env.DEV</code>：是否在开发环境。</li>
<li>以 <code>VITE_</code> 开头的自定义环境变量：例如在 <code>.env</code> 文件中定义 <code>VITE_API_URL=http://api.example.com</code>，则可以通过 <code>import.meta.env.VITE_API_URL</code> 访问。</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts 可以根据模式加载不同的配置</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig, loadEnv &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; command, mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 根据当前工作目录中的 `mode` 加载 .env 文件</span></span><br><span class="line">  <span class="comment">// 设置 `process.env` 的键值对</span></span><br><span class="line">  <span class="keyword">const</span> env = <span class="title function_">loadEnv</span>(mode, process.<span class="title function_">cwd</span>(), <span class="string">&#x27;&#x27;</span>); <span class="comment">// 第三个参数是前缀，&#x27;&#x27; 表示加载所有</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// vite 配置</span></span><br><span class="line">    <span class="attr">define</span>: &#123;</span><br><span class="line">      <span class="attr">__APP_ENV__</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(env.<span class="property">APP_ENV</span>), <span class="comment">// 可以将环境变量注入到代码中</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 根据 mode 条件性配置</span></span><br><span class="line">    <span class="attr">server</span>: &#123;</span><br><span class="line">      <span class="attr">port</span>: (mode === <span class="string">&#x27;development&#x27;</span>) ? <span class="number">3000</span> : <span class="literal">undefined</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="四、条件式配置"><a href="#四、条件式配置" class="headerlink" title="四、条件式配置"></a>四、条件式配置</h2><p>Vite 配置文件可以导出一个函数，该函数接收 <code>command</code> 和 <code>mode</code> 参数，允许你根据不同的环境或命令返回不同的配置对象。</p>
<ul>
<li><code>command</code>：<code>&#39;serve&#39;</code> (开发环境) 或 <code>&#39;build&#39;</code> (生产环境)。</li>
<li><code>mode</code>：<code>development</code> 或 <code>production</code>，或通过 <code>--mode</code> 参数指定。</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; command, mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (command === <span class="string">&#x27;serve&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 开发环境专用配置</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">server</span>: &#123;</span><br><span class="line">        <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">proxy</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;/api&#x27;</span>: <span class="string">&#x27;http://localhost:8000&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">plugins</span>: [<span class="comment">/* dev plugins */</span>],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// `command === &#x27;build&#x27;`</span></span><br><span class="line">    <span class="comment">// 生产环境专用配置</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">build</span>: &#123;</span><br><span class="line">        <span class="attr">sourcemap</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">minify</span>: <span class="string">&#x27;terser&#x27;</span>,</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">plugins</span>: [<span class="comment">/* prod plugins */</span>],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a>五、总结</h2><p>Vite 的配置文件 <code>vite.config.js</code> (<code>.ts</code>等) 是定制整个构建和开发流程的控制中心。通过对 <code>plugins</code>、<code>server</code>、<code>build</code>、<code>resolve</code> 等核心选项的灵活配置，可以满足绝大多数前端项目的需求。</p>
<ul>
<li><strong>原生 ES 模块</strong>：理解 Vite 在开发模式下直接利用浏览器原生 ES 模块的特性，有助于理解其极速启动的原因。</li>
<li><strong>Rollup 生产打包</strong>：生产构建时，Vite 内部使用 Rollup，因此其许多 <code>build</code> 选项都直接映射到 Rollup 的配置。</li>
<li><strong>插件生态</strong>：Vite 的强大功能很大程度上依赖于其丰富的插件生态。</li>
<li><strong>环境变量</strong>：善用 <code>import.meta.env</code> 和 <code>.env</code> 文件来管理不同环境下的配置。</li>
</ul>
<p>熟练掌握 Vite 配置，将大大提升你的开发效率和项目构建质量。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg">TeaTang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.tbf1211.xx.kg/2024/2024-01-26_Vite%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%EF%BC%9A%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/">https://blog.tbf1211.xx.kg/2024/2024-01-26_Vite%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%EF%BC%9A%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tbf1211.xx.kg" target="_blank">1024 维度</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/TypeScript/">TypeScript</a><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a><a class="post-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/">项目构建</a><a class="post-meta__tags" href="/tags/2024/">2024</a><a class="post-meta__tags" href="/tags/Vite/">Vite</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/default_cover-20.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/2024-02-05_%E8%BE%B9%E7%BC%98%E5%87%BD%E6%95%B0%E4%B8%8E%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97%E8%AF%A6%E8%A7%A3%EF%BC%9A%E6%9E%84%E5%BB%BA%E4%B8%8B%E4%B8%80%E4%BB%A3%E9%AB%98%E6%80%A7%E8%83%BD%E4%B8%8E%E4%BD%8E%E5%BB%B6%E8%BF%9F%E5%BA%94%E7%94%A8/" title="边缘函数与边缘计算详解：构建下一代高性能与低延迟应用"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-13.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">边缘函数与边缘计算详解：构建下一代高性能与低延迟应用</div></div><div class="info-2"><div class="info-item-1"> 随着互联网应用越来越复杂，用户对响应速度和体验的要求也越来越高。传统的中心化数据中心模式逐渐暴露出延迟高、带宽成本高等问题。边缘计算和在其之上发展起来的 边缘函数 (Edge Functions)，正是为了解决这些问题而生，它们将计算和数据处理能力推向离用户更近的网络边缘，从而开启了构建高性能、低延迟应用的全新范式。  “边缘计算的核心理念是**‘计算靠近数据和用户’**。它打破了传统云计算的地域限制，让服务响应速度更快，数据处理更高效，是面向未来分布式应用和 IoT 场景的关键技术。”   一、什么是边缘计算 (Edge Computing)？边缘计算是一种分布式计算范式，它将计算、存储和网络资源部署在网络边缘，即靠近数据源和最终用户的物理位置。与将所有数据发送到集中式数据中心进行处理的传统云计算模式不同，边缘计算旨在减少数据传输的距离和延迟，从而提高响应速度、降低带宽消耗并提升数据安全性。 1.1 核心理念 数据本地化处理：在数据生成或靠近用户的地方进行初步处理和分析。 低延迟：减少数据往返中心数据中心的距离，显著降低响应时间。 带宽优化：只将经过处理和有价值的数据传回中心...</div></div></div></a><a class="pagination-related" href="/2024/2024-01-18_%E6%97%A0%E6%84%9F%E5%88%B7%E6%96%B0Token%E8%AF%A6%E8%A7%A3%EF%BC%9A%E6%8F%90%E5%8D%87%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E7%9A%84%E8%AE%A4%E8%AF%81%E7%AD%96%E7%95%A5/" title="无感刷新Token详解：提升用户体验与系统安全的认证策略"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-01.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">无感刷新Token详解：提升用户体验与系统安全的认证策略</div></div><div class="info-2"><div class="info-item-1"> 在现代 Web 和移动应用中，基于 Token 的认证方式（如 JWT）已成为主流。它解决了传统 Session-Cookie 认证在分布式系统和跨域场景下的诸多痛点。然而，Token 的有效期问题又带来了新的挑战：如果 Access Token 长期有效，一旦泄露风险巨大；如果短期有效，用户又会频繁因 Token 过期而被迫重新登录，严重影响用户体验。无感刷新 Token (Silent Token Refresh) 正是为了解决这一矛盾而生，它旨在提升安全性、兼顾用户体验，让用户在不感知的情况下，始终保持登录状态。  “无感刷新 Token 的核心思想是：使用一个短期有效的 Access Token 负责日常业务访问，同时使用一个长期有效但受严密保护的 Refresh Token 来在 Access Token 过期时重新获取新的 Access Token，从而实现长期登录且不牺牲安全性的目标。”   一、为什么需要无感刷新 Token？在基于 Token 的认证系统中，通常会涉及到两种 Token：  Access Token (访问令牌)：  用途：用于访问受保护的资源...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/2024-07-04_Electron%E5%BC%80%E5%8F%91%E8%AF%A6%E8%A7%A3/" title="Electron 开发详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-18.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-04</div><div class="info-item-2">Electron 开发详解</div></div><div class="info-2"><div class="info-item-1"> Electron 是 GitHub 开发的一个开源框架，它允许你使用 Web 技术 (HTML, CSS, JavaScript) 构建跨平台的桌面应用程序。这意味着你可以利用已有的前端技能，开发出像 VS Code、Slack、Discord 等专业桌面应用。本文将深入探讨 Electron 的核心概念、开发流程、最佳实践和常见问题。  “Build cross-platform desktop apps with JavaScript, HTML, and CSS.” —— Electron 官方 Slogan   一、Electron 简介Electron 结合了 Chromium 用于渲染页面和 Node.js 用于操作底层系统。  Chromium: 提供强大的 Web 渲染能力，负责界面显示。 Node.js: 提供访问操作系统底层 API 的能力，例如文件系统、网络、进程管理等。  这种结合使得 Web 开发者能够轻松地构建功能丰富的桌面应用程序，并且这些应用可以运行在 Windows、macOS 和 Linux 三大主流操作系统上。 二、核心概念Electron...</div></div></div></a><a class="pagination-related" href="/2024/2024-07-26_TypeScript%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B/" title="TypeScript高级类型"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-23.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="info-item-2">TypeScript高级类型</div></div><div class="info-2"><div class="info-item-1"> TypeScript 高级类型 提供了强大的工具，允许开发者以更灵活、更精确的方式定义和操作类型。这些高级类型不仅增强了代码的类型安全性，还提升了开发体验，使得复杂的数据结构和业务逻辑能够更清晰地表达和维护。掌握 TypeScript 的这些高级特性，是成为一名高效 TypeScript 开发者的关键。  核心思想：高级类型允许我们基于现有类型进行转换、组合、提取，以及根据不同条件生成新类型，从而构建出更健壮、更具表达力的类型系统。   一、联合类型 (Union Types)联合类型表示一个值可以是多种类型中的任意一种。使用 | 符号连接不同的类型。 1.1 定义与使用1234567891011121314// 定义一个联合类型，表示一个变量可以是 string 或 numbertype StringOrNumber = string | number;let id: StringOrNumber;id = &quot;123&quot;; // OKid = 123;   // OK// id = true; // Error: Type &#x27;boolean&#x2...</div></div></div></a><a class="pagination-related" href="/2023/2023-03-01_React%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B%EF%BC%9A%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BA%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2/" title="React入门教程：快速构建交互式用户界面"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-24.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-01</div><div class="info-item-2">React入门教程：快速构建交互式用户界面</div></div><div class="info-2"><div class="info-item-1"> React (通常称为 React.js 或 ReactJS) 是一个由 Facebook 开发并维护的用于构建用户界面 (UI) 的 JavaScript 库。它以其组件化、声明式的编程范式和高效的 虚拟 DOM (Virtual DOM) 机制而闻名。本入门教程将带你领略 React 的核心概念，并指导你搭建第一个 React 应用，让你快速掌握构建交互式前端应用的基础。  “React 并不是一个完整的框架，而是一个专注于 UI 层面的库。它鼓励你将 UI 拆分成独立、可复用的小块（组件），从而让代码更易于管理、开发和测试。学习 React，就是学习如何思考和构建组件。”   一、React 的核心理念1.1 组件化 (Component-Based)React 的核心是组件 (Component)。你可以将复杂的 UI 拆分为独立的、可复用的、封装性良好的小组件。每个组件都有自己的逻辑和外观，它们可以组合起来形成更复杂的 UI。  示例：一个电商网站可以分解为：Header 组件、ProductList 组件、ProductCard 组件、Button 组件、Shopp...</div></div></div></a><a class="pagination-related" href="/2024/2024-07-28_TypeScript%E6%B3%9B%E5%9E%8B%E7%BA%A6%E6%9D%9F%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%B2%BE%E7%BB%86%E5%8C%96%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%E8%83%BD%E5%8A%9B/" title="TypeScript泛型约束详解：精细化类型参数能力"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-12.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-28</div><div class="info-item-2">TypeScript泛型约束详解：精细化类型参数能力</div></div><div class="info-2"><div class="info-item-1"> TypeScript 泛型约束 (Generic Constraints) 是泛型机制中一个至关重要的概念。它允许我们限制泛型类型参数可以表示的类型范围。通过泛型约束，我们可以在泛型代码内部安全地访问泛型类型参数的特定属性或方法，从而编写出既通用又具备类型安全性的代码。  核心思想：泛型约束的本质是使用 extends 关键字来声明一个类型参数必须是某个特定类型或实现某个接口的子类型。这为编译器提供了足够的类型信息，使其能够在泛型函数、类或接口内部进行更精确的类型检查。   一、为什么需要泛型约束？在上一篇泛型详解中，我们了解到泛型允许我们编写处理任何类型的代码。但有时，我们希望泛型处理的类型具有某种共同的特性。 考虑一个场景：我们想编写一个函数，它接受一个列表，并返回列表中元素的长度之和。 问题示例： 12345678910111213function sumLengths&lt;T&gt;(items: T[]): number &#123;  let totalLength = 0;  for (let item of items) &#123;    // 报错: Pr...</div></div></div></a><a class="pagination-related" href="/2023/2023-04-17_%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B%E5%8C%96%E8%AF%A6%E8%A7%A3/" title="前端项目工程化详解"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-13.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-17</div><div class="info-item-2">前端项目工程化详解</div></div><div class="info-2"><div class="info-item-1"> 随着前端应用的复杂度日益增加，单纯依靠人工管理和协作已经无法满足高效、高质量开发的需求。前端工程化应运而生，它旨在通过将软件工程的思想和方法引入前端开发，构建一套系统化、标准化、自动化、体系化的解决方案，以提高开发效率、保障代码质量、降低维护成本。  前端工程化的核心思想是：以自动化取代人力，以工具取代重复劳动，以规范约束散漫。   一、什么是前端工程化？前端工程化是构建、管理和维护前端项目的实践和工具集。它涵盖了从项目初始化、开发、构建、测试到部署的整个生命周期，目标是提升团队协作效率、统一代码风格、保证项目质量、优化产物性能以及实现快速迭代。 它不仅仅是使用几个构建工具，更是一种体系化的思维方式和工作流。 二、为什么需要前端工程化？在没有工程化的时代，前端开发面临诸多挑战：  开发效率低下：手动重复任务（如文件合并、压缩），环境搭建复杂。 代码质量参差不齐：缺乏统一的代码规范和质量检查机制，导致 Bug 增多，难以维护。 团队协作困难：不同成员的代码风格差异大，冲突频繁，交接成本高。 项目性能不佳：缺乏自动化优化手段（如图片压缩、按需加载），页面加载慢。 部署上线复杂：手动...</div></div></div></a><a class="pagination-related" href="/2024/2024-03-27_%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JavaScript%E5%8E%9F%E5%9E%8B%E9%93%BE%EF%BC%88Prototype%20Chain%EF%BC%89/" title="深入理解JavaScript原型链（Prototype Chain）"><img class="cover" src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-13.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-27</div><div class="info-item-2">深入理解JavaScript原型链（Prototype Chain）</div></div><div class="info-2"><div class="info-item-1"> JavaScript 的原型链 (Prototype Chain) 是其实现继承的核心机制，也是理解 JavaScript 面向对象编程的关键。与 C++ 或 Java 等传统面向对象语言通过类（class）来实现继承不同，JavaScript 是一种基于原型 (Prototype-based) 的语言。这意味着对象可以直接从其他对象继承属性和方法。  核心思想：每个 JavaScript 对象都有一个指向其原型 (prototype) 的内部链接。当访问一个对象的属性或方法时，如果该对象本身没有这个属性或方法，JavaScript 就会沿着这条链向上查找，直到找到该属性或方法，或者查找到原型链的末端（null）。   一、理解原型链的基石：[[Prototype]]、__proto__ 和 prototype在深入原型链之前，我们需要区分三个核心概念： 1.1 1. [[Prototype]] (隐式原型) 这是一个存在于每个 JavaScript 对象上的内部属性。 它指向该对象的原型对象。 它是真正构成原型链的链接。 在 ES5 之后，可以通过 Object.getPro...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">TeaTang</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">138</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">137</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">52</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/teatang"><i class="fab fa-github"></i><span>GitHub主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:tea.tang1211@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站更多功能即将上线，敬请期待！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Vite-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%8D%E7%BD%AE%E4%B8%8E%E7%B1%BB%E5%9E%8B"><span class="toc-text">一、Vite 配置文件的位置与类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-text">1.1 基本结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9%E8%AF%A6%E8%A7%A3"><span class="toc-text">二、核心配置选项详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-root"><span class="toc-text">2.1 root</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-base"><span class="toc-text">2.2 base</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-mode"><span class="toc-text">2.3 mode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-plugins"><span class="toc-text">2.4 plugins</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-publicDir"><span class="toc-text">2.5 publicDir</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-resolve"><span class="toc-text">2.6 resolve</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-1-alias"><span class="toc-text">2.6.1 alias</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-2-dedupe"><span class="toc-text">2.6.2 dedupe</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-3-extensions"><span class="toc-text">2.6.3 extensions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-css"><span class="toc-text">2.7 css</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-1-preprocessorOptions"><span class="toc-text">2.7.1 preprocessorOptions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-2-modules"><span class="toc-text">2.7.2 modules</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-3-postcss"><span class="toc-text">2.7.3 postcss</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-json"><span class="toc-text">2.8 json</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-1-stringify"><span class="toc-text">2.8.1 stringify</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-esbuild"><span class="toc-text">2.9 esbuild</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-10-server"><span class="toc-text">2.10 server</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-10-1-host"><span class="toc-text">2.10.1 host</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-10-2-port"><span class="toc-text">2.10.2 port</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-10-3-strictPort"><span class="toc-text">2.10.3 strictPort</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-10-4-https"><span class="toc-text">2.10.4 https</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-10-5-open"><span class="toc-text">2.10.5 open</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-10-6-proxy"><span class="toc-text">2.10.6 proxy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-10-7-cors"><span class="toc-text">2.10.7 cors</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-11-build"><span class="toc-text">2.11 build</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-1-target"><span class="toc-text">2.11.1 target</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-2-outDir"><span class="toc-text">2.11.2 outDir</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-3-assetsDir"><span class="toc-text">2.11.3 assetsDir</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-4-assetsInlineLimit"><span class="toc-text">2.11.4 assetsInlineLimit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-5-cssCodeSplit"><span class="toc-text">2.11.5 cssCodeSplit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-6-sourcemap"><span class="toc-text">2.11.6 sourcemap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-7-minify"><span class="toc-text">2.11.7 minify</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-8-rollupOptions"><span class="toc-text">2.11.8 rollupOptions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-12-define"><span class="toc-text">2.12 define</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-13-envDir"><span class="toc-text">2.13 envDir</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-14-optimizeDeps"><span class="toc-text">2.14 optimizeDeps</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-14-1-include"><span class="toc-text">2.14.1 include</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-14-2-exclude"><span class="toc-text">2.14.2 exclude</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-14-3-entries"><span class="toc-text">2.14.3 entries</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">三、环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%9D%A1%E4%BB%B6%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-text">四、条件式配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">五、总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-10-08_Hyper-V%20%E6%B7%B1%E5%BA%A6%E8%AF%A6%E8%A7%A3%EF%BC%9AWindows%20%E5%B9%B3%E5%8F%B0%E4%B8%8A%E7%9A%84%E4%B8%93%E4%B8%9A%E7%BA%A7%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF/" title="Hyper-V 深度详解：Windows 平台上的专业级虚拟化技术"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-07.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hyper-V 深度详解：Windows 平台上的专业级虚拟化技术"/></a><div class="content"><a class="title" href="/2025/2025-10-08_Hyper-V%20%E6%B7%B1%E5%BA%A6%E8%AF%A6%E8%A7%A3%EF%BC%9AWindows%20%E5%B9%B3%E5%8F%B0%E4%B8%8A%E7%9A%84%E4%B8%93%E4%B8%9A%E7%BA%A7%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF/" title="Hyper-V 深度详解：Windows 平台上的专业级虚拟化技术">Hyper-V 深度详解：Windows 平台上的专业级虚拟化技术</a><time datetime="2025-10-07T22:24:00.000Z" title="发表于 2025-10-08 06:24:00">2025-10-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-10-06_TresJS%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%94%A8Vue%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9E%84%E5%BB%BAThree.js%E5%9C%BA%E6%99%AF/" title="TresJS详解：用Vue的方式构建Three.js场景"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-18.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TresJS详解：用Vue的方式构建Three.js场景"/></a><div class="content"><a class="title" href="/2025/2025-10-06_TresJS%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%94%A8Vue%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9E%84%E5%BB%BAThree.js%E5%9C%BA%E6%99%AF/" title="TresJS详解：用Vue的方式构建Three.js场景">TresJS详解：用Vue的方式构建Three.js场景</a><time datetime="2025-10-05T22:24:00.000Z" title="发表于 2025-10-06 06:24:00">2025-10-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-10-01_Go%E8%AF%AD%E8%A8%80%E6%8C%87%E5%90%91%E6%8C%87%E9%92%88%E7%9A%84%E6%8C%87%E9%92%88(Pointer%20to%20Pointer)%E8%AF%A6%E8%A7%A3/" title="Go语言指向指针的指针(Pointer to Pointer)详解"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go语言指向指针的指针(Pointer to Pointer)详解"/></a><div class="content"><a class="title" href="/2025/2025-10-01_Go%E8%AF%AD%E8%A8%80%E6%8C%87%E5%90%91%E6%8C%87%E9%92%88%E7%9A%84%E6%8C%87%E9%92%88(Pointer%20to%20Pointer)%E8%AF%A6%E8%A7%A3/" title="Go语言指向指针的指针(Pointer to Pointer)详解">Go语言指向指针的指针(Pointer to Pointer)详解</a><time datetime="2025-09-30T22:24:00.000Z" title="发表于 2025-10-01 06:24:00">2025-10-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-09-28_HTMX%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%94%A8HTML%E5%B1%9E%E6%80%A7%E7%9B%B4%E6%8E%A5%E9%A9%B1%E5%8A%A8AJAX%E3%80%81CSS%E8%BF%87%E6%B8%A1%E5%92%8CWebSocket/" title="HTMX详解：用HTML属性直接驱动AJAX、CSS过渡和WebSocket"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-14.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HTMX详解：用HTML属性直接驱动AJAX、CSS过渡和WebSocket"/></a><div class="content"><a class="title" href="/2025/2025-09-28_HTMX%E8%AF%A6%E8%A7%A3%EF%BC%9A%E7%94%A8HTML%E5%B1%9E%E6%80%A7%E7%9B%B4%E6%8E%A5%E9%A9%B1%E5%8A%A8AJAX%E3%80%81CSS%E8%BF%87%E6%B8%A1%E5%92%8CWebSocket/" title="HTMX详解：用HTML属性直接驱动AJAX、CSS过渡和WebSocket">HTMX详解：用HTML属性直接驱动AJAX、CSS过渡和WebSocket</a><time datetime="2025-09-27T22:24:00.000Z" title="发表于 2025-09-28 06:24:00">2025-09-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/2025-09-22_WSL2%E8%AF%A6%E8%A7%A3%EF%BC%9A%E5%9C%A8Windows%E8%BF%90%E8%A1%8CLinux%E7%9A%84%E6%96%B0%E6%A0%87%E5%87%86/" title="WSL2详解：在Windows运行Linux的新标准"><img src="/img/loading.gif" data-lazy-src="/img/cover/default_cover-01.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WSL2详解：在Windows运行Linux的新标准"/></a><div class="content"><a class="title" href="/2025/2025-09-22_WSL2%E8%AF%A6%E8%A7%A3%EF%BC%9A%E5%9C%A8Windows%E8%BF%90%E8%A1%8CLinux%E7%9A%84%E6%96%B0%E6%A0%87%E5%87%86/" title="WSL2详解：在Windows运行Linux的新标准">WSL2详解：在Windows运行Linux的新标准</a><time datetime="2025-09-21T22:24:00.000Z" title="发表于 2025-09-22 06:24:00">2025-09-22</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/cover/default_cover-20.jpg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">我的轨迹</div><div class="footer-flex-content"><a href="/tags/2023/" target="_blank" title="📌 2023">📌 2023</a><a href="/tags/2024/" target="_blank" title="❓ 2024">❓ 2024</a><a href="/tags/2025/" target="_blank" title="🚀 2025">🚀 2025</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">维度</div><div class="footer-flex-content"><a href="/categories/" target="_blank" title="分类">分类</a><a href="/tags/" target="_blank" title="标签">标签</a><a href="/categories/" target="_blank" title="时间线">时间线</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">其他</div><div class="footer-flex-content"><a href="/shuoshuo" target="_blank" title="说说">说说</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2021 - 2025 By TeaTang</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const applyThemeDefaultsConfig = theme => {
    if (theme === 'dark-mode') {
      Chart.defaults.color = "rgba(255, 255, 255, 0.8)"
      Chart.defaults.borderColor = "rgba(255, 255, 255, 0.2)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    } else {
      Chart.defaults.color = "rgba(0, 0, 0, 0.8)"
      Chart.defaults.borderColor = "rgba(0, 0, 0, 0.1)"
      Chart.defaults.scale.ticks.backdropColor = "transparent"
    }
  }

  // Recursively traverse the config object and automatically apply theme-specific color schemes
  const applyThemeConfig = (obj, theme) => {
    if (typeof obj !== 'object' || obj === null) return

    Object.keys(obj).forEach(key => {
      const value = obj[key]
      // If the property is an object and has theme-specific options, apply them
      if (typeof value === 'object' && value !== null) {
        if (value[theme]) {
          obj[key] = value[theme] // Apply the value for the current theme
        } else {
          // Recursively process child objects
          applyThemeConfig(value, theme)
        }
      }
    })
  }

  const runChartJS = ele => {
    window.loadChartJS = true

    Array.from(ele).forEach((item, index) => {
      const chartSrc = item.firstElementChild
      const chartID = item.getAttribute('data-chartjs-id') || ('chartjs-' + index) // Use custom ID or default ID
      const width = item.getAttribute('data-width')
      const existingCanvas = document.getElementById(chartID)

      // If a canvas already exists, remove it to avoid rendering duplicates
      if (existingCanvas) {
          existingCanvas.parentNode.remove()
      }

      const chartDefinition = chartSrc.textContent
      const canvas = document.createElement('canvas')
      canvas.id = chartID

      const div = document.createElement('div')
      div.className = 'chartjs-wrap'

      if (width) {
        div.style.width = width
      }

      div.appendChild(canvas)
      chartSrc.insertAdjacentElement('afterend', div)

      const ctx = document.getElementById(chartID).getContext('2d')

      const config = JSON.parse(chartDefinition)

      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark-mode' : 'light-mode'

      // Set default styles (initial setup)
      applyThemeDefaultsConfig(theme)

      // Automatically traverse the config and apply dual-mode color schemes
      applyThemeConfig(config, theme)

      new Chart(ctx, config)
    })
  }

  const loadChartJS = () => {
    const chartJSEle = document.querySelectorAll('#article-container .chartjs-container')
    if (chartJSEle.length === 0) return

    window.loadChartJS ? runChartJS(chartJSEle) : btf.getScript('https://cdn.jsdelivr.net/npm/chart.js@4.5.0/dist/chart.umd.min.js').then(() => runChartJS(chartJSEle))
  }

  // Listen for theme change events
  btf.addGlobalFn('themeChange', loadChartJS, 'chartjs')
  btf.addGlobalFn('encrypt', loadChartJS, 'chartjs')

  window.pjax ? loadChartJS() : document.addEventListener('DOMContentLoaded', loadChartJS)
})()</script></div><script data-pjax src="/self/btf.js"></script><script src="/self/sakura.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,200,200" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      true
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script>(() => {
  const option = null
  const config = {"site_uv":true,"site_pv":true,"page_pv":true,"token":"qTvz1SkmPDt785fgh6BpiA5qiFFIVUwxj8Ft+rPW+cdN59v1hXjwRgSmy0+ji9m+oLlcxvo2NfDSMa6epVl3NTlsN3ejCIwWeP8Y51aEJ0Sbem4UexGmJLspB7AkOBId2SdtT6QWEBlGmFIIQgchQ2zAKYxTmc/kpBED5aLSr+3uvmQ9/G7FJQeVFpveDkK0xM1hu36xq4a6/FSeROxtoEp5zabzTWiYTlLsQzIl/NlELnCq3nxK+oo/vl3UQo/oM/rae/gJX/MaVKsgIUCd2ABJogNkx2KTenBIBpbPki5FzOgPh6/z4GPa4HvhNO51DDVG1SEQZooqEYmt/gnybLBWFbN+7liZWw=="}

  const runTrack = () => {
    if (typeof umami !== 'undefined' && typeof umami.track === 'function') {
      umami.track(props => ({ ...props, url: window.location.pathname, title: GLOBAL_CONFIG_SITE.title }))
    } else {
      console.warn('Umami Analytics: umami.track is not available')
    }
  }

  const loadUmamiJS = () => {
    btf.getScript('https://umami.012700.xyz/script.js', {
      'data-website-id': '2a796d6c-6499-42d8-8eb4-d9a2930b0ff3',
      'data-auto-track': 'false',
      ...option
    }).then(() => {
      runTrack()
    }).catch(error => {
      console.error('Umami Analytics: Error loading script', error)
    })
  }

  const getData = async (isPost) => {
    try {
      const now = Date.now()
      const keyUrl = isPost ? `&url=${window.location.pathname}` : ''
      const headerList = { 'Accept': 'application/json' }

      if (true) {
        headerList['Authorization'] = `Bearer ${config.token}`
      } else {
        headerList['x-umami-api-key'] = config.token
      }

      const res = await fetch(`https://umami.012700.xyz/api/websites/2a796d6c-6499-42d8-8eb4-d9a2930b0ff3/stats?startAt=0000000000&endAt=${now}${keyUrl}`, {
        method: "GET",
        headers: headerList
      })

      if (!res.ok) {
        throw new Error(`HTTP error! status: ${res.status}`)
      }

      return await res.json()
    } catch (error) {
      console.error('Umami Analytics: Failed to fetch data', error)
      throw error
    }
  }

  const insertData = async () => {
    try {
      if (GLOBAL_CONFIG_SITE.pageType === 'post' && config.page_pv) {
        const pagePV = document.getElementById('umamiPV')
        if (pagePV) {
          const data = await getData(true)
          if (data && data.pageviews && typeof data.pageviews.value !== 'undefined') {
            pagePV.textContent = data.pageviews.value
          } else {
            console.warn('Umami Analytics: Invalid page view data received')
          }
        }
      }

      if (config.site_uv || config.site_pv) {
        const data = await getData(false)

        if (config.site_uv) {
          const siteUV = document.getElementById('umami-site-uv')
          if (siteUV && data && data.visitors && typeof data.visitors.value !== 'undefined') {
            siteUV.textContent = data.visitors.value
          } else if (siteUV) {
            console.warn('Umami Analytics: Invalid site UV data received')
          }
        }

        if (config.site_pv) {
          const sitePV = document.getElementById('umami-site-pv')
          if (sitePV && data && data.pageviews && typeof data.pageviews.value !== 'undefined') {
            sitePV.textContent = data.pageviews.value
          } else if (sitePV) {
            console.warn('Umami Analytics: Invalid site PV data received')
          }
        }
      }
    } catch (error) {
      console.error('Umami Analytics: Failed to insert data', error)
    }
  }

  btf.addGlobalFn('pjaxComplete', runTrack, 'umami_analytics_run_track')
  btf.addGlobalFn('pjaxComplete', insertData, 'umami_analytics_insert')


  loadUmamiJS()

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', insertData)
  } else {
    setTimeout(insertData, 100)
  }
})()</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.1"></script></div></div></body></html>